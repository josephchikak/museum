{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"file":"isEligibleRequest.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/fetchAPI-multipart/isEligibleRequest.ts"],"sourcesContent":["const ACCEPTABLE_CONTENT_TYPE = /multipart\\/['\"()+-_]+(?:; ?['\"()+-_]*)+$/i\nconst UNACCEPTABLE_METHODS = new Set(['GET', 'HEAD', 'DELETE', 'OPTIONS', 'CONNECT', 'TRACE'])\n\nconst hasBody = (req: Request): boolean => {\n  return Boolean(\n    req.headers.get('transfer-encoding') ||\n      (req.headers.get('content-length') && req.headers.get('content-length') !== '0'),\n  )\n}\n\nconst hasAcceptableMethod = (req: Request): boolean => !UNACCEPTABLE_METHODS.has(req.method)\n\nconst hasAcceptableContentType = (req: Request): boolean => {\n  const contType = req.headers.get('content-type')\n  return contType.includes('boundary=') && ACCEPTABLE_CONTENT_TYPE.test(contType)\n}\n\nexport const isEligibleRequest = (req: Request): boolean => {\n  try {\n    return hasBody(req) && hasAcceptableMethod(req) && hasAcceptableContentType(req)\n  } catch (e) {\n    return false\n  }\n}\n"],"names":["ACCEPTABLE_CONTENT_TYPE","UNACCEPTABLE_METHODS","Set","hasBody","req","Boolean","headers","get","hasAcceptableMethod","has","method","hasAcceptableContentType","contType","includes","test","isEligibleRequest","e"],"mappings":";;;AAAA,MAAMA,uBAAA,GAA0B;AAChC,MAAMC,oBAAA,GAAuB,IAAIC,GAAA,CAAI;IAAC;IAAO;IAAQ;IAAU;IAAW;IAAW;CAAQ;AAE7F,MAAMC,OAAA,IAAWC,GAAA;IACf,OAAOC,OAAA,CACLD,GAAA,CAAIE,OAAO,CAACC,GAAG,CAAC,wBACbH,GAAA,CAAIE,OAAO,CAACC,GAAG,CAAC,qBAAqBH,GAAA,CAAIE,OAAO,CAACC,GAAG,CAAC,sBAAsB;AAElF;AAEA,MAAMC,mBAAA,IAAuBJ,GAAA,GAA0B,CAACH,oBAAA,CAAqBQ,GAAG,CAACL,GAAA,CAAIM,MAAM;AAE3F,MAAMC,wBAAA,IAA4BP,GAAA;IAChC,MAAMQ,QAAA,GAAWR,GAAA,CAAIE,OAAO,CAACC,GAAG,CAAC;IACjC,OAAOK,QAAA,CAASC,QAAQ,CAAC,gBAAgBb,uBAAA,CAAwBc,IAAI,CAACF,QAAA;AACxE;AAEO,MAAMG,iBAAA,IAAqBX,GAAA;IAChC,IAAI;QACF,OAAOD,OAAA,CAAQC,GAAA,KAAQI,mBAAA,CAAoBJ,GAAA,KAAQO,wBAAA,CAAyBP,GAAA;IAC9E,EAAE,OAAOY,CAAA,EAAG;QACV,OAAO;IACT;AACF"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"file":"utilities.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/fetchAPI-multipart/utilities.ts"],"sourcesContent":["import type { FetchAPIFileUploadOptions } from 'payload'\n\nimport fs from 'fs'\nimport path from 'path'\nimport { Readable } from 'stream'\n\n// Parameters for safe file name parsing.\nconst SAFE_FILE_NAME_REGEX = /[^\\w-]/g\nconst MAX_EXTENSION_LENGTH = 3\n\n// Parameters to generate unique temporary file names:\nconst TEMP_COUNTER_MAX = 65536\nconst TEMP_PREFIX = 'tmp'\nlet tempCounter = 0\n\n/**\n * Logs message to console if options.debug option set to true.\n */\nexport const debugLog = (options: FetchAPIFileUploadOptions, msg: string) => {\n  const opts = options || {}\n  if (!opts.debug) {\n    return false\n  }\n  console.log(`Next-file-upload: ${msg}`) // eslint-disable-line\n  return true\n}\n\n/**\n * Generates unique temporary file name. e.g. tmp-5000-156788789789.\n */\nexport const getTempFilename = (prefix: string = TEMP_PREFIX) => {\n  tempCounter = tempCounter >= TEMP_COUNTER_MAX ? 1 : tempCounter + 1\n  return `${prefix}-${tempCounter}-${Date.now()}`\n}\n\ntype FuncType = (...args: any[]) => any\nexport const isFunc = (value: any): value is FuncType => {\n  return typeof value === 'function'\n}\n\n/**\n * Set errorFunc to the same value as successFunc for callback mode.\n */\ntype ErrorFunc = (resolve: () => void, reject: (err: Error) => void) => (err: Error) => void\nconst errorFunc: ErrorFunc = (resolve, reject) => (isFunc(reject) ? reject : resolve)\n\n/**\n * Return a callback function for promise resole/reject args.\n * Ensures that callback is called only once.\n */\ntype PromiseCallback = (resolve: () => void, reject: (err: Error) => void) => (err: Error) => void\nexport const promiseCallback: PromiseCallback = (resolve, reject) => {\n  let hasFired = false\n  return (err: Error) => {\n    if (hasFired) {\n      return\n    }\n\n    hasFired = true\n    return err ? errorFunc(resolve, reject)(err) : resolve()\n  }\n}\n\n// The default prototypes for both objects and arrays.\n// Used by isSafeFromPollution\nconst OBJECT_PROTOTYPE_KEYS = Object.getOwnPropertyNames(Object.prototype)\nconst ARRAY_PROTOTYPE_KEYS = Object.getOwnPropertyNames(Array.prototype)\n\n/**\n * Determines whether a key insertion into an object could result in a prototype pollution\n */\ntype IsSafeFromPollution = (base: any, key: string) => boolean\nexport const isSafeFromPollution: IsSafeFromPollution = (base, key) => {\n  // We perform an instanceof check instead of Array.isArray as the former is more\n  // permissive for cases in which the object as an Array prototype but was not constructed\n  // via an Array constructor or literal.\n  const TOUCHES_ARRAY_PROTOTYPE = base instanceof Array && ARRAY_PROTOTYPE_KEYS.includes(key)\n  const TOUCHES_OBJECT_PROTOTYPE = OBJECT_PROTOTYPE_KEYS.includes(key)\n\n  return !TOUCHES_ARRAY_PROTOTYPE && !TOUCHES_OBJECT_PROTOTYPE\n}\n\n/**\n * Build request field/file objects to return\n */\ntype BuildFields = (instance: any, field: string, value: any) => any\nexport const buildFields: BuildFields = (instance, field, value) => {\n  // Do nothing if value is not set.\n  if (value === null || value === undefined) {\n    return instance\n  }\n  instance = instance || Object.create(null)\n\n  if (!isSafeFromPollution(instance, field)) {\n    return instance\n  }\n  // Non-array fields\n  if (!instance[field]) {\n    instance[field] = value\n    return instance\n  }\n  // Array fields\n  if (instance[field] instanceof Array) {\n    instance[field].push(value)\n  } else {\n    instance[field] = [instance[field], value]\n  }\n  return instance\n}\n\n/**\n * Creates a folder if it does not exist\n * for file specified in the path variable\n */\ntype CheckAndMakeDir = (fileUploadOptions: FetchAPIFileUploadOptions, filePath: string) => boolean\nexport const checkAndMakeDir: CheckAndMakeDir = (fileUploadOptions, filePath) => {\n  if (!fileUploadOptions.createParentPath) {\n    return false\n  }\n  // Check whether folder for the file exists.\n  const parentPath = path.dirname(filePath)\n  // Create folder if it doesn't exist.\n  if (!fs.existsSync(parentPath)) {\n    fs.mkdirSync(parentPath, { recursive: true })\n  }\n  // Checks folder again and return a results.\n  return fs.existsSync(parentPath)\n}\n\n/**\n * Delete a file.\n */\ntype DeleteFile = (filePath: string, callback: (args: any) => void) => void\nexport const deleteFile: DeleteFile = (filePath, callback: (args) => void) =>\n  fs.unlink(filePath, callback)\n\n/**\n * Copy file via streams\n */\ntype CopyFile = (src: string, dst: string, callback: (err: Error) => void) => void\nconst copyFile: CopyFile = (src, dst, callback) => {\n  // cbCalled flag and runCb helps to run cb only once.\n  let cbCalled = false\n  const runCb = (err?: Error) => {\n    if (cbCalled) {\n      return\n    }\n    cbCalled = true\n    callback(err)\n  }\n  // Create read stream\n  const readable = fs.createReadStream(src)\n  readable.on('error', runCb)\n  // Create write stream\n  const writable = fs.createWriteStream(dst)\n  writable.on('error', (err: Error) => {\n    readable.destroy()\n    runCb(err)\n  })\n  writable.on('close', () => runCb())\n  // Copy file via piping streams.\n  readable.pipe(writable)\n}\n\n/**\n * moveFile: moves the file from src to dst.\n * Firstly trying to rename the file if no luck copying it to dst and then deleting src.\n */\ntype MoveFile = (\n  src: string,\n  dst: string,\n  callback: (err: Error, renamed?: boolean) => void,\n) => void\nexport const moveFile: MoveFile = (src, dst, callback) =>\n  fs.rename(src, dst, (err) => {\n    if (err) {\n      // Try to copy file if rename didn't work.\n      copyFile(src, dst, (cpErr) => (cpErr ? callback(cpErr) : deleteFile(src, callback)))\n      return\n    }\n    // File was renamed successfully: Add true to the callback to indicate that.\n    callback(null, true)\n  })\n\n/**\n * Save buffer data to a file.\n * @param {Buffer} buffer - buffer to save to a file.\n * @param {string} filePath - path to a file.\n */\nexport const saveBufferToFile = (buffer, filePath, callback) => {\n  if (!Buffer.isBuffer(buffer)) {\n    return callback(new Error('buffer variable should be type of Buffer!'))\n  }\n  // Setup readable stream from buffer.\n  let streamData = buffer\n  const readStream = new Readable()\n  readStream._read = () => {\n    readStream.push(streamData)\n    streamData = null\n  }\n  // Setup file system writable stream.\n  const fstream = fs.createWriteStream(filePath)\n  // console.log(\"Calling saveBuffer\");\n  fstream.on('error', (err) => {\n    // console.log(\"err cb\")\n    callback(err)\n  })\n  fstream.on('close', () => {\n    // console.log(\"close cb\");\n    callback()\n  })\n  // Copy file via piping streams.\n  readStream.pipe(fstream)\n}\n\n/**\n * Decodes uriEncoded file names.\n * @param {Object} opts - middleware options.\n * @param fileName {String} - file name to decode.\n * @returns {String}\n */\nconst uriDecodeFileName = (opts, fileName) => {\n  if (!opts || !opts.uriDecodeFileNames) {\n    return fileName\n  }\n  // Decode file name from URI with checking URI malformed errors.\n  // See Issue https://github.com/richardgirges/express-fileupload/issues/342.\n  try {\n    return decodeURIComponent(fileName)\n  } catch (err) {\n    const matcher = /(%[a-f\\d]{2})/gi\n    return fileName\n      .split(matcher)\n      .map((str) => {\n        try {\n          return decodeURIComponent(str)\n        } catch (err) {\n          return ''\n        }\n      })\n      .join('')\n  }\n}\n\n/**\n * Parses filename and extension and returns object {name, extension}.\n */\ntype ParseFileNameExtension = (\n  preserveExtension: boolean | number,\n  fileName: string,\n) => {\n  extension: string\n  name: string\n}\nexport const parseFileNameExtension: ParseFileNameExtension = (preserveExtension, fileName) => {\n  const defaultResult = {\n    name: fileName,\n    extension: '',\n  }\n  if (!preserveExtension) {\n    return defaultResult\n  }\n\n  // Define maximum extension length\n  const maxExtLength =\n    typeof preserveExtension === 'boolean' ? MAX_EXTENSION_LENGTH : preserveExtension\n\n  const nameParts = fileName.split('.')\n  if (nameParts.length < 2) {\n    return defaultResult\n  }\n\n  let extension = nameParts.pop()\n  if (extension.length > maxExtLength && maxExtLength > 0) {\n    nameParts[nameParts.length - 1] += '.' + extension.substr(0, extension.length - maxExtLength)\n    extension = extension.substr(-maxExtLength)\n  }\n\n  return {\n    name: nameParts.join('.'),\n    extension: maxExtLength ? extension : '',\n  }\n}\n\n/**\n * Parse file name and extension.\n */\ntype ParseFileName = (opts: FetchAPIFileUploadOptions, fileName: string) => string\nexport const parseFileName: ParseFileName = (opts, fileName) => {\n  // Check fileName argument\n  if (!fileName || typeof fileName !== 'string') {\n    return getTempFilename()\n  }\n  // Cut off file name if it's length more then 255.\n  let parsedName = fileName.length <= 255 ? fileName : fileName.substr(0, 255)\n  // Decode file name if uriDecodeFileNames option set true.\n  parsedName = uriDecodeFileName(opts, parsedName)\n  // Stop parsing file name if safeFileNames options hasn't been set.\n  if (!opts.safeFileNames) {\n    return parsedName\n  }\n  // Set regular expression for the file name.\n  const nameRegex =\n    typeof opts.safeFileNames === 'object' && opts.safeFileNames instanceof RegExp\n      ? opts.safeFileNames\n      : SAFE_FILE_NAME_REGEX\n  // Parse file name extension.\n  const parsedFileName = parseFileNameExtension(opts.preserveExtension, parsedName)\n  if (parsedFileName.extension.length) {\n    parsedFileName.extension = '.' + parsedFileName.extension.replace(nameRegex, '')\n  }\n\n  return parsedFileName.name.replace(nameRegex, '').concat(parsedFileName.extension)\n}\n"],"names":["fs","path","Readable","SAFE_FILE_NAME_REGEX","MAX_EXTENSION_LENGTH","TEMP_COUNTER_MAX","TEMP_PREFIX","tempCounter","debugLog","options","msg","opts","debug","console","log","getTempFilename","prefix","Date","now","isFunc","value","errorFunc","resolve","reject","promiseCallback","hasFired","err","OBJECT_PROTOTYPE_KEYS","Object","getOwnPropertyNames","prototype","ARRAY_PROTOTYPE_KEYS","Array","isSafeFromPollution","base","key","TOUCHES_ARRAY_PROTOTYPE","includes","TOUCHES_OBJECT_PROTOTYPE","buildFields","instance","field","undefined","create","push","checkAndMakeDir","fileUploadOptions","filePath","createParentPath","parentPath","dirname","existsSync","mkdirSync","recursive","deleteFile","callback","unlink","copyFile","src","dst","cbCalled","runCb","readable","createReadStream","on","writable","createWriteStream","destroy","pipe","moveFile","rename","cpErr","saveBufferToFile","buffer","Buffer","isBuffer","Error","streamData","readStream","_read","fstream","uriDecodeFileName","fileName","uriDecodeFileNames","decodeURIComponent","matcher","split","map","str","join","parseFileNameExtension","preserveExtension","defaultResult","name","extension","maxExtLength","nameParts","length","pop","substr","parseFileName","parsedName","safeFileNames","nameRegex","RegExp","parsedFileName","replace","concat"],"mappings":"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"}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"file":"fileFactory.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/fetchAPI-multipart/fileFactory.ts"],"sourcesContent":["import type { FetchAPIFileUploadOptions } from 'payload'\n\nimport type { FileShape } from './index.js'\n\nimport {\n  checkAndMakeDir,\n  debugLog,\n  isFunc,\n  moveFile,\n  promiseCallback,\n  saveBufferToFile,\n} from './utilities.js'\n\ntype MoveFile = (\n  filePath: string,\n  options: FileFactoryOptions,\n  fileUploadOptions: FetchAPIFileUploadOptions,\n) => (resolve: () => void, reject: () => void) => void\n\n/**\n * Returns Local function that moves the file to a different location on the filesystem\n * which takes two function arguments to make it compatible w/ Promise or Callback APIs\n */\nconst moveFromTemp: MoveFile = (filePath, options, fileUploadOptions) => (resolve, reject) => {\n  debugLog(fileUploadOptions, `Moving temporary file ${options.tempFilePath} to ${filePath}`)\n  moveFile(options.tempFilePath, filePath, promiseCallback(resolve, reject))\n}\n\n/**\n * Returns Local function that moves the file from buffer to a different location on the filesystem\n * which takes two function arguments to make it compatible w/ Promise or Callback APIs\n */\nconst moveFromBuffer: MoveFile = (filePath, options, fileUploadOptions) => (resolve, reject) => {\n  debugLog(fileUploadOptions, `Moving uploaded buffer to ${filePath}`)\n  saveBufferToFile(options.buffer, filePath, promiseCallback(resolve, reject))\n}\n\ntype FileFactoryOptions = {\n  buffer: Buffer\n  encoding: string\n  hash: Buffer | string\n  mimetype: string\n  name: string\n  size: number\n  tempFilePath: string\n  truncated: boolean\n}\ntype FileFactory = (\n  options: FileFactoryOptions,\n  fileUploadOptions: FetchAPIFileUploadOptions,\n) => FileShape\nexport const fileFactory: FileFactory = (options, fileUploadOptions) => {\n  // see: https://github.com/richardgirges/express-fileupload/issues/14\n  // firefox uploads empty file in case of cache miss when f5ing page.\n  // resulting in unexpected behavior. if there is no file data, the file is invalid.\n  // if (!fileUploadOptions.useTempFiles && !options.buffer.length) return;\n\n  // Create and return file object.\n  return {\n    name: options.name,\n    data: options.buffer,\n    encoding: options.encoding,\n    md5: options.hash,\n    mimetype: options.mimetype,\n    mv: (filePath: string, callback) => {\n      // Define a proper move function.\n      const moveFunc = fileUploadOptions.useTempFiles\n        ? moveFromTemp(filePath, options, fileUploadOptions)\n        : moveFromBuffer(filePath, options, fileUploadOptions)\n      // Create a folder for a file.\n      checkAndMakeDir(fileUploadOptions, filePath)\n      // If callback is passed in, use the callback API, otherwise return a promise.\n      const defaultReject = () => undefined\n      return isFunc(callback) ? moveFunc(callback, defaultReject) : new Promise(moveFunc)\n    },\n    size: options.size,\n    tempFilePath: options.tempFilePath,\n    truncated: options.truncated,\n  }\n}\n"],"names":["checkAndMakeDir","debugLog","isFunc","moveFile","promiseCallback","saveBufferToFile","moveFromTemp","filePath","options","fileUploadOptions","resolve","reject","tempFilePath","moveFromBuffer","buffer","fileFactory","name","data","encoding","md5","hash","mimetype","mv","callback","moveFunc","useTempFiles","defaultReject","undefined","Promise","size","truncated"],"mappings":";;;AAIA,SACEA,eAAe,EACfC,QAAQ,EACRC,MAAM,EACNC,QAAQ,EACRC,eAAe,EACfC,gBAAgB,QACX;;AAQP;;;IAIA,MAAMC,YAAA,GAAyBA,CAACC,QAAA,EAAUC,OAAA,EAASC,iBAAA,GAAsB,CAACC,OAAA,EAASC,MAAA;iMACjFV,WAAAA,AAAA,EAASQ,iBAAA,EAAmB,CAAA,sBAAA,EAAyBD,OAAA,CAAQI,YAAY,CAAA,IAAA,EAAOL,QAAA,EAAU;YAC1FJ,gMAAAA,AAAA,EAASK,OAAA,CAAQI,YAAY,EAAEL,QAAA,2LAAUH,kBAAAA,AAAA,EAAgBM,OAAA,EAASC,MAAA;IACpE;AAEA;;;IAIA,MAAME,cAAA,GAA2BA,CAACN,QAAA,EAAUC,OAAA,EAASC,iBAAA,GAAsB,CAACC,OAAA,EAASC,MAAA;QACnFV,oMAAAA,AAAA,EAASQ,iBAAA,EAAmB,CAAA,0BAAA,EAA6BF,QAAA,EAAU;iMACnEF,mBAAAA,AAAA,EAAiBG,OAAA,CAAQM,MAAM,EAAEP,QAAA,EAAUH,2MAAAA,AAAA,EAAgBM,OAAA,EAASC,MAAA;IACtE;AAgBO,MAAMI,WAAA,GAA2BA,CAACP,OAAA,EAASC,iBAAA;IAChD,qEAAA;IACA,oEAAA;IACA,mFAAA;IACA,yEAAA;IAEA,iCAAA;IACA,OAAO;QACLO,IAAA,EAAMR,OAAA,CAAQQ,IAAI;QAClBC,IAAA,EAAMT,OAAA,CAAQM,MAAM;QACpBI,QAAA,EAAUV,OAAA,CAAQU,QAAQ;QAC1BC,GAAA,EAAKX,OAAA,CAAQY,IAAI;QACjBC,QAAA,EAAUb,OAAA,CAAQa,QAAQ;QAC1BC,EAAA,EAAIA,CAACf,QAAA,EAAkBgB,QAAA;YACrB,iCAAA;YACA,MAAMC,QAAA,GAAWf,iBAAA,CAAkBgB,YAAY,GAC3CnB,YAAA,CAAaC,QAAA,EAAUC,OAAA,EAASC,iBAAA,IAChCI,cAAA,CAAeN,QAAA,EAAUC,OAAA,EAASC,iBAAA;YACtC,8BAAA;qMACAT,kBAAAA,AAAA,EAAgBS,iBAAA,EAAmBF,QAAA;YACnC,8EAAA;YACA,MAAMmB,aAAA,GAAgBA,CAAA,GAAMC,SAAA;YAC5B,gMAAOzB,SAAAA,AAAA,EAAOqB,QAAA,IAAYC,QAAA,CAASD,QAAA,EAAUG,aAAA,IAAiB,IAAIE,OAAA,CAAQJ,QAAA;QAC5E;QACAK,IAAA,EAAMrB,OAAA,CAAQqB,IAAI;QAClBjB,YAAA,EAAcJ,OAAA,CAAQI,YAAY;QAClCkB,SAAA,EAAWtB,OAAA,CAAQsB,SAAAA;IACrB;AACF"}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"file":"handlers.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/fetchAPI-multipart/handlers.ts"],"sourcesContent":["import type { FetchAPIFileUploadOptions } from 'payload'\n\nimport crypto from 'crypto'\nimport fs, { WriteStream } from 'fs'\nimport path from 'path'\n\nimport { checkAndMakeDir, debugLog, deleteFile, getTempFilename } from './utilities.js'\n\ntype Handler = (\n  options: FetchAPIFileUploadOptions,\n  fieldname: string,\n  filename: string,\n) => {\n  cleanup: () => void\n  complete: () => Buffer\n  dataHandler: (data: Buffer) => void\n  getFilePath: () => string\n  getFileSize: () => number\n  getHash: () => string\n  getWritePromise: () => Promise<boolean>\n}\n\nexport const tempFileHandler: Handler = (options, fieldname, filename) => {\n  const dir = path.normalize(options.tempFileDir)\n  const tempFilePath = path.join(process.cwd(), dir, getTempFilename())\n  checkAndMakeDir({ createParentPath: true }, tempFilePath)\n\n  debugLog(options, `Temporary file path is ${tempFilePath}`)\n\n  const hash = crypto.createHash('md5')\n  let fileSize = 0\n  let completed = false\n\n  debugLog(options, `Opening write stream for ${fieldname}->${filename}...`)\n  const writeStream = fs.createWriteStream(tempFilePath)\n  const writePromise = new Promise<boolean>((resolve, reject) => {\n    writeStream.on('finish', () => resolve(true))\n    writeStream.on('error', (err) => {\n      debugLog(options, `Error write temp file: ${err}`)\n      reject(err)\n    })\n  })\n\n  return {\n    cleanup: () => {\n      completed = true\n      debugLog(options, `Cleaning up temporary file ${tempFilePath}...`)\n      writeStream.end()\n      deleteFile(tempFilePath, (err) =>\n        err\n          ? debugLog(options, `Cleaning up temporary file ${tempFilePath} failed: ${err}`)\n          : debugLog(options, `Cleaning up temporary file ${tempFilePath} done.`),\n      )\n    },\n    complete: () => {\n      completed = true\n      debugLog(options, `Upload ${fieldname}->${filename} completed, bytes:${fileSize}.`)\n      if (writeStream instanceof WriteStream) {\n        writeStream.end()\n      }\n      // Return empty buff since data was uploaded into a temp file.\n      return Buffer.concat([])\n    },\n    dataHandler: (data) => {\n      if (completed === true) {\n        debugLog(options, `Error: got ${fieldname}->${filename} data chunk for completed upload!`)\n        return\n      }\n      writeStream.write(data)\n      hash.update(data)\n      fileSize += data.length\n      debugLog(options, `Uploading ${fieldname}->${filename}, bytes:${fileSize}...`)\n    },\n    getFilePath: () => tempFilePath,\n    getFileSize: () => fileSize,\n    getHash: () => hash.digest('hex'),\n    getWritePromise: () => writePromise,\n  }\n}\n\nexport const memHandler: Handler = (options, fieldname, filename) => {\n  const buffers: Buffer[] = []\n  const hash = crypto.createHash('md5')\n  let fileSize = 0\n  let completed = false\n\n  const getBuffer = () => Buffer.concat(buffers, fileSize)\n\n  return {\n    cleanup: () => {\n      completed = true\n    },\n    complete: () => {\n      debugLog(options, `Upload ${fieldname}->${filename} completed, bytes:${fileSize}.`)\n      completed = true\n      return getBuffer()\n    },\n    dataHandler: (data) => {\n      if (completed === true) {\n        debugLog(options, `Error: got ${fieldname}->${filename} data chunk for completed upload!`)\n        return\n      }\n      buffers.push(data)\n      hash.update(data)\n      fileSize += data.length\n      debugLog(options, `Uploading ${fieldname}->${filename}, bytes:${fileSize}...`)\n    },\n    getFilePath: () => '',\n    getFileSize: () => fileSize,\n    getHash: () => hash.digest('hex'),\n    getWritePromise: () => Promise.resolve(true),\n  }\n}\n"],"names":["crypto","fs","WriteStream","path","checkAndMakeDir","debugLog","deleteFile","getTempFilename","tempFileHandler","options","fieldname","filename","dir","normalize","tempFileDir","tempFilePath","join","process","cwd","createParentPath","hash","createHash","fileSize","completed","writeStream","createWriteStream","writePromise","Promise","resolve","reject","on","err","cleanup","end","complete","Buffer","concat","dataHandler","data","write","update","length","getFilePath","getFileSize","getHash","digest","getWritePromise","memHandler","buffers","getBuffer","push"],"mappings":"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"}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"file":"processNested.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/fetchAPI-multipart/processNested.ts"],"sourcesContent":["import { isSafeFromPollution } from './utilities.js'\n\nexport const processNested = function (data) {\n  if (!data || data.length < 1) {\n    return Object.create(null)\n  }\n\n  const d = Object.create(null),\n    keys = Object.keys(data)\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i],\n      keyParts = key.replace(new RegExp(/\\[/g), '.').replace(new RegExp(/\\]/g), '').split('.'),\n      value = data[key]\n    let current = d\n\n    for (let index = 0; index < keyParts.length; index++) {\n      const k = keyParts[index]\n\n      // Ensure we don't allow prototype pollution\n      if (!isSafeFromPollution(current, k)) {\n        continue\n      }\n\n      if (index >= keyParts.length - 1) {\n        current[k] = value\n      } else {\n        if (!current[k]) {\n          current[k] = !keyParts[index + 1] ? [] : Object.create(null)\n        }\n        current = current[k]\n      }\n    }\n  }\n  return d\n}\n"],"names":["isSafeFromPollution","processNested","data","length","Object","create","d","keys","i","key","keyParts","replace","RegExp","split","value","current","index","k"],"mappings":";;;AAAA,SAASA,mBAAmB,QAAQ;;AAE7B,MAAMC,aAAA,GAAgB,SAAAA,AAAUC,IAAI;IACzC,IAAI,CAACA,IAAA,IAAQA,IAAA,CAAKC,MAAM,GAAG,GAAG;QAC5B,OAAOC,MAAA,CAAOC,MAAM,CAAC;IACvB;IAEA,MAAMC,CAAA,GAAIF,MAAA,CAAOC,MAAM,CAAC,OACtBE,IAAA,GAAOH,MAAA,CAAOG,IAAI,CAACL,IAAA;IAErB,IAAK,IAAIM,CAAA,GAAI,GAAGA,CAAA,GAAID,IAAA,CAAKJ,MAAM,EAAEK,CAAA,GAAK;QACpC,MAAMC,GAAA,GAAMF,IAAI,CAACC,CAAA,CAAE,EACjBE,QAAA,GAAWD,GAAA,CAAIE,OAAO,CAAC,IAAIC,MAAA,CAAO,QAAQ,KAAKD,OAAO,CAAC,IAAIC,MAAA,CAAO,QAAQ,IAAIC,KAAK,CAAC,MACpFC,KAAA,GAAQZ,IAAI,CAACO,GAAA,CAAI;QACnB,IAAIM,OAAA,GAAUT,CAAA;QAEd,IAAK,IAAIU,KAAA,GAAQ,GAAGA,KAAA,GAAQN,QAAA,CAASP,MAAM,EAAEa,KAAA,GAAS;YACpD,MAAMC,CAAA,GAAIP,QAAQ,CAACM,KAAA,CAAM;YAEzB,4CAAA;YACA,IAAI,0LAAChB,sBAAAA,AAAA,EAAoBe,OAAA,EAASE,CAAA,GAAI;gBACpC;YACF;YAEA,IAAID,KAAA,IAASN,QAAA,CAASP,MAAM,GAAG,GAAG;gBAChCY,OAAO,CAACE,CAAA,CAAE,GAAGH,KAAA;YACf,OAAO;gBACL,IAAI,CAACC,OAAO,CAACE,CAAA,CAAE,EAAE;oBACfF,OAAO,CAACE,CAAA,CAAE,GAAG,CAACP,QAAQ,CAACM,KAAA,GAAQ,EAAE,GAAG,EAAE,GAAGZ,MAAA,CAAOC,MAAM,CAAC;gBACzD;gBACAU,OAAA,GAAUA,OAAO,CAACE,CAAA,CAAE;YACtB;QACF;IACF;IACA,OAAOX,CAAA;AACT"}},
    {"offset": {"line": 462, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 468, "column": 0}, "map": {"version":3,"file":"uploadTimer.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/fetchAPI-multipart/uploadTimer.ts"],"sourcesContent":["type CreateUploadTimer = (\n  timeout?: number,\n  callback?: () => void,\n) => {\n  clear: () => void\n  set: () => boolean\n}\n\nexport const createUploadTimer: CreateUploadTimer = (timeout = 0, callback = () => {}) => {\n  let timer = null\n\n  const clear = () => {\n    clearTimeout(timer)\n  }\n\n  const set = () => {\n    // Do not start a timer if zero timeout or it hasn't been set.\n    if (!timeout) {\n      return false\n    }\n    clear()\n    timer = setTimeout(callback, timeout)\n    return true\n  }\n\n  return { clear, set }\n}\n"],"names":["createUploadTimer","timeout","callback","timer","clear","clearTimeout","set","setTimeout"],"mappings":";;;AAQO,MAAMA,iBAAA,GAAuCA,CAACC,OAAA,GAAU,CAAC,EAAEC,QAAA,GAAWA,CAAA,IAAO,CAAC;IACnF,IAAIC,KAAA,GAAQ;IAEZ,MAAMC,KAAA,GAAQA,CAAA;QACZC,YAAA,CAAaF,KAAA;IACf;IAEA,MAAMG,GAAA,GAAMA,CAAA;QACV,8DAAA;QACA,IAAI,CAACL,OAAA,EAAS;YACZ,OAAO;QACT;QACAG,KAAA;QACAD,KAAA,GAAQI,UAAA,CAAWL,QAAA,EAAUD,OAAA;QAC7B,OAAO;IACT;IAEA,OAAO;QAAEG,KAAA;QAAOE;IAAI;AACtB"}},
    {"offset": {"line": 490, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"file":"processMultipart.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/fetchAPI-multipart/processMultipart.ts"],"sourcesContent":["import type { FetchAPIFileUploadOptions } from 'payload'\nimport type { Readable } from 'stream'\n\nimport Busboy from 'busboy'\nimport httpStatus from 'http-status'\nimport { APIError } from 'payload'\n\nimport type { FetchAPIFileUploadResponse } from './index.js'\n\nimport { fileFactory } from './fileFactory.js'\nimport { memHandler, tempFileHandler } from './handlers.js'\nimport { processNested } from './processNested.js'\nimport { createUploadTimer } from './uploadTimer.js'\nimport { buildFields, debugLog, isFunc, parseFileName } from './utilities.js'\n\nconst waitFlushProperty = Symbol('wait flush property symbol')\n\ntype ProcessMultipart = (args: {\n  options: FetchAPIFileUploadOptions\n  request: Request\n}) => Promise<FetchAPIFileUploadResponse>\nexport const processMultipart: ProcessMultipart = async ({ options, request }) => {\n  let parsingRequest = true\n\n  let fileCount = 0\n  let filesCompleted = 0\n  let allFilesHaveResolved: (value?: unknown) => void\n  let failedResolvingFiles: (err: Error) => void\n\n  const allFilesComplete = new Promise((res, rej) => {\n    allFilesHaveResolved = res\n    failedResolvingFiles = rej\n  })\n\n  const result: FetchAPIFileUploadResponse = {\n    fields: undefined,\n    files: undefined,\n  }\n\n  const headersObject = {}\n  request.headers.forEach((value, name) => {\n    headersObject[name] = value\n  })\n\n  function abortAndDestroyFile(file: Readable, err: APIError) {\n    file.destroy()\n    parsingRequest = false\n    failedResolvingFiles(err)\n  }\n\n  const busboy = Busboy({ ...options, headers: headersObject })\n\n  // Build multipart req.body fields\n  busboy.on('field', (field, val) => {\n    result.fields = buildFields(result.fields, field, val)\n  })\n\n  // Build req.files fields\n  busboy.on('file', (field, file, info) => {\n    fileCount += 1\n    // Parse file name(cutting huge names, decoding, etc..).\n    const { encoding, filename: name, mimeType: mime } = info\n    const filename = parseFileName(options, name)\n\n    // Define methods and handlers for upload process.\n    const { cleanup, complete, dataHandler, getFilePath, getFileSize, getHash, getWritePromise } =\n      options.useTempFiles\n        ? tempFileHandler(options, field, filename) // Upload into temporary file.\n        : memHandler(options, field, filename) // Upload into RAM.\n\n    const writePromise = options.useTempFiles\n      ? getWritePromise().catch((err) => {\n          busboy.end()\n          cleanup()\n        })\n      : getWritePromise()\n\n    const uploadTimer = createUploadTimer(options.uploadTimeout, () => {\n      return abortAndDestroyFile(\n        file,\n        new APIError(`Upload timeout for ${field}->${filename}, bytes:${getFileSize()}`),\n      )\n    })\n\n    file.on('limit', () => {\n      debugLog(options, `Size limit reached for ${field}->${filename}, bytes:${getFileSize()}`)\n      uploadTimer.clear()\n\n      if (isFunc(options.limitHandler)) {\n        options.limitHandler({ request, size: getFileSize() })\n      }\n\n      // Return error and cleanup files if abortOnLimit set.\n      if (options.abortOnLimit) {\n        debugLog(options, `Upload file size limit reached ${field}->${filename}.`)\n        cleanup()\n        abortAndDestroyFile(\n          file,\n          new APIError(options.responseOnLimit, httpStatus.REQUEST_ENTITY_TOO_LARGE, {\n            size: getFileSize(),\n          }),\n        )\n      }\n    })\n\n    file.on('data', (data) => {\n      uploadTimer.set()\n      dataHandler(data)\n    })\n\n    file.on('end', () => {\n      const size = getFileSize()\n      debugLog(options, `Upload finished ${field}->${filename}, bytes:${size}`)\n      uploadTimer.clear()\n\n      if (!name && size === 0) {\n        fileCount -= 1\n        if (options.useTempFiles) {\n          cleanup()\n          debugLog(options, `Removing the empty file ${field}->${filename}`)\n        }\n        return debugLog(options, `Don't add file instance if original name and size are empty`)\n      }\n\n      filesCompleted += 1\n\n      result.files = buildFields(\n        result.files,\n        field,\n        fileFactory(\n          {\n            name: filename,\n            buffer: complete(),\n            encoding,\n            hash: getHash(),\n            mimetype: mime,\n            size,\n            tempFilePath: getFilePath(),\n            truncated: Boolean('truncated' in file && file.truncated),\n          },\n          options,\n        ),\n      )\n\n      if (!request[waitFlushProperty]) {\n        request[waitFlushProperty] = []\n      }\n      request[waitFlushProperty].push(writePromise)\n\n      if (filesCompleted === fileCount) {\n        allFilesHaveResolved()\n      }\n    })\n\n    file.on('error', (err) => {\n      uploadTimer.clear()\n      debugLog(options, `File Error: ${err.message}`)\n      cleanup()\n      failedResolvingFiles(err)\n    })\n\n    // Start upload process.\n    debugLog(options, `New upload started ${field}->${filename}, bytes:${getFileSize()}`)\n    uploadTimer.set()\n  })\n\n  // TODO: Valid eslint error - this will likely be a floating promise. Evaluate if we need to handle this differently.\n\n  busboy.on('finish', async () => {\n    debugLog(options, `Busboy finished parsing request.`)\n    if (options.parseNested) {\n      result.fields = processNested(result.fields)\n      result.files = processNested(result.files)\n    }\n\n    if (request[waitFlushProperty]) {\n      try {\n        await Promise.all(request[waitFlushProperty]).then(() => {\n          delete request[waitFlushProperty]\n        })\n      } catch (err) {\n        debugLog(options, `Error waiting for file write promises: ${err}`)\n      }\n    }\n\n    return result\n  })\n\n  busboy.on(\n    'error',\n    (err = new APIError('Busboy error parsing multipart request', httpStatus.BAD_REQUEST)) => {\n      debugLog(options, `Busboy error`)\n      parsingRequest = false\n      throw err\n    },\n  )\n\n  const reader = request.body.getReader()\n\n  // Start parsing request\n  while (parsingRequest) {\n    const { done, value } = await reader.read()\n\n    if (done) {\n      parsingRequest = false\n    }\n\n    if (value) {\n      busboy.write(value)\n    }\n  }\n\n  if (fileCount !== 0) {\n    await allFilesComplete.catch((e) => {\n      throw e\n    })\n  }\n\n  return result\n}\n"],"names":["Busboy","httpStatus","APIError","fileFactory","memHandler","tempFileHandler","processNested","createUploadTimer","buildFields","debugLog","isFunc","parseFileName","waitFlushProperty","Symbol","processMultipart","options","request","parsingRequest","fileCount","filesCompleted","allFilesHaveResolved","failedResolvingFiles","allFilesComplete","Promise","res","rej","result","fields","undefined","files","headersObject","headers","forEach","value","name","abortAndDestroyFile","file","err","destroy","busboy","on","field","val","info","encoding","filename","mimeType","mime","cleanup","complete","dataHandler","getFilePath","getFileSize","getHash","getWritePromise","useTempFiles","writePromise","catch","end","uploadTimer","uploadTimeout","clear","limitHandler","size","abortOnLimit","responseOnLimit","REQUEST_ENTITY_TOO_LARGE","data","set","buffer","hash","mimetype","tempFilePath","truncated","Boolean","push","message","parseNested","all","then","BAD_REQUEST","reader","body","getReader","done","read","write","e"],"mappings":"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"}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 674, "column": 0}, "map": {"version":3,"file":"index.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/fetchAPI-multipart/index.ts"],"sourcesContent":["import type { FetchAPIFileUploadOptions } from 'payload'\n\nimport path from 'path'\nimport { APIError } from 'payload'\n\nimport { isEligibleRequest } from './isEligibleRequest.js'\nimport { processMultipart } from './processMultipart.js'\nimport { debugLog } from './utilities.js'\n\nconst DEFAULT_OPTIONS: FetchAPIFileUploadOptions = {\n  abortOnLimit: false,\n  createParentPath: false,\n  debug: false,\n  defParamCharset: 'utf8',\n  limitHandler: false,\n  parseNested: false,\n  preserveExtension: false,\n  responseOnLimit: 'File size limit has been reached',\n  safeFileNames: false,\n  tempFileDir: path.join(process.cwd(), 'tmp'),\n  uploadTimeout: 60000,\n  uriDecodeFileNames: false,\n  useTempFiles: false,\n}\n\nexport type FileShape = {\n  data: Buffer\n  encoding: string\n  md5: Buffer | string\n  mimetype: string\n  mv: (filePath: string, callback: () => void) => Promise<void> | void\n  name: string\n  size: number\n  tempFilePath: string\n  truncated: boolean\n}\n\ntype FetchAPIFileUploadResponseFile = {\n  data: Buffer\n  mimetype: string\n  name: string\n  size: number\n  tempFilePath?: string\n}\n\nexport type FetchAPIFileUploadResponse = {\n  error?: APIError\n  fields: Record<string, string>\n  files: Record<string, FetchAPIFileUploadResponseFile>\n}\n\ntype FetchAPIFileUpload = (args: {\n  options?: FetchAPIFileUploadOptions\n  request: Request\n}) => Promise<FetchAPIFileUploadResponse>\nexport const fetchAPIFileUpload: FetchAPIFileUpload = async ({ options, request }) => {\n  const uploadOptions: FetchAPIFileUploadOptions = { ...DEFAULT_OPTIONS, ...options }\n  if (!isEligibleRequest(request)) {\n    debugLog(uploadOptions, 'Request is not eligible for file upload!')\n    return {\n      error: new APIError('Request is not eligible for file upload', 500),\n      fields: undefined,\n      files: undefined,\n    }\n  } else {\n    return processMultipart({ options: uploadOptions, request })\n  }\n}\n"],"names":["path","APIError","isEligibleRequest","processMultipart","debugLog","DEFAULT_OPTIONS","abortOnLimit","createParentPath","debug","defParamCharset","limitHandler","parseNested","preserveExtension","responseOnLimit","safeFileNames","tempFileDir","join","process","cwd","uploadTimeout","uriDecodeFileNames","useTempFiles","fetchAPIFileUpload","options","request","uploadOptions","error","fields","undefined","files"],"mappings":";;;AAEA,OAAOA,IAAA,MAAU;AAGjB,SAASE,iBAAiB,QAAQ;AAClC,SAASC,gBAAgB,QAAQ;AACjC,SAASC,QAAQ,QAAQ;AAJzB,SAASH,QAAQ,QAAQ;;;;;;AAMzB,MAAMI,eAAA,GAA6C;IACjDC,YAAA,EAAc;IACdC,gBAAA,EAAkB;IAClBC,KAAA,EAAO;IACPC,eAAA,EAAiB;IACjBC,YAAA,EAAc;IACdC,WAAA,EAAa;IACbC,iBAAA,EAAmB;IACnBC,eAAA,EAAiB;IACjBC,aAAA,EAAe;IACfC,WAAA,+FAAaf,WAAA,CAAKgB,IAAI,CAACC,OAAA,CAAQC,GAAG,IAAI;IACtCC,aAAA,EAAe;IACfC,kBAAA,EAAoB;IACpBC,YAAA,EAAc;AAChB;AAgCO,MAAMC,kBAAA,GAAyC,MAAAA,CAAO,EAAEC,OAAO,EAAEC,OAAAA,EAAS;IAC/E,MAAMC,aAAA,GAA2C;QAAE,GAAGpB,eAAe;QAAE,GAAGkB,OAAAA;IAAQ;IAClF,IAAI,kMAACrB,oBAAAA,AAAA,EAAkBsB,OAAA,GAAU;iMAC/BpB,WAAAA,AAAA,EAASqB,aAAA,EAAe;QACxB,OAAO;YACLC,KAAA,EAAO,IAAIzB,mKAAA,CAAS,2CAA2C;YAC/D0B,MAAA,EAAQC,SAAA;YACRC,KAAA,EAAOD;QACT;IACF,OAAO;QACL,uMAAOzB,mBAAAA,AAAA,EAAiB;YAAEoB,OAAA,EAASE,aAAA;YAAeD;QAAQ;IAC5D;AACF"}},
    {"offset": {"line": 721, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 727, "column": 0}, "map": {"version":3,"file":"addDataAndFileToRequest.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/utilities/addDataAndFileToRequest.ts"],"sourcesContent":["import type { PayloadRequest } from 'payload'\n\nimport { APIError } from 'payload'\n\nimport { fetchAPIFileUpload } from '../fetchAPI-multipart/index.js'\n\ntype AddDataAndFileToRequest = (req: PayloadRequest) => Promise<void>\n\n/**\n * Mutates the Request, appending 'data' and 'file' if found\n */\nexport const addDataAndFileToRequest: AddDataAndFileToRequest = async (req) => {\n  const { body, headers, method, payload } = req\n\n  if (method && ['PATCH', 'POST', 'PUT'].includes(method.toUpperCase()) && body) {\n    const [contentType] = (headers.get('Content-Type') || '').split(';')\n    const bodyByteSize = parseInt(req.headers.get('Content-Length') || '0', 10)\n\n    if (contentType === 'application/json') {\n      let data = {}\n      try {\n        data = await req.json()\n      } catch (error) {\n        req.payload.logger.error(error)\n      } finally {\n        req.data = data\n        req.json = () => Promise.resolve(data)\n      }\n    } else if (bodyByteSize && contentType.includes('multipart/')) {\n      const { error, fields, files } = await fetchAPIFileUpload({\n        options: payload.config.upload,\n        request: req as Request,\n      })\n\n      if (error) {\n        throw new APIError(error.message)\n      }\n\n      if (files?.file) {\n        req.file = files.file\n      }\n\n      if (fields?._payload && typeof fields._payload === 'string') {\n        req.data = JSON.parse(fields._payload)\n      }\n    }\n  }\n}\n"],"names":["APIError","fetchAPIFileUpload","addDataAndFileToRequest","req","body","headers","method","payload","includes","toUpperCase","contentType","get","split","bodyByteSize","parseInt","data","json","error","logger","Promise","resolve","fields","files","options","config","upload","request","message","file","_payload","JSON","parse"],"mappings":";;;AAIA,SAASC,kBAAkB,QAAQ;AAFnC,SAASD,QAAQ,QAAQ;;;AASlB,MAAME,uBAAA,GAAmD,OAAOC,GAAA;IACrE,MAAM,EAAEC,IAAI,EAAEC,OAAO,EAAEC,MAAM,EAAEC,OAAAA,EAAS,GAAGJ,GAAA;IAE3C,IAAIG,MAAA,IAAU;QAAC;QAAS;QAAQ;KAAM,CAACE,QAAQ,CAACF,MAAA,CAAOG,WAAW,OAAOL,IAAA,EAAM;QAC7E,MAAM,CAACM,WAAA,CAAY,GAAG,CAACL,OAAA,CAAQM,GAAG,CAAC,mBAAmB,EAAC,EAAGC,KAAK,CAAC;QAChE,MAAMC,YAAA,GAAeC,QAAA,CAASX,GAAA,CAAIE,OAAO,CAACM,GAAG,CAAC,qBAAqB,KAAK;QAExE,IAAID,WAAA,KAAgB,oBAAoB;YACtC,IAAIK,IAAA,GAAO,CAAC;YACZ,IAAI;gBACFA,IAAA,GAAO,MAAMZ,GAAA,CAAIa,IAAI;YACvB,EAAE,OAAOC,KAAA,EAAO;gBACdd,GAAA,CAAII,OAAO,CAACW,MAAM,CAACD,KAAK,CAACA,KAAA;YAC3B,SAAU;gBACRd,GAAA,CAAIY,IAAI,GAAGA,IAAA;gBACXZ,GAAA,CAAIa,IAAI,GAAG,IAAMG,OAAA,CAAQC,OAAO,CAACL,IAAA;YACnC;QACF,OAAO,IAAIF,YAAA,IAAgBH,WAAA,CAAYF,QAAQ,CAAC,eAAe;YAC7D,MAAM,EAAES,KAAK,EAAEI,MAAM,EAAEC,KAAAA,EAAO,GAAG,MAAMrB,0MAAAA,AAAA,EAAmB;gBACxDsB,OAAA,EAAShB,OAAA,CAAQiB,MAAM,CAACC,MAAM;gBAC9BC,OAAA,EAASvB;YACX;YAEA,IAAIc,KAAA,EAAO;gBACT,MAAM,2JAAIjB,YAAA,CAASiB,KAAA,CAAMU,OAAO;YAClC;YAEA,IAAIL,KAAA,EAAOM,IAAA,EAAM;gBACfzB,GAAA,CAAIyB,IAAI,GAAGN,KAAA,CAAMM,IAAI;YACvB;YAEA,IAAIP,MAAA,EAAQQ,QAAA,IAAY,OAAOR,MAAA,CAAOQ,QAAQ,KAAK,UAAU;gBAC3D1B,GAAA,CAAIY,IAAI,GAAGe,IAAA,CAAKC,KAAK,CAACV,MAAA,CAAOQ,QAAQ;YACvC;QACF;IACF;AACF"}},
    {"offset": {"line": 770, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 776, "column": 0}, "map": {"version":3,"file":"addLocalesToRequest.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/utilities/addLocalesToRequest.ts"],"sourcesContent":["import type { PayloadRequest, SanitizedConfig } from 'payload'\n\n/**\n * Mutates the Request to contain 'locale' and 'fallbackLocale' based on data or searchParams\n */\nexport function addLocalesToRequestFromData(req: PayloadRequest): void {\n  const {\n    data,\n    payload: { config },\n  } = req\n\n  if (data) {\n    let localeOnReq = req.locale\n    let fallbackLocaleOnReq = req.fallbackLocale\n\n    if (!localeOnReq && data?.locale && typeof data.locale === 'string') {\n      localeOnReq = data.locale\n    }\n\n    if (\n      !fallbackLocaleOnReq &&\n      data?.['fallback-locale'] &&\n      typeof data?.['fallback-locale'] === 'string'\n    ) {\n      fallbackLocaleOnReq = data['fallback-locale']\n    }\n\n    const { fallbackLocale, locale } = sanitizeLocales({\n      fallbackLocale: fallbackLocaleOnReq,\n      locale: localeOnReq,\n      localization: config.localization,\n    })\n\n    if (locale) {\n      req.locale = locale\n    }\n    if (fallbackLocale) {\n      req.fallbackLocale = fallbackLocale\n    }\n  }\n}\n\ntype SanitizeLocalesArgs = {\n  fallbackLocale: string\n  locale: string\n  localization: SanitizedConfig['localization']\n}\ntype SanitizeLocalesReturn = {\n  fallbackLocale?: string\n  locale?: string\n}\nexport const sanitizeLocales = ({\n  fallbackLocale,\n  locale,\n  localization,\n}: SanitizeLocalesArgs): SanitizeLocalesReturn => {\n  if (['none', 'null'].includes(fallbackLocale)) {\n    fallbackLocale = 'null'\n  } else if (localization && !localization.localeCodes.includes(fallbackLocale)) {\n    fallbackLocale = localization.defaultLocale\n  }\n\n  if (locale === '*') {\n    locale = 'all'\n  } else if (localization && !localization.localeCodes.includes(locale)) {\n    locale = localization.defaultLocale\n  }\n\n  return {\n    fallbackLocale,\n    locale,\n  }\n}\n"],"names":["addLocalesToRequestFromData","req","data","payload","config","localeOnReq","locale","fallbackLocaleOnReq","fallbackLocale","sanitizeLocales","localization","includes","localeCodes","defaultLocale"],"mappings":"AAEA;;GAGA;;;;AAAO,SAASA,4BAA4BC,GAAmB;IAC7D,MAAM,EACJC,IAAI,EACJC,OAAA,EAAS,EAAEC,MAAAA,EAAM,EAClB,GAAGH,GAAA;IAEJ,IAAIC,IAAA,EAAM;QACR,IAAIG,WAAA,GAAcJ,GAAA,CAAIK,MAAM;QAC5B,IAAIC,mBAAA,GAAsBN,GAAA,CAAIO,cAAc;QAE5C,IAAI,CAACH,WAAA,IAAeH,IAAA,EAAMI,MAAA,IAAU,OAAOJ,IAAA,CAAKI,MAAM,KAAK,UAAU;YACnED,WAAA,GAAcH,IAAA,CAAKI,MAAM;QAC3B;QAEA,IACE,CAACC,mBAAA,IACDL,IAAA,EAAA,CAAO,kBAAkB,IACzB,OAAOA,IAAA,EAAA,CAAO,kBAAkB,KAAK,UACrC;YACAK,mBAAA,GAAsBL,IAAI,CAAC,kBAAkB;QAC/C;QAEA,MAAM,EAAEM,cAAc,EAAEF,MAAAA,EAAQ,GAAGG,eAAA,CAAgB;YACjDD,cAAA,EAAgBD,mBAAA;YAChBD,MAAA,EAAQD,WAAA;YACRK,YAAA,EAAcN,MAAA,CAAOM,YAAAA;QACvB;QAEA,IAAIJ,MAAA,EAAQ;YACVL,GAAA,CAAIK,MAAM,GAAGA,MAAA;QACf;QACA,IAAIE,cAAA,EAAgB;YAClBP,GAAA,CAAIO,cAAc,GAAGA,cAAA;QACvB;IACF;AACF;AAWO,MAAMC,eAAA,GAAkBA,CAAC,EAC9BD,cAAc,EACdF,MAAM,EACNI,YAAAA,EACoB;IACpB,IAAI;QAAC;QAAQ;KAAO,CAACC,QAAQ,CAACH,cAAA,GAAiB;QAC7CA,cAAA,GAAiB;IACnB,OAAO,IAAIE,YAAA,IAAgB,CAACA,YAAA,CAAaE,WAAW,CAACD,QAAQ,CAACH,cAAA,GAAiB;QAC7EA,cAAA,GAAiBE,YAAA,CAAaG,aAAa;IAC7C;IAEA,IAAIP,MAAA,KAAW,KAAK;QAClBA,MAAA,GAAS;IACX,OAAO,IAAII,YAAA,IAAgB,CAACA,YAAA,CAAaE,WAAW,CAACD,QAAQ,CAACL,MAAA,GAAS;QACrEA,MAAA,GAASI,YAAA,CAAaG,aAAa;IACrC;IAEA,OAAO;QACLL,cAAA;QACAF;IACF;AACF"}},
    {"offset": {"line": 825, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 831, "column": 0}, "map": {"version":3,"file":"getPayloadHMR.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/utilities/getPayloadHMR.ts"],"sourcesContent":["import type { InitOptions, Payload, SanitizedConfig } from 'payload'\n\nimport { BasePayload, generateImportMap } from 'payload'\nimport WebSocket from 'ws'\n\nlet cached: {\n  payload: null | Payload\n  promise: null | Promise<Payload>\n  reload: boolean | Promise<void>\n  ws: null | WebSocket\n} = global._payload\n\nif (!cached) {\n  cached = global._payload = { payload: null, promise: null, reload: false, ws: null }\n}\n\nexport const reload = async (\n  config: SanitizedConfig,\n  payload: Payload,\n  skipImportMapGeneration?: boolean,\n): Promise<void> => {\n  if (typeof payload.db.destroy === 'function') {\n    await payload.db.destroy()\n  }\n\n  payload.config = config\n\n  payload.collections = config.collections.reduce((collections, collection) => {\n    collections[collection.slug] = {\n      config: collection,\n      customIDType: payload.collections[collection.slug]?.customIDType,\n    }\n    return collections\n  }, {})\n\n  payload.globals = {\n    config: config.globals,\n  }\n\n  // TODO: support HMR for other props in the future (see payload/src/index init()) hat may change on Payload singleton\n\n  // Generate types\n  if (config.typescript.autoGenerate !== false) {\n    // We cannot run it directly here, as generate-types imports json-schema-to-typescript, which breaks on turbopack.\n    // see: https://github.com/vercel/next.js/issues/66723\n    void payload.bin({\n      args: ['generate:types'],\n      log: false,\n    })\n  }\n\n  // Generate component map\n  if (skipImportMapGeneration !== true && config.admin?.importMap?.autoGenerate !== false) {\n    await generateImportMap(config, {\n      log: true,\n    })\n  }\n\n  await payload.db.init()\n  if (payload.db.connect) {\n    await payload.db.connect({ hotReload: true })\n  }\n}\n\nexport const getPayloadHMR = async (\n  options: Pick<InitOptions, 'config' | 'importMap'>,\n): Promise<Payload> => {\n  if (!options?.config) {\n    throw new Error('Error: the payload config is required for getPayloadHMR to work.')\n  }\n\n  if (cached.payload) {\n    if (cached.reload === true) {\n      let resolve: () => void\n\n      // getPayloadHMR is called multiple times, in parallel. However, we only want to run `await reload` once. By immediately setting cached.reload to a promise,\n      // we can ensure that all subsequent calls will wait for the first reload to finish. So if we set it here, the 2nd call of getPayloadHMR\n      // will reach `if (cached.reload instanceof Promise) {` which then waits for the first reload to finish.\n      cached.reload = new Promise((res) => (resolve = res))\n      const config = await options.config\n      await reload(config, cached.payload)\n\n      resolve()\n    }\n\n    if (cached.reload instanceof Promise) {\n      await cached.reload\n    }\n\n    if (options?.importMap) {\n      cached.payload.importMap = options.importMap\n    }\n    return cached.payload\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-misused-promises\n  if (!cached.promise) {\n    // no need to await options.config here, as it's already awaited in the BasePayload.init\n    cached.promise = new BasePayload().init(options)\n  }\n\n  try {\n    cached.payload = await cached.promise\n\n    if (\n      !cached.ws &&\n      process.env.NODE_ENV !== 'production' &&\n      process.env.NODE_ENV !== 'test' &&\n      process.env.DISABLE_PAYLOAD_HMR !== 'true'\n    ) {\n      try {\n        const port = process.env.PORT || '3000'\n        cached.ws = new WebSocket(\n          `ws://localhost:${port}${process.env.NEXT_BASE_PATH ?? ''}/_next/webpack-hmr`,\n        )\n\n        cached.ws.onmessage = (event) => {\n          if (typeof event.data === 'string') {\n            const data = JSON.parse(event.data)\n\n            if ('action' in data && data.action === 'serverComponentChanges') {\n              cached.reload = true\n            }\n          }\n        }\n      } catch (_) {\n        // swallow e\n      }\n    }\n  } catch (e) {\n    cached.promise = null\n    throw e\n  }\n\n  if (options?.importMap) {\n    cached.payload.importMap = options.importMap\n  }\n\n  return cached.payload\n}\n"],"names":["BasePayload","generateImportMap","WebSocket","cached","global","_payload","payload","promise","reload","ws","config","skipImportMapGeneration","db","destroy","collections","reduce","collection","slug","customIDType","globals","typescript","autoGenerate","bin","args","log","admin","importMap","init","connect","hotReload","getPayloadHMR","options","Error","resolve","Promise","res","process","env","NODE_ENV","DISABLE_PAYLOAD_HMR","port","PORT","NEXT_BASE_PATH","onmessage","event","data","JSON","parse","action","_","e"],"mappings":"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"}},
    {"offset": {"line": 945, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 951, "column": 0}, "map": {"version":3,"file":"getRequestLanguage.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/utilities/getRequestLanguage.ts"],"sourcesContent":["import type { AcceptedLanguages } from '@payloadcms/translations'\nimport type { ReadonlyRequestCookies } from 'next/dist/server/web/spec-extension/adapters/request-cookies.js'\nimport type { SanitizedConfig } from 'payload'\n\nimport { extractHeaderLanguage } from '@payloadcms/translations'\n\ntype GetRequestLanguageArgs = {\n  config: SanitizedConfig\n  cookies: Map<string, string> | ReadonlyRequestCookies\n  defaultLanguage?: AcceptedLanguages\n  headers: Request['headers']\n}\n\nexport const getRequestLanguage = ({\n  config,\n  cookies,\n  headers,\n}: GetRequestLanguageArgs): AcceptedLanguages => {\n  const supportedLanguageKeys = <AcceptedLanguages[]>Object.keys(config.i18n.supportedLanguages)\n  const langCookie = cookies.get(`${config.cookiePrefix || 'payload'}-lng`)\n\n  const languageFromCookie: AcceptedLanguages = (\n    typeof langCookie === 'string' ? langCookie : langCookie?.value\n  ) as AcceptedLanguages\n\n  if (languageFromCookie && supportedLanguageKeys.includes(languageFromCookie)) {\n    return languageFromCookie\n  }\n\n  const languageFromHeader = headers.get('Accept-Language')\n    ? extractHeaderLanguage(headers.get('Accept-Language'))\n    : undefined\n\n  if (languageFromHeader && supportedLanguageKeys.includes(languageFromHeader)) {\n    return languageFromHeader\n  }\n\n  return config.i18n.fallbackLanguage\n}\n"],"names":["extractHeaderLanguage","getRequestLanguage","config","cookies","headers","supportedLanguageKeys","Object","keys","i18n","supportedLanguages","langCookie","get","cookiePrefix","languageFromCookie","value","includes","languageFromHeader","undefined","fallbackLanguage"],"mappings":";;;AAIA,SAASA,qBAAqB,QAAQ;;;AAS/B,MAAMC,kBAAA,GAAqBA,CAAC,EACjCC,MAAM,EACNC,OAAO,EACPC,OAAAA,EACuB;IACvB,MAAMC,qBAAA,GAA6CC,MAAA,CAAOC,IAAI,CAACL,MAAA,CAAOM,IAAI,CAACC,kBAAkB;IAC7F,MAAMC,UAAA,GAAaP,OAAA,CAAQQ,GAAG,CAAC,GAAGT,MAAA,CAAOU,YAAY,IAAI,UAAA,IAAA,CAAe;IAExE,MAAMC,kBAAA,GACJ,OAAOH,UAAA,KAAe,WAAWA,UAAA,GAAaA,UAAA,EAAYI,KAAA;IAG5D,IAAID,kBAAA,IAAsBR,qBAAA,CAAsBU,QAAQ,CAACF,kBAAA,GAAqB;QAC5E,OAAOA,kBAAA;IACT;IAEA,MAAMG,kBAAA,GAAqBZ,OAAA,CAAQO,GAAG,CAAC,0MACnCX,wBAAAA,AAAA,EAAsBI,OAAA,CAAQO,GAAG,CAAC,sBAClCM,SAAA;IAEJ,IAAID,kBAAA,IAAsBX,qBAAA,CAAsBU,QAAQ,CAACC,kBAAA,GAAqB;QAC5E,OAAOA,kBAAA;IACT;IAEA,OAAOd,MAAA,CAAOM,IAAI,CAACU,gBAAgB;AACrC"}},
    {"offset": {"line": 970, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 976, "column": 0}, "map": {"version":3,"file":"createPayloadRequest.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/utilities/createPayloadRequest.ts"],"sourcesContent":["import type { CustomPayloadRequestProperties, PayloadRequest, SanitizedConfig } from 'payload'\n\nimport { initI18n } from '@payloadcms/translations'\nimport { executeAuthStrategies, getDataLoader, parseCookies } from 'payload'\nimport * as qs from 'qs-esm'\nimport { URL } from 'url'\n\nimport { sanitizeLocales } from './addLocalesToRequest.js'\nimport { getPayloadHMR } from './getPayloadHMR.js'\nimport { getRequestLanguage } from './getRequestLanguage.js'\n\ntype Args = {\n  config: Promise<SanitizedConfig> | SanitizedConfig\n  params?: {\n    collection: string\n  }\n  request: Request\n}\n\nexport const createPayloadRequest = async ({\n  config: configPromise,\n  params,\n  request,\n}: Args): Promise<PayloadRequest> => {\n  const cookies = parseCookies(request.headers)\n  const payload = await getPayloadHMR({ config: configPromise })\n\n  const { config } = payload\n\n  const urlProperties = new URL(request.url)\n  const { pathname, searchParams } = urlProperties\n\n  const isGraphQL =\n    !config.graphQL.disable && pathname === `${config.routes.api}${config.routes.graphQL}`\n\n  const language = getRequestLanguage({\n    config,\n    cookies,\n    headers: request.headers,\n  })\n\n  const i18n = await initI18n({\n    config: config.i18n,\n    context: 'api',\n    language,\n  })\n\n  let locale\n  let fallbackLocale\n\n  const overrideHttpMethod = request.headers.get('X-HTTP-Method-Override')\n  const queryToParse = overrideHttpMethod === 'GET' ? await request.text() : urlProperties.search\n\n  const query = queryToParse\n    ? qs.parse(queryToParse, {\n        arrayLimit: 1000,\n        depth: 10,\n        ignoreQueryPrefix: true,\n      })\n    : {}\n\n  if (config.localization) {\n    const locales = sanitizeLocales({\n      fallbackLocale: searchParams.get('fallback-locale'),\n      locale: searchParams.get('locale'),\n      localization: payload.config.localization,\n    })\n    locale = locales.locale\n    fallbackLocale = locales.fallbackLocale\n\n    // Override if query params are present, in order to respect HTTP method override\n    if (query.locale) {\n      locale = query.locale\n    }\n    if (query?.['fallback-locale']) {\n      fallbackLocale = query['fallback-locale']\n    }\n  }\n\n  const customRequest: CustomPayloadRequestProperties = {\n    context: {},\n    fallbackLocale,\n    hash: urlProperties.hash,\n    host: urlProperties.host,\n    href: urlProperties.href,\n    i18n,\n    locale,\n    origin: urlProperties.origin,\n    pathname: urlProperties.pathname,\n    payload,\n    payloadAPI: isGraphQL ? 'GraphQL' : 'REST',\n    payloadDataLoader: undefined,\n    payloadUploadSizes: {},\n    port: urlProperties.port,\n    protocol: urlProperties.protocol,\n    query,\n    routeParams: params || {},\n    search: urlProperties.search,\n    searchParams: urlProperties.searchParams,\n    t: i18n.t,\n    transactionID: undefined,\n    user: null,\n  }\n\n  const req: PayloadRequest = Object.assign(request, customRequest)\n\n  req.payloadDataLoader = getDataLoader(req)\n\n  const { responseHeaders, user } = await executeAuthStrategies({\n    headers: req.headers,\n    isGraphQL,\n    payload,\n  })\n\n  req.user = user\n\n  if (responseHeaders) {\n    req.responseHeaders = responseHeaders\n  }\n\n  return req\n}\n"],"names":["initI18n","executeAuthStrategies","getDataLoader","parseCookies","qs","URL","sanitizeLocales","getPayloadHMR","getRequestLanguage","createPayloadRequest","config","configPromise","params","request","cookies","headers","payload","urlProperties","url","pathname","searchParams","isGraphQL","graphQL","disable","routes","api","language","i18n","context","locale","fallbackLocale","overrideHttpMethod","get","queryToParse","text","search","query","parse","arrayLimit","depth","ignoreQueryPrefix","localization","locales","customRequest","hash","host","href","origin","payloadAPI","payloadDataLoader","undefined","payloadUploadSizes","port","protocol","routeParams","t","transactionID","user","req","Object","assign","responseHeaders"],"mappings":"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"}},
    {"offset": {"line": 1077, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1083, "column": 0}, "map": {"version":3,"file":"headersWithCors.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/utilities/headersWithCors.ts"],"sourcesContent":["import type { PayloadRequest } from 'payload'\n\ntype CorsArgs = {\n  headers: Headers\n  req: Partial<PayloadRequest>\n}\nexport const headersWithCors = ({ headers, req }: CorsArgs): Headers => {\n  const cors = req?.payload.config.cors\n  const requestOrigin = req?.headers.get('Origin')\n\n  if (cors) {\n    const defaultAllowedHeaders = [\n      'Origin',\n      'X-Requested-With',\n      'Content-Type',\n      'Accept',\n      'Authorization',\n      'Content-Encoding',\n      'x-apollo-tracing',\n    ]\n\n    headers.set('Access-Control-Allow-Methods', 'PUT, PATCH, POST, GET, DELETE, OPTIONS')\n\n    if (typeof cors === 'object' && 'headers' in cors) {\n      headers.set(\n        'Access-Control-Allow-Headers',\n        [...defaultAllowedHeaders, ...cors.headers].filter(Boolean).join(', '),\n      )\n    } else {\n      headers.set('Access-Control-Allow-Headers', defaultAllowedHeaders.join(', '))\n    }\n\n    if (cors === '*' || (typeof cors === 'object' && 'origins' in cors && cors.origins === '*')) {\n      headers.set('Access-Control-Allow-Origin', '*')\n    } else if (\n      (Array.isArray(cors) && cors.indexOf(requestOrigin) > -1) ||\n      (!Array.isArray(cors) &&\n        typeof cors === 'object' &&\n        'origins' in cors &&\n        cors.origins.indexOf(requestOrigin) > -1)\n    ) {\n      headers.set('Access-Control-Allow-Credentials', 'true')\n      headers.set('Access-Control-Allow-Origin', requestOrigin)\n    }\n  }\n\n  return headers\n}\n"],"names":["headersWithCors","headers","req","cors","payload","config","requestOrigin","get","defaultAllowedHeaders","set","filter","Boolean","join","origins","Array","isArray","indexOf"],"mappings":";;;AAMO,MAAMA,eAAA,GAAkBA,CAAC,EAAEC,OAAO,EAAEC,GAAAA,EAAe;IACxD,MAAMC,IAAA,GAAOD,GAAA,EAAKE,OAAA,CAAQC,MAAA,CAAOF,IAAA;IACjC,MAAMG,aAAA,GAAgBJ,GAAA,EAAKD,OAAA,CAAQM,GAAA,CAAI;IAEvC,IAAIJ,IAAA,EAAM;QACR,MAAMK,qBAAA,GAAwB;YAC5B;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAEDP,OAAA,CAAQQ,GAAG,CAAC,gCAAgC;QAE5C,IAAI,OAAON,IAAA,KAAS,YAAY,aAAaA,IAAA,EAAM;YACjDF,OAAA,CAAQQ,GAAG,CACT,gCACA,C;mBAAID,qBAAA,E;mBAA0BL,IAAA,CAAKF,OAAO;aAAC,CAACS,MAAM,CAACC,OAAA,EAASC,IAAI,CAAC;QAErE,OAAO;YACLX,OAAA,CAAQQ,GAAG,CAAC,gCAAgCD,qBAAA,CAAsBI,IAAI,CAAC;QACzE;QAEA,IAAIT,IAAA,KAAS,OAAQ,OAAOA,IAAA,KAAS,YAAY,aAAaA,IAAA,IAAQA,IAAA,CAAKU,OAAO,KAAK,KAAM;YAC3FZ,OAAA,CAAQQ,GAAG,CAAC,+BAA+B;QAC7C,OAAO,IACLK,KAAC,CAAMC,OAAO,CAACZ,IAAA,KAASA,IAAA,CAAKa,OAAO,CAACV,aAAA,IAAiB,CAAC,KACtD,CAACQ,KAAA,CAAMC,OAAO,CAACZ,IAAA,KACd,OAAOA,IAAA,KAAS,YAChB,aAAaA,IAAA,IACbA,IAAA,CAAKU,OAAO,CAACG,OAAO,CAACV,aAAA,IAAiB,CAAC,GACzC;YACAL,OAAA,CAAQQ,GAAG,CAAC,oCAAoC;YAChDR,OAAA,CAAQQ,GAAG,CAAC,+BAA+BH,aAAA;QAC7C;IACF;IAEA,OAAOL,OAAA;AACT"}},
    {"offset": {"line": 1117, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1123, "column": 0}, "map": {"version":3,"file":"mergeHeaders.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/utilities/mergeHeaders.ts"],"sourcesContent":["export const mergeHeaders = (sourceHeaders: Headers, destinationHeaders: Headers): Headers => {\n  // Create a new Headers object\n  const combinedHeaders = new Headers(destinationHeaders)\n\n  // Append sourceHeaders to combinedHeaders\n  sourceHeaders.forEach((value, key) => {\n    combinedHeaders.append(key, value)\n  })\n\n  return combinedHeaders\n}\n"],"names":["mergeHeaders","sourceHeaders","destinationHeaders","combinedHeaders","Headers","forEach","value","key","append"],"mappings":";;;AAAO,MAAMA,YAAA,GAAeA,CAACC,aAAA,EAAwBC,kBAAA;IACnD,8BAAA;IACA,MAAMC,eAAA,GAAkB,IAAIC,OAAA,CAAQF,kBAAA;IAEpC,0CAAA;IACAD,aAAA,CAAcI,OAAO,CAAC,CAACC,KAAA,EAAOC,GAAA;QAC5BJ,eAAA,CAAgBK,MAAM,CAACD,GAAA,EAAKD,KAAA;IAC9B;IAEA,OAAOH,eAAA;AACT"}},
    {"offset": {"line": 1135, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1141, "column": 0}, "map": {"version":3,"file":"handler.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/graphql/handler.ts"],"sourcesContent":["import type { GraphQLError, GraphQLFormattedError } from 'graphql'\nimport type { APIError, Payload, PayloadRequest, SanitizedConfig } from 'payload'\n\nimport { configToSchema } from '@payloadcms/graphql'\nimport { createHandler } from 'graphql-http/lib/use/fetch'\nimport httpStatus from 'http-status'\n\nimport { addDataAndFileToRequest } from '../../utilities/addDataAndFileToRequest.js'\nimport { addLocalesToRequestFromData } from '../../utilities/addLocalesToRequest.js'\nimport { createPayloadRequest } from '../../utilities/createPayloadRequest.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { mergeHeaders } from '../../utilities/mergeHeaders.js'\n\nconst handleError = async ({\n  err,\n  payload,\n  req,\n}: {\n  err: GraphQLError\n  payload: Payload\n  req: PayloadRequest\n}): Promise<GraphQLFormattedError> => {\n  const status = (err.originalError as APIError).status || httpStatus.INTERNAL_SERVER_ERROR\n  let errorMessage = err.message\n  payload.logger.error(err.stack)\n\n  // Internal server errors can contain anything, including potentially sensitive data.\n  // Therefore, error details will be hidden from the response unless `config.debug` is `true`\n  if (!payload.config.debug && status === httpStatus.INTERNAL_SERVER_ERROR) {\n    errorMessage = 'Something went wrong.'\n  }\n\n  let response: GraphQLFormattedError = {\n    extensions: {\n      name: err?.originalError?.name || undefined,\n      data: (err && err.originalError && (err.originalError as APIError).data) || undefined,\n      stack: payload.config.debug ? err.stack : undefined,\n      statusCode: status,\n    },\n    locations: err.locations,\n    message: errorMessage,\n    path: err.path,\n  }\n\n  await payload.config.hooks.afterError?.reduce(async (promise, hook) => {\n    await promise\n\n    const result = await hook({\n      context: req.context,\n      error: err,\n      graphqlResult: response,\n      req,\n    })\n\n    if (result) {\n      response = result.graphqlResult || response\n    }\n  }, Promise.resolve())\n\n  return response\n}\n\nlet cached = global._payload_graphql\n\nif (!cached) {\n  cached = global._payload_graphql = { graphql: null, promise: null }\n}\n\nexport const getGraphql = async (config: Promise<SanitizedConfig> | SanitizedConfig) => {\n  if (process.env.NODE_ENV === 'development') {\n    cached = global._payload_graphql = { graphql: null, promise: null }\n  }\n\n  if (cached.graphql) {\n    return cached.graphql\n  }\n\n  if (!cached.promise) {\n    const resolvedConfig = await config\n    cached.promise = new Promise((resolve) => {\n      const schema = configToSchema(resolvedConfig)\n      resolve(cached.graphql || schema)\n    })\n  }\n\n  try {\n    cached.graphql = await cached.promise\n  } catch (e) {\n    cached.promise = null\n    throw e\n  }\n\n  return cached.graphql\n}\n\nexport const POST =\n  (config: Promise<SanitizedConfig> | SanitizedConfig) => async (request: Request) => {\n    const originalRequest = request.clone()\n    const req = await createPayloadRequest({\n      config,\n      request,\n    })\n\n    await addDataAndFileToRequest(req)\n    addLocalesToRequestFromData(req)\n\n    const { schema, validationRules } = await getGraphql(config)\n\n    const { payload } = req\n\n    const headers = {}\n    const apiResponse = await createHandler({\n      context: { headers, req },\n      onOperation: async (request, args, result) => {\n        const response =\n          typeof payload.extensions === 'function'\n            ? await payload.extensions({\n                args,\n                req: request,\n                result,\n              })\n            : result\n        if (response.errors) {\n          const errors = (await Promise.all(\n            result.errors.map((error) => {\n              return handleError({ err: error, payload, req })\n            }),\n          )) as GraphQLError[]\n          // errors type should be FormattedGraphQLError[] but onOperation has a return type of ExecutionResult instead of FormattedExecutionResult\n          return { ...response, errors }\n        }\n        return response\n      },\n      schema,\n      validationRules: (_, args, defaultRules) => defaultRules.concat(validationRules(args)),\n    })(originalRequest)\n\n    const resHeaders = headersWithCors({\n      headers: new Headers(apiResponse.headers),\n      req,\n    })\n\n    for (const key in headers) {\n      resHeaders.append(key, headers[key])\n    }\n\n    return new Response(apiResponse.body, {\n      headers: req.responseHeaders ? mergeHeaders(req.responseHeaders, resHeaders) : resHeaders,\n      status: apiResponse.status,\n    })\n  }\n"],"names":["configToSchema","createHandler","httpStatus","addDataAndFileToRequest","addLocalesToRequestFromData","createPayloadRequest","headersWithCors","mergeHeaders","handleError","err","payload","req","status","originalError","INTERNAL_SERVER_ERROR","errorMessage","message","logger","error","stack","config","debug","response","extensions","name","undefined","data","statusCode","locations","path","hooks","afterError","reduce","promise","hook","result","context","graphqlResult","Promise","resolve","cached","global","_payload_graphql","graphql","getGraphql","process","env","NODE_ENV","resolvedConfig","schema","e","POST","request","originalRequest","clone","validationRules","headers","apiResponse","onOperation","args","errors","all","map","_","defaultRules","concat","resHeaders","Headers","key","append","Response","body","responseHeaders"],"mappings":";;;;AAGA,SAASA,cAAc,QAAQ;AAE/B,OAAOE,UAAA,MAAgB;AAEvB,SAASC,uBAAuB,QAAQ;AACxC,SAASC,2BAA2B,QAAQ;AAC5C,SAASC,oBAAoB,QAAQ;AACrC,SAASC,eAAe,QAAQ;AAChC,SAASC,YAAY,QAAQ;AAP7B,SAASN,aAAa,QAAQ;;;;;;;;;AAS9B,MAAMO,WAAA,GAAc,MAAAA,CAAO,EACzBC,GAAG,EACHC,OAAO,EACPC,GAAAA,EAKD;IACC,MAAMC,MAAA,GAASH,GAAC,CAAII,aAAa,CAAcD,MAAM,qJAAIV,UAAA,CAAWY,qBAAqB;IACzF,IAAIC,YAAA,GAAeN,GAAA,CAAIO,OAAO;IAC9BN,OAAA,CAAQO,MAAM,CAACC,KAAK,CAACT,GAAA,CAAIU,KAAK;IAE9B,qFAAA;IACA,4FAAA;IACA,IAAI,CAACT,OAAA,CAAQU,MAAM,CAACC,KAAK,IAAIT,MAAA,sJAAWV,UAAA,CAAWY,qBAAqB,EAAE;QACxEC,YAAA,GAAe;IACjB;IAEA,IAAIO,QAAA,GAAkC;QACpCC,UAAA,EAAY;YACVC,IAAA,EAAMf,GAAA,EAAKI,aAAA,EAAeW,IAAA,IAAQC,SAAA;YAClCC,IAAA,EAAMjB,GAAC,IAAOA,GAAA,CAAII,aAAa,IAAIJ,GAAC,CAAII,aAAa,CAAca,IAAI,IAAKD,SAAA;YAC5EN,KAAA,EAAOT,OAAA,CAAQU,MAAM,CAACC,KAAK,GAAGZ,GAAA,CAAIU,KAAK,GAAGM,SAAA;YAC1CE,UAAA,EAAYf;QACd;QACAgB,SAAA,EAAWnB,GAAA,CAAImB,SAAS;QACxBZ,OAAA,EAASD,YAAA;QACTc,IAAA,EAAMpB,GAAA,CAAIoB,IAAAA;IACZ;IAEA,MAAMnB,OAAA,CAAQU,MAAM,CAACU,KAAK,CAACC,UAAU,EAAEC,MAAA,CAAO,OAAOC,OAAA,EAASC,IAAA;QAC5D,MAAMD,OAAA;QAEN,MAAME,MAAA,GAAS,MAAMD,IAAA,CAAK;YACxBE,OAAA,EAASzB,GAAA,CAAIyB,OAAO;YACpBlB,KAAA,EAAOT,GAAA;YACP4B,aAAA,EAAef,QAAA;YACfX;QACF;QAEA,IAAIwB,MAAA,EAAQ;YACVb,QAAA,GAAWa,MAAA,CAAOE,aAAa,IAAIf,QAAA;QACrC;IACF,GAAGgB,OAAA,CAAQC,OAAO;IAElB,OAAOjB,QAAA;AACT;AAEA,IAAIkB,MAAA,GAASC,MAAA,CAAOC,gBAAgB;AAEpC,IAAI,CAACF,MAAA,EAAQ;IACXA,MAAA,GAASC,MAAA,CAAOC,gBAAgB,GAAG;QAAEC,OAAA,EAAS;QAAMV,OAAA,EAAS;IAAK;AACpE;AAEO,MAAMW,UAAA,GAAa,OAAOxB,MAAA;IAC/B,IAAIyB,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK,WAAe;QAC1CP,MAAA,GAASC,MAAA,CAAOC,gBAAgB,GAAG;YAAEC,OAAA,EAAS;YAAMV,OAAA,EAAS;QAAK;IACpE;IAEA,IAAIO,MAAA,CAAOG,OAAO,EAAE;QAClB,OAAOH,MAAA,CAAOG,OAAO;IACvB;IAEA,IAAI,CAACH,MAAA,CAAOP,OAAO,EAAE;QACnB,MAAMe,cAAA,GAAiB,MAAM5B,MAAA;QAC7BoB,MAAA,CAAOP,OAAO,GAAG,IAAIK,OAAA,EAASC,OAAA;YAC5B,MAAMU,MAAA,kKAASjD,iBAAAA,AAAA,EAAegD,cAAA;YAC9BT,OAAA,CAAQC,MAAA,CAAOG,OAAO,IAAIM,MAAA;QAC5B;IACF;IAEA,IAAI;QACFT,MAAA,CAAOG,OAAO,GAAG,MAAMH,MAAA,CAAOP,OAAO;IACvC,EAAE,OAAOiB,CAAA,EAAG;QACVV,MAAA,CAAOP,OAAO,GAAG;QACjB,MAAMiB,CAAA;IACR;IAEA,OAAOV,MAAA,CAAOG,OAAO;AACvB;AAEO,MAAMQ,IAAA,IACV/B,MAAA,GAAuD,OAAOgC,OAAA;QAC7D,MAAMC,eAAA,GAAkBD,OAAA,CAAQE,KAAK;QACrC,MAAM3C,GAAA,GAAM,8LAAMN,uBAAAA,AAAA,EAAqB;YACrCe,MAAA;YACAgC;QACF;QAEA,iMAAMjD,0BAAAA,AAAA,EAAwBQ,GAAA;QAC9BP,qNAAAA,AAAA,EAA4BO,GAAA;QAE5B,MAAM,EAAEsC,MAAM,EAAEM,eAAAA,EAAiB,GAAG,MAAMX,UAAA,CAAWxB,MAAA;QAErD,MAAM,EAAEV,OAAAA,EAAS,GAAGC,GAAA;QAEpB,MAAM6C,OAAA,GAAU,CAAC;QACjB,MAAMC,WAAA,GAAc,OAAMxD,6KAAA,AAAAA,EAAc;YACtCmC,OAAA,EAAS;gBAAEoB,OAAA;gBAAS7C;YAAI;YACxB+C,WAAA,EAAa,MAAAA,CAAON,OAAA,EAASO,IAAA,EAAMxB,MAAA;gBACjC,MAAMb,QAAA,GACJ,OAAOZ,OAAA,CAAQa,UAAU,KAAK,aAC1B,MAAMb,OAAA,CAAQa,UAAU,CAAC;oBACvBoC,IAAA;oBACAhD,GAAA,EAAKyC,OAAA;oBACLjB;gBACF,KACAA,MAAA;gBACN,IAAIb,QAAA,CAASsC,MAAM,EAAE;oBACnB,MAAMA,MAAA,GAAU,MAAMtB,OAAA,CAAQuB,GAAG,CAC/B1B,MAAA,CAAOyB,MAAM,CAACE,GAAG,EAAE5C,KAAA;wBACjB,OAAOV,WAAA,CAAY;4BAAEC,GAAA,EAAKS,KAAA;4BAAOR,OAAA;4BAASC;wBAAI;oBAChD;oBAEF,yIAAA;oBACA,OAAO;wBAAE,GAAGW,QAAQ;wBAAEsC;oBAAO;gBAC/B;gBACA,OAAOtC,QAAA;YACT;YACA2B,MAAA;YACAM,eAAA,EAAiBA,CAACQ,CAAA,EAAGJ,IAAA,EAAMK,YAAA,GAAiBA,YAAA,CAAaC,MAAM,CAACV,eAAA,CAAgBI,IAAA;QAClF,GAAGN,eAAA;QAEH,MAAMa,UAAA,sLAAa5D,kBAAAA,AAAA,EAAgB;YACjCkD,OAAA,EAAS,IAAIW,OAAA,CAAQV,WAAA,CAAYD,OAAO;YACxC7C;QACF;QAEA,IAAK,MAAMyD,GAAA,IAAOZ,OAAA,CAAS;YACzBU,UAAA,CAAWG,MAAM,CAACD,GAAA,EAAKZ,OAAO,CAACY,GAAA,CAAI;QACrC;QAEA,OAAO,IAAIE,QAAA,CAASb,WAAA,CAAYc,IAAI,EAAE;YACpCf,OAAA,EAAS7C,GAAA,CAAI6D,eAAe,mLAAGjE,eAAAA,AAAA,EAAaI,GAAA,CAAI6D,eAAe,EAAEN,UAAA,IAAcA,UAAA;YAC/EtD,MAAA,EAAQ6C,WAAA,CAAY7C,MAAAA;QACtB;IACF"}},
    {"offset": {"line": 1280, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1286, "column": 0}, "map": {"version":3,"file":"playground.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/graphql/playground.ts"],"sourcesContent":["import type { SanitizedConfig } from 'payload'\n\nimport { renderPlaygroundPage } from 'graphql-playground-html'\n\nimport { createPayloadRequest } from '../../utilities/createPayloadRequest.js'\n\nexport const GET = (config: Promise<SanitizedConfig>) => async (request: Request) => {\n  const req = await createPayloadRequest({\n    config,\n    request,\n  })\n\n  if (\n    (!req.payload.config.graphQL.disable &&\n      !req.payload.config.graphQL.disablePlaygroundInProduction &&\n      process.env.NODE_ENV === 'production') ||\n    process.env.NODE_ENV !== 'production'\n  ) {\n    return new Response(\n      renderPlaygroundPage({\n        endpoint: `${req.payload.config.routes.api}${req.payload.config.routes.graphQL}`,\n        settings: {\n          'request.credentials': 'include',\n        },\n      }),\n      {\n        headers: {\n          'Content-Type': 'text/html',\n        },\n        status: 200,\n      },\n    )\n  } else {\n    return new Response('Route Not Found', { status: 404 })\n  }\n}\n"],"names":["renderPlaygroundPage","createPayloadRequest","GET","config","request","req","payload","graphQL","disable","disablePlaygroundInProduction","process","env","NODE_ENV","Response","endpoint","routes","api","settings","headers","status"],"mappings":";;;AAEA,SAASA,oBAAoB,QAAQ;AAErC,SAASC,oBAAoB,QAAQ;;;AAE9B,MAAMC,GAAA,IAAOC,MAAA,GAAqC,OAAOC,OAAA;QAC9D,MAAMC,GAAA,GAAM,8LAAMJ,uBAAAA,AAAA,EAAqB;YACrCE,MAAA;YACAC;QACF;QAEA,IACE,CAAEC,GAAA,CAAIC,OAAO,CAACH,MAAM,CAACI,OAAO,CAACC,OAAO,CAIpC,GAHE,CAACH,GAAA,CAAIC,OAAO,CAACH,MAAM,CAACI,OAAO,CAACE,6BAA6B,IACzDC,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK,gBAC3BF,OAAA,CAAQC,GAAG,CAACC,QAAQ,KAAK;YAEzB,OAAO,IAAIC,QAAA,sKACTb,uBAAAA,AAAA,EAAqB;gBACnBc,QAAA,EAAU,GAAGT,GAAA,CAAIC,OAAO,CAACH,MAAM,CAACY,MAAM,CAACC,GAAG,GAAGX,GAAA,CAAIC,OAAO,CAACH,MAAM,CAACY,MAAM,CAACR,OAAO,EAAE;gBAChFU,QAAA,EAAU;oBACR,uBAAuB;gBACzB;YACF,IACA;gBACEC,OAAA,EAAS;oBACP,gBAAgB;gBAClB;gBACAC,MAAA,EAAQ;YACV;QAEJ,OAAO;;QAEP;IACF"}},
    {"offset": {"line": 1314, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1320, "column": 0}, "map": {"version":3,"file":"index.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/graphql/index.ts"],"sourcesContent":["export { POST as GRAPHQL_POST } from './handler.js'\n\nexport { GET as GRAPHQL_PLAYGROUND_GET } from './playground.js'\n"],"names":["POST","GRAPHQL_POST","GET","GRAPHQL_PLAYGROUND_GET"],"mappings":""}},
    {"offset": {"line": 1324, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1340, "column": 0}, "map": {"version":3,"file":"access.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/access.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { accessOperation } from 'payload'\n\nimport type { BaseRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const access: BaseRouteHandler = async ({ req }) => {\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  try {\n    const results = await accessOperation({\n      req,\n    })\n\n    return Response.json(results, {\n      headers,\n      status: httpStatus.OK,\n    })\n  } catch (e: unknown) {\n    return Response.json(\n      {\n        error: e,\n      },\n      {\n        headers,\n        status: httpStatus.INTERNAL_SERVER_ERROR,\n      },\n    )\n  }\n}\n"],"names":["httpStatus","accessOperation","headersWithCors","access","req","headers","Headers","results","Response","json","status","OK","e","error","INTERNAL_SERVER_ERROR"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASE,eAAe,QAAQ;AAJhC,SAASD,eAAe,QAAQ;;;;AAMzB,MAAME,MAAA,GAA2B,MAAAA,CAAO,EAAEC,GAAAA,EAAK;IACpD,MAAMC,OAAA,sLAAUH,kBAAAA,AAAA,EAAgB;QAC9BG,OAAA,EAAS,IAAIC,OAAA;QACbF;IACF;IAEA,IAAI;QACF,MAAMG,OAAA,GAAU,4KAAMN,kBAAAA,AAAA,EAAgB;YACpCG;QACF;QAEA,OAAOI,QAAA,CAASC,IAAI,CAACF,OAAA,EAAS;YAC5BF,OAAA;YACAK,MAAA,mJAAQV,UAAA,CAAWW,EAAAA;QACrB;IACF,EAAE,OAAOC,CAAA,EAAY;QACnB,OAAOJ,QAAA,CAASC,IAAI,CAClB;YACEI,KAAA,EAAOD;QACT,GACA;YACEP,OAAA;YACAK,MAAA,mJAAQV,UAAA,CAAWc,qBAAAA;QACrB;IAEJ;AACF"}},
    {"offset": {"line": 1371, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1377, "column": 0}, "map": {"version":3,"file":"forgotPassword.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/forgotPassword.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { forgotPasswordOperation } from 'payload'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const forgotPassword: CollectionRouteHandler = async ({ collection, req }) => {\n  const { t } = req\n  const authData = collection.config.auth?.loginWithUsername\n    ? {\n        email: typeof req.data?.email === 'string' ? req.data.email : '',\n        username: typeof req.data?.username === 'string' ? req.data.username : '',\n      }\n    : {\n        email: typeof req.data?.email === 'string' ? req.data.email : '',\n      }\n\n  await forgotPasswordOperation({\n    collection,\n    data: authData,\n    disableEmail: Boolean(req.data?.disableEmail),\n    expiration: typeof req.data.expiration === 'number' ? req.data.expiration : undefined,\n    req,\n  })\n\n  return Response.json(\n    {\n      message: t('general:success'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","forgotPasswordOperation","headersWithCors","forgotPassword","collection","req","t","authData","config","auth","loginWithUsername","email","data","username","disableEmail","Boolean","expiration","undefined","Response","json","message","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASE,eAAe,QAAQ;AAJhC,SAASD,uBAAuB,QAAQ;;;;AAMjC,MAAME,cAAA,GAAyC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IAC9E,MAAM,EAAEC,CAAAA,EAAG,GAAGD,GAAA;IACd,MAAME,QAAA,GAAWH,UAAA,CAAWI,MAAM,CAACC,IAAI,EAAEC,iBAAA,GACrC;QACEC,KAAA,EAAO,OAAON,GAAA,CAAIO,IAAI,EAAED,KAAA,KAAU,WAAWN,GAAA,CAAIO,IAAI,CAACD,KAAK,GAAG;QAC9DE,QAAA,EAAU,OAAOR,GAAA,CAAIO,IAAI,EAAEC,QAAA,KAAa,WAAWR,GAAA,CAAIO,IAAI,CAACC,QAAQ,GAAG;IACzE,IACA;QACEF,KAAA,EAAO,OAAON,GAAA,CAAIO,IAAI,EAAED,KAAA,KAAU,WAAWN,GAAA,CAAIO,IAAI,CAACD,KAAK,GAAG;IAChE;IAEJ,oLAAMV,0BAAAA,AAAA,EAAwB;QAC5BG,UAAA;QACAQ,IAAA,EAAML,QAAA;QACNO,YAAA,EAAcC,OAAA,CAAQV,GAAA,CAAIO,IAAI,EAAEE,YAAA;QAChCE,UAAA,EAAY,OAAOX,GAAA,CAAIO,IAAI,CAACI,UAAU,KAAK,WAAWX,GAAA,CAAIO,IAAI,CAACI,UAAU,GAAGC,SAAA;QAC5EZ;IACF;IAEA,OAAOa,QAAA,CAASC,IAAI,CAClB;QACEC,OAAA,EAASd,CAAA,CAAE;IACb,GACA;QACEe,OAAA,qLAASnB,kBAAAA,AAAA,EAAgB;YACvBmB,OAAA,EAAS,IAAIC,OAAA;YACbjB;QACF;QACAkB,MAAA,mJAAQvB,UAAA,CAAWwB,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 1411, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1417, "column": 0}, "map": {"version":3,"file":"init.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/init.ts"],"sourcesContent":["import { initOperation } from 'payload'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const init: CollectionRouteHandler = async ({ collection, req }) => {\n  const initialized = await initOperation({\n    collection: collection.config.slug,\n    req,\n  })\n\n  return Response.json(\n    { initialized },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n    },\n  )\n}\n"],"names":["initOperation","headersWithCors","init","collection","req","initialized","config","slug","Response","json","headers","Headers"],"mappings":";;;AAIA,SAASC,eAAe,QAAQ;AAJhC,SAASD,aAAa,QAAQ;;;AAMvB,MAAME,IAAA,GAA+B,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACpE,MAAMC,WAAA,GAAc,0KAAML,gBAAAA,AAAA,EAAc;QACtCG,UAAA,EAAYA,UAAA,CAAWG,MAAM,CAACC,IAAI;QAClCH;IACF;IAEA,OAAOI,QAAA,CAASC,IAAI,CAClB;QAAEJ;IAAY,GACd;QACEK,OAAA,qLAAST,kBAAAA,AAAA,EAAgB;YACvBS,OAAA,EAAS,IAAIC,OAAA;YACbP;QACF;IACF;AAEJ"}},
    {"offset": {"line": 1438, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1444, "column": 0}, "map": {"version":3,"file":"login.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/login.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { generatePayloadCookie, loginOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const login: CollectionRouteHandler = async ({ collection, req }) => {\n  const { searchParams, t } = req\n  const depth = searchParams.get('depth')\n  const authData =\n    collection.config.auth?.loginWithUsername !== false\n      ? {\n          email: typeof req.data?.email === 'string' ? req.data.email : '',\n          password: typeof req.data?.password === 'string' ? req.data.password : '',\n          username: typeof req.data?.username === 'string' ? req.data.username : '',\n        }\n      : {\n          email: typeof req.data?.email === 'string' ? req.data.email : '',\n          password: typeof req.data?.password === 'string' ? req.data.password : '',\n        }\n\n  const result = await loginOperation({\n    collection,\n    data: authData,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    req,\n  })\n\n  const cookie = generatePayloadCookie({\n    collectionAuthConfig: collection.config.auth,\n    cookiePrefix: req.payload.config.cookiePrefix,\n    token: result.token,\n  })\n\n  if (collection.config.auth.removeTokenFromResponses) {\n    delete result.token\n  }\n\n  return Response.json(\n    {\n      message: t('authentication:passed'),\n      ...result,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers({\n          'Set-Cookie': cookie,\n        }),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","generatePayloadCookie","loginOperation","isNumber","headersWithCors","login","collection","req","searchParams","t","depth","get","authData","config","auth","loginWithUsername","email","data","password","username","result","Number","undefined","cookie","collectionAuthConfig","cookiePrefix","payload","token","removeTokenFromResponses","Response","json","message","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASI,eAAe,QAAQ;AALhC,SAASH,qBAAqB,EAAEC,cAAc,QAAQ;AACtD,SAASC,QAAQ,QAAQ;;;;;;AAMlB,MAAME,KAAA,GAAgC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACrE,MAAM,EAAEC,YAAY,EAAEC,CAAAA,EAAG,GAAGF,GAAA;IAC5B,MAAMG,KAAA,GAAQF,YAAA,CAAaG,GAAG,CAAC;IAC/B,MAAMC,QAAA,GACJN,UAAA,CAAWO,MAAM,CAACC,IAAI,EAAEC,iBAAA,KAAsB,QAC1C;QACEC,KAAA,EAAO,OAAOT,GAAA,CAAIU,IAAI,EAAED,KAAA,KAAU,WAAWT,GAAA,CAAIU,IAAI,CAACD,KAAK,GAAG;QAC9DE,QAAA,EAAU,OAAOX,GAAA,CAAIU,IAAI,EAAEC,QAAA,KAAa,WAAWX,GAAA,CAAIU,IAAI,CAACC,QAAQ,GAAG;QACvEC,QAAA,EAAU,OAAOZ,GAAA,CAAIU,IAAI,EAAEE,QAAA,KAAa,WAAWZ,GAAA,CAAIU,IAAI,CAACE,QAAQ,GAAG;IACzE,IACA;QACEH,KAAA,EAAO,OAAOT,GAAA,CAAIU,IAAI,EAAED,KAAA,KAAU,WAAWT,GAAA,CAAIU,IAAI,CAACD,KAAK,GAAG;QAC9DE,QAAA,EAAU,OAAOX,GAAA,CAAIU,IAAI,EAAEC,QAAA,KAAa,WAAWX,GAAA,CAAIU,IAAI,CAACC,QAAQ,GAAG;IACzE;IAEN,MAAME,MAAA,GAAS,2KAAMlB,iBAAAA,AAAA,EAAe;QAClCI,UAAA;QACAW,IAAA,EAAML,QAAA;QACNF,KAAA,EAAOP,0KAAAA,AAAA,EAASO,KAAA,IAASW,MAAA,CAAOX,KAAA,IAASY,SAAA;QACzCf;IACF;IAEA,MAAMgB,MAAA,4JAAStB,wBAAAA,AAAA,EAAsB;QACnCuB,oBAAA,EAAsBlB,UAAA,CAAWO,MAAM,CAACC,IAAI;QAC5CW,YAAA,EAAclB,GAAA,CAAImB,OAAO,CAACb,MAAM,CAACY,YAAY;QAC7CE,KAAA,EAAOP,MAAA,CAAOO,KAAAA;IAChB;IAEA,IAAIrB,UAAA,CAAWO,MAAM,CAACC,IAAI,CAACc,wBAAwB,EAAE;QACnD,OAAOR,MAAA,CAAOO,KAAK;IACrB;IAEA,OAAOE,QAAA,CAASC,IAAI,CAClB;QACEC,OAAA,EAAStB,CAAA,CAAE;QACX,GAAGW,MAAAA;IACL,GACA;QACEY,OAAA,qLAAS5B,kBAAAA,AAAA,EAAgB;YACvB4B,OAAA,EAAS,IAAIC,OAAA,CAAQ;gBACnB,cAAcV;YAChB;YACAhB;QACF;QACA2B,MAAA,mJAAQlC,UAAA,CAAWmC,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 1494, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1500, "column": 0}, "map": {"version":3,"file":"logout.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/logout.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { generateExpiredPayloadCookie, logoutOperation } from 'payload'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const logout: CollectionRouteHandler = async ({ collection, req }) => {\n  const { t } = req\n  const result = await logoutOperation({\n    collection,\n    req,\n  })\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  if (!result) {\n    return Response.json(\n      {\n        message: t('error:logoutFailed'),\n      },\n      {\n        headers,\n        status: httpStatus.BAD_REQUEST,\n      },\n    )\n  }\n\n  const expiredCookie = generateExpiredPayloadCookie({\n    collectionAuthConfig: collection.config.auth,\n    config: req.payload.config,\n    cookiePrefix: req.payload.config.cookiePrefix,\n  })\n\n  headers.set('Set-Cookie', expiredCookie)\n\n  return Response.json(\n    {\n      message: t('authentication:logoutSuccessful'),\n    },\n    {\n      headers,\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","generateExpiredPayloadCookie","logoutOperation","headersWithCors","logout","collection","req","t","result","headers","Headers","Response","json","message","status","BAD_REQUEST","expiredCookie","collectionAuthConfig","config","auth","payload","cookiePrefix","set","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASG,eAAe,QAAQ;AAJhC,SAASF,4BAA4B,EAAEC,eAAe,QAAQ;;;;;AAMvD,MAAME,MAAA,GAAiC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACtE,MAAM,EAAEC,CAAAA,EAAG,GAAGD,GAAA;IACd,MAAME,MAAA,GAAS,UAAMN,oLAAAA,AAAA,EAAgB;QACnCG,UAAA;QACAC;IACF;IAEA,MAAMG,OAAA,sLAAUN,kBAAAA,AAAA,EAAgB;QAC9BM,OAAA,EAAS,IAAIC,OAAA;QACbJ;IACF;IAEA,IAAI,CAACE,MAAA,EAAQ;QACX,OAAOG,QAAA,CAASC,IAAI,CAClB;YACEC,OAAA,EAASN,CAAA,CAAE;QACb,GACA;YACEE,OAAA;YACAK,MAAA,mJAAQd,UAAA,CAAWe,WAAAA;QACrB;IAEJ;IAEA,MAAMC,aAAA,4JAAgBf,+BAAAA,AAAA,EAA6B;QACjDgB,oBAAA,EAAsBZ,UAAA,CAAWa,MAAM,CAACC,IAAI;QAC5CD,MAAA,EAAQZ,GAAA,CAAIc,OAAO,CAACF,MAAM;QAC1BG,YAAA,EAAcf,GAAA,CAAIc,OAAO,CAACF,MAAM,CAACG,YAAAA;IACnC;IAEAZ,OAAA,CAAQa,GAAG,CAAC,cAAcN,aAAA;IAE1B,OAAOL,QAAA,CAASC,IAAI,CAClB;QACEC,OAAA,EAASN,CAAA,CAAE;IACb,GACA;QACEE,OAAA;QACAK,MAAA,mJAAQd,UAAA,CAAWuB,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 1541, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1547, "column": 0}, "map": {"version":3,"file":"me.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/me.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { extractJWT, meOperation } from 'payload'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const me: CollectionRouteHandler = async ({ collection, req }) => {\n  const currentToken = extractJWT(req)\n\n  const result = await meOperation({\n    collection,\n    currentToken,\n    req,\n  })\n\n  if (collection.config.auth.removeTokenFromResponses) {\n    delete result.token\n  }\n\n  return Response.json(\n    {\n      ...result,\n      message: req.t('authentication:account'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","extractJWT","meOperation","headersWithCors","me","collection","req","currentToken","result","config","auth","removeTokenFromResponses","token","Response","json","message","t","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASG,eAAe,QAAQ;;AAJhC,SAASF,UAAU,EAAEC,WAAW,QAAQ;;;;AAMjC,MAAME,EAAA,GAA6B,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IAClE,MAAMC,YAAA,+JAAeN,aAAAA,AAAA,EAAWK,GAAA;IAEhC,MAAME,MAAA,GAAS,MAAMN,gLAAAA,AAAA,EAAY;QAC/BG,UAAA;QACAE,YAAA;QACAD;IACF;IAEA,IAAID,UAAA,CAAWI,MAAM,CAACC,IAAI,CAACC,wBAAwB,EAAE;QACnD,OAAOH,MAAA,CAAOI,KAAK;IACrB;IAEA,OAAOC,QAAA,CAASC,IAAI,CAClB;QACE,GAAGN,MAAM;QACTO,OAAA,EAAST,GAAA,CAAIU,CAAC,CAAC;IACjB,GACA;QACEC,OAAA,qLAASd,kBAAAA,AAAA,EAAgB;YACvBc,OAAA,EAAS,IAAIC,OAAA;YACbZ;QACF;QACAa,MAAA,mJAAQnB,UAAA,CAAWoB,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 1578, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1584, "column": 0}, "map": {"version":3,"file":"refresh.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/refresh.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { generatePayloadCookie, refreshOperation } from 'payload'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const refresh: CollectionRouteHandler = async ({ collection, req }) => {\n  const { t } = req\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  const result = await refreshOperation({\n    collection,\n    req,\n  })\n\n  if (result.setCookie) {\n    const cookie = generatePayloadCookie({\n      collectionAuthConfig: collection.config.auth,\n      cookiePrefix: req.payload.config.cookiePrefix,\n      token: result.refreshedToken,\n    })\n\n    if (collection.config.auth.removeTokenFromResponses) {\n      delete result.refreshedToken\n    }\n\n    headers.set('Set-Cookie', cookie)\n  }\n\n  return Response.json(\n    {\n      message: t('authentication:tokenRefreshSuccessful'),\n      ...result,\n    },\n    {\n      headers,\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","generatePayloadCookie","refreshOperation","headersWithCors","refresh","collection","req","t","headers","Headers","result","setCookie","cookie","collectionAuthConfig","config","auth","cookiePrefix","payload","token","refreshedToken","removeTokenFromResponses","set","Response","json","message","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASG,eAAe,QAAQ;AAJhC,SAASF,qBAAqB,EAAEC,gBAAgB,QAAQ;;;;;AAMjD,MAAME,OAAA,GAAkC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACvE,MAAM,EAAEC,CAAAA,EAAG,GAAGD,GAAA;IAEd,MAAME,OAAA,sLAAUL,kBAAAA,AAAA,EAAgB;QAC9BK,OAAA,EAAS,IAAIC,OAAA;QACbH;IACF;IAEA,MAAMI,MAAA,GAAS,OAAMR,yLAAAA,AAAA,EAAiB;QACpCG,UAAA;QACAC;IACF;IAEA,IAAII,MAAA,CAAOC,SAAS,EAAE;QACpB,MAAMC,MAAA,4JAASX,wBAAAA,AAAA,EAAsB;YACnCY,oBAAA,EAAsBR,UAAA,CAAWS,MAAM,CAACC,IAAI;YAC5CC,YAAA,EAAcV,GAAA,CAAIW,OAAO,CAACH,MAAM,CAACE,YAAY;YAC7CE,KAAA,EAAOR,MAAA,CAAOS,cAAAA;QAChB;QAEA,IAAId,UAAA,CAAWS,MAAM,CAACC,IAAI,CAACK,wBAAwB,EAAE;YACnD,OAAOV,MAAA,CAAOS,cAAc;QAC9B;QAEAX,OAAA,CAAQa,GAAG,CAAC,cAAcT,MAAA;IAC5B;IAEA,OAAOU,QAAA,CAASC,IAAI,CAClB;QACEC,OAAA,EAASjB,CAAA,CAAE;QACX,GAAGG,MAAAA;IACL,GACA;QACEF,OAAA;QACAiB,MAAA,mJAAQzB,UAAA,CAAW0B,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 1623, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1629, "column": 0}, "map": {"version":3,"file":"registerFirstUser.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/registerFirstUser.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { generatePayloadCookie, registerFirstUserOperation } from 'payload'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const registerFirstUser: CollectionRouteHandler = async ({ collection, req }) => {\n  const { data, t } = req\n  const authData = collection.config.auth?.loginWithUsername\n    ? {\n        email: typeof req.data?.email === 'string' ? req.data.email : '',\n        password: typeof req.data?.password === 'string' ? req.data.password : '',\n        username: typeof req.data?.username === 'string' ? req.data.username : '',\n      }\n    : {\n        email: typeof req.data?.email === 'string' ? req.data.email : '',\n        password: typeof req.data?.password === 'string' ? req.data.password : '',\n      }\n\n  const result = await registerFirstUserOperation({\n    collection,\n    data: {\n      ...data,\n      ...authData,\n    },\n    req,\n  })\n\n  const cookie = generatePayloadCookie({\n    collectionAuthConfig: collection.config.auth,\n    cookiePrefix: req.payload.config.cookiePrefix,\n    token: result.token,\n  })\n\n  return Response.json(\n    {\n      exp: result.exp,\n      message: t('authentication:successfullyRegisteredFirstUser'),\n      token: result.token,\n      user: result.user,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers({\n          'Set-Cookie': cookie,\n        }),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","generatePayloadCookie","registerFirstUserOperation","headersWithCors","registerFirstUser","collection","req","data","t","authData","config","auth","loginWithUsername","email","password","username","result","cookie","collectionAuthConfig","cookiePrefix","payload","token","Response","json","exp","message","user","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASG,eAAe,QAAQ;AAJhC,SAASF,qBAAqB,EAAEC,0BAA0B,QAAQ;;;;;AAM3D,MAAME,iBAAA,GAA4C,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACjF,MAAM,EAAEC,IAAI,EAAEC,CAAAA,EAAG,GAAGF,GAAA;IACpB,MAAMG,QAAA,GAAWJ,UAAA,CAAWK,MAAM,CAACC,IAAI,EAAEC,iBAAA,GACrC;QACEC,KAAA,EAAO,OAAOP,GAAA,CAAIC,IAAI,EAAEM,KAAA,KAAU,WAAWP,GAAA,CAAIC,IAAI,CAACM,KAAK,GAAG;QAC9DC,QAAA,EAAU,OAAOR,GAAA,CAAIC,IAAI,EAAEO,QAAA,KAAa,WAAWR,GAAA,CAAIC,IAAI,CAACO,QAAQ,GAAG;QACvEC,QAAA,EAAU,OAAOT,GAAA,CAAIC,IAAI,EAAEQ,QAAA,KAAa,WAAWT,GAAA,CAAIC,IAAI,CAACQ,QAAQ,GAAG;IACzE,IACA;QACEF,KAAA,EAAO,OAAOP,GAAA,CAAIC,IAAI,EAAEM,KAAA,KAAU,WAAWP,GAAA,CAAIC,IAAI,CAACM,KAAK,GAAG;QAC9DC,QAAA,EAAU,OAAOR,GAAA,CAAIC,IAAI,EAAEO,QAAA,KAAa,WAAWR,GAAA,CAAIC,IAAI,CAACO,QAAQ,GAAG;IACzE;IAEJ,MAAME,MAAA,GAAS,uLAAMd,6BAAAA,AAAA,EAA2B;QAC9CG,UAAA;QACAE,IAAA,EAAM;YACJ,GAAGA,IAAI;YACP,GAAGE,QAAAA;QACL;QACAH;IACF;IAEA,MAAMW,MAAA,4JAAShB,wBAAAA,AAAA,EAAsB;QACnCiB,oBAAA,EAAsBb,UAAA,CAAWK,MAAM,CAACC,IAAI;QAC5CQ,YAAA,EAAcb,GAAA,CAAIc,OAAO,CAACV,MAAM,CAACS,YAAY;QAC7CE,KAAA,EAAOL,MAAA,CAAOK,KAAAA;IAChB;IAEA,OAAOC,QAAA,CAASC,IAAI,CAClB;QACEC,GAAA,EAAKR,MAAA,CAAOQ,GAAG;QACfC,OAAA,EAASjB,CAAA,CAAE;QACXa,KAAA,EAAOL,MAAA,CAAOK,KAAK;QACnBK,IAAA,EAAMV,MAAA,CAAOU,IAAAA;IACf,GACA;QACEC,OAAA,qLAASxB,kBAAAA,AAAA,EAAgB;YACvBwB,OAAA,EAAS,IAAIC,OAAA,CAAQ;gBACnB,cAAcX;YAChB;YACAX;QACF;QACAuB,MAAA,mJAAQ7B,UAAA,CAAW8B,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 1677, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1683, "column": 0}, "map": {"version":3,"file":"resetPassword.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/resetPassword.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { generatePayloadCookie, resetPasswordOperation } from 'payload'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const resetPassword: CollectionRouteHandler = async ({ collection, req }) => {\n  const { searchParams, t } = req\n  const depth = searchParams.get('depth')\n\n  const result = await resetPasswordOperation({\n    collection,\n    data: {\n      password: typeof req.data?.password === 'string' ? req.data.password : '',\n      token: typeof req.data?.token === 'string' ? req.data.token : '',\n    },\n    depth: depth ? Number(depth) : undefined,\n    req,\n  })\n\n  const cookie = generatePayloadCookie({\n    collectionAuthConfig: collection.config.auth,\n    cookiePrefix: req.payload.config.cookiePrefix,\n    token: result.token,\n  })\n\n  if (collection.config.auth.removeTokenFromResponses) {\n    delete result.token\n  }\n\n  return Response.json(\n    {\n      message: t('authentication:passwordResetSuccessfully'),\n      ...result,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers({\n          'Set-Cookie': cookie,\n        }),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","generatePayloadCookie","resetPasswordOperation","headersWithCors","resetPassword","collection","req","searchParams","t","depth","get","result","data","password","token","Number","undefined","cookie","collectionAuthConfig","config","auth","cookiePrefix","payload","removeTokenFromResponses","Response","json","message","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASG,eAAe,QAAQ;AAJhC,SAASF,qBAAqB,EAAEC,sBAAsB,QAAQ;;;;;AAMvD,MAAME,aAAA,GAAwC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IAC7E,MAAM,EAAEC,YAAY,EAAEC,CAAAA,EAAG,GAAGF,GAAA;IAC5B,MAAMG,KAAA,GAAQF,YAAA,CAAaG,GAAG,CAAC;IAE/B,MAAMC,MAAA,GAAS,mLAAMT,yBAAAA,AAAA,EAAuB;QAC1CG,UAAA;QACAO,IAAA,EAAM;YACJC,QAAA,EAAU,OAAOP,GAAA,CAAIM,IAAI,EAAEC,QAAA,KAAa,WAAWP,GAAA,CAAIM,IAAI,CAACC,QAAQ,GAAG;YACvEC,KAAA,EAAO,OAAOR,GAAA,CAAIM,IAAI,EAAEE,KAAA,KAAU,WAAWR,GAAA,CAAIM,IAAI,CAACE,KAAK,GAAG;QAChE;QACAL,KAAA,EAAOA,KAAA,GAAQM,MAAA,CAAON,KAAA,IAASO,SAAA;QAC/BV;IACF;IAEA,MAAMW,MAAA,4JAAShB,wBAAAA,AAAA,EAAsB;QACnCiB,oBAAA,EAAsBb,UAAA,CAAWc,MAAM,CAACC,IAAI;QAC5CC,YAAA,EAAcf,GAAA,CAAIgB,OAAO,CAACH,MAAM,CAACE,YAAY;QAC7CP,KAAA,EAAOH,MAAA,CAAOG,KAAAA;IAChB;IAEA,IAAIT,UAAA,CAAWc,MAAM,CAACC,IAAI,CAACG,wBAAwB,EAAE;QACnD,OAAOZ,MAAA,CAAOG,KAAK;IACrB;IAEA,OAAOU,QAAA,CAASC,IAAI,CAClB;QACEC,OAAA,EAASlB,CAAA,CAAE;QACX,GAAGG,MAAAA;IACL,GACA;QACEgB,OAAA,qLAASxB,kBAAA,AAAAA,EAAgB;YACvBwB,OAAA,EAAS,IAAIC,OAAA,CAAQ;gBACnB,cAAcX;YAChB;YACAX;QACF;QACAuB,MAAA,mJAAQ7B,UAAA,CAAW8B,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 1726, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1732, "column": 0}, "map": {"version":3,"file":"unlock.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/unlock.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { unlockOperation } from 'payload'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const unlock: CollectionRouteHandler = async ({ collection, req }) => {\n  const { t } = req\n\n  const authData =\n    collection.config.auth?.loginWithUsername !== false\n      ? {\n          email: typeof req.data?.email === 'string' ? req.data.email : '',\n          username: typeof req.data?.username === 'string' ? req.data.username : '',\n        }\n      : {\n          email: typeof req.data?.email === 'string' ? req.data.email : '',\n        }\n\n  await unlockOperation({\n    collection,\n    data: authData,\n    req,\n  })\n\n  return Response.json(\n    {\n      message: t('general:success'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","unlockOperation","headersWithCors","unlock","collection","req","t","authData","config","auth","loginWithUsername","email","data","username","Response","json","message","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASE,eAAe,QAAQ;AAJhC,SAASD,eAAe,QAAQ;;;;AAMzB,MAAME,MAAA,GAAiC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACtE,MAAM,EAAEC,CAAAA,EAAG,GAAGD,GAAA;IAEd,MAAME,QAAA,GACJH,UAAA,CAAWI,MAAM,CAACC,IAAI,EAAEC,iBAAA,KAAsB,QAC1C;QACEC,KAAA,EAAO,OAAON,GAAA,CAAIO,IAAI,EAAED,KAAA,KAAU,WAAWN,GAAA,CAAIO,IAAI,CAACD,KAAK,GAAG;QAC9DE,QAAA,EAAU,OAAOR,GAAA,CAAIO,IAAI,EAAEC,QAAA,KAAa,WAAWR,GAAA,CAAIO,IAAI,CAACC,QAAQ,GAAG;IACzE,IACA;QACEF,KAAA,EAAO,OAAON,GAAA,CAAIO,IAAI,EAAED,KAAA,KAAU,WAAWN,GAAA,CAAIO,IAAI,CAACD,KAAK,GAAG;IAChE;IAEN,4KAAMV,kBAAAA,AAAA,EAAgB;QACpBG,UAAA;QACAQ,IAAA,EAAML,QAAA;QACNF;IACF;IAEA,OAAOS,QAAA,CAASC,IAAI,CAClB;QACEC,OAAA,EAASV,CAAA,CAAE;IACb,GACA;QACEW,OAAA,qLAASf,kBAAAA,AAAA,EAAgB;YACvBe,OAAA,EAAS,IAAIC,OAAA;YACbb;QACF;QACAc,MAAA,mJAAQnB,UAAA,CAAWoB,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 1764, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1770, "column": 0}, "map": {"version":3,"file":"verifyEmail.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/auth/verifyEmail.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { verifyEmailOperation } from 'payload'\n\nimport type { CollectionRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const verifyEmail: CollectionRouteHandlerWithID = async ({ id, collection, req }) => {\n  const { t } = req\n  await verifyEmailOperation({\n    collection,\n    req,\n    token: id,\n  })\n\n  return Response.json(\n    {\n      message: t('authentication:accountVerified'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","verifyEmailOperation","headersWithCors","verifyEmail","id","collection","req","t","token","Response","json","message","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASE,eAAe,QAAQ;AAJhC,SAASD,oBAAoB,QAAQ;;;;AAM9B,MAAME,WAAA,GAA4C,MAAAA,CAAO,EAAEC,EAAE,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACrF,MAAM,EAAEC,CAAAA,EAAG,GAAGD,GAAA;IACd,iLAAML,uBAAAA,AAAA,EAAqB;QACzBI,UAAA;QACAC,GAAA;QACAE,KAAA,EAAOJ;IACT;IAEA,OAAOK,QAAA,CAASC,IAAI,CAClB;QACEC,OAAA,EAASJ,CAAA,CAAE;IACb,GACA;QACEK,OAAA,qLAASV,kBAAAA,AAAA,EAAgB;YACvBU,OAAA,EAAS,IAAIC,OAAA;YACbP;QACF;QACAQ,MAAA,mJAAQd,UAAA,CAAWe,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 1796, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1802, "column": 0}, "map": {"version":3,"file":"routeError.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/routeError.ts"],"sourcesContent":["import type { Collection, ErrorResult, PayloadRequest, SanitizedConfig } from 'payload'\n\nimport httpStatus from 'http-status'\nimport { APIError, APIErrorName, ValidationErrorName } from 'payload'\n\nimport { getPayloadHMR } from '../../utilities/getPayloadHMR.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { mergeHeaders } from '../../utilities/mergeHeaders.js'\n\nconst formatErrors = (incoming: { [key: string]: unknown } | APIError): ErrorResult => {\n  if (incoming) {\n    // Cannot use `instanceof` to check error type: https://github.com/microsoft/TypeScript/issues/13965\n    // Instead, get the prototype of the incoming error and check its constructor name\n    const proto = Object.getPrototypeOf(incoming)\n\n    // Payload 'ValidationError' and 'APIError'\n    if (\n      (proto.constructor.name === ValidationErrorName || proto.constructor.name === APIErrorName) &&\n      incoming.data\n    ) {\n      return {\n        errors: [\n          {\n            name: incoming.name,\n            data: incoming.data,\n            message: incoming.message,\n          },\n        ],\n      }\n    }\n\n    // Mongoose 'ValidationError': https://mongoosejs.com/docs/api/error.html#Error.ValidationError\n    if (proto.constructor.name === ValidationErrorName && 'errors' in incoming && incoming.errors) {\n      return {\n        errors: Object.keys(incoming.errors).reduce((acc, key) => {\n          acc.push({\n            field: incoming.errors[key].path,\n            message: incoming.errors[key].message,\n          })\n          return acc\n        }, []),\n      }\n    }\n\n    if (Array.isArray(incoming.message)) {\n      return {\n        errors: incoming.message,\n      }\n    }\n\n    if (incoming.name) {\n      return {\n        errors: [\n          {\n            message: incoming.message,\n          },\n        ],\n      }\n    }\n  }\n\n  return {\n    errors: [\n      {\n        message: 'An unknown error occurred.',\n      },\n    ],\n  }\n}\n\nexport const routeError = async ({\n  collection,\n  config: configArg,\n  err,\n  req: incomingReq,\n}: {\n  collection?: Collection\n  config: Promise<SanitizedConfig> | SanitizedConfig\n  err: APIError\n  req: PayloadRequest | Request\n}) => {\n  let payload = 'payload' in incomingReq && incomingReq?.payload\n\n  if (!payload) {\n    try {\n      payload = await getPayloadHMR({ config: configArg })\n    } catch (e) {\n      return Response.json(\n        {\n          message: 'There was an error initializing Payload',\n        },\n        { status: httpStatus.INTERNAL_SERVER_ERROR },\n      )\n    }\n  }\n\n  const req = incomingReq as PayloadRequest\n\n  req.payload = payload\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  const { config, logger } = payload\n\n  let response = formatErrors(err)\n\n  let status = err.status || httpStatus.INTERNAL_SERVER_ERROR\n\n  logger.error(err.stack)\n\n  // Internal server errors can contain anything, including potentially sensitive data.\n  // Therefore, error details will be hidden from the response unless `config.debug` is `true`\n  if (!config.debug && status === httpStatus.INTERNAL_SERVER_ERROR) {\n    response = formatErrors(new APIError('Something went wrong.'))\n  }\n\n  if (config.debug && config.debug === true) {\n    response.stack = err.stack\n  }\n\n  if (collection) {\n    await collection.config.hooks.afterError?.reduce(async (promise, hook) => {\n      await promise\n\n      const result = await hook({\n        collection: collection.config,\n        context: req.context,\n        error: err,\n        req,\n        result: response,\n      })\n\n      if (result) {\n        response = (result.response as ErrorResult) || response\n        status = result.status || status\n      }\n    }, Promise.resolve())\n  }\n\n  await config.hooks.afterError?.reduce(async (promise, hook) => {\n    await promise\n\n    const result = await hook({\n      collection: collection?.config,\n      context: req.context,\n      error: err,\n      req,\n      result: response,\n    })\n\n    if (result) {\n      response = (result.response as ErrorResult) || response\n      status = result.status || status\n    }\n  }, Promise.resolve())\n\n  return Response.json(response, {\n    headers: req.responseHeaders ? mergeHeaders(req.responseHeaders, headers) : headers,\n    status,\n  })\n}\n"],"names":["httpStatus","APIError","APIErrorName","ValidationErrorName","getPayloadHMR","headersWithCors","mergeHeaders","formatErrors","incoming","proto","Object","getPrototypeOf","constructor","name","data","errors","message","keys","reduce","acc","key","push","field","path","Array","isArray","routeError","collection","config","configArg","err","req","incomingReq","payload","e","Response","json","status","INTERNAL_SERVER_ERROR","headers","Headers","logger","response","error","stack","debug","hooks","afterError","promise","hook","result","context","Promise","resolve","responseHeaders"],"mappings":"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"}},
    {"offset": {"line": 1936, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1942, "column": 0}, "map": {"version":3,"file":"buildFormState.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/buildFormState.ts"],"sourcesContent":["import type { PayloadRequest } from 'payload'\n\nimport { buildFormState as buildFormStateFn } from '@payloadcms/ui/utilities/buildFormState'\nimport httpStatus from 'http-status'\n\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { routeError } from './routeError.js'\n\nexport const buildFormState = async ({ req }: { req: PayloadRequest }) => {\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  try {\n    const result = await buildFormStateFn({ req })\n\n    return Response.json(result, {\n      headers,\n      status: httpStatus.OK,\n    })\n  } catch (err) {\n    req.payload.logger.error({ err, msg: `There was an error building form state` })\n\n    if (err.message === 'Could not find field schema for given path') {\n      return Response.json(\n        {\n          message: err.message,\n        },\n        {\n          headers,\n          status: httpStatus.BAD_REQUEST,\n        },\n      )\n    }\n\n    if (err.message === 'Unauthorized') {\n      return Response.json(null, {\n        headers,\n        status: httpStatus.UNAUTHORIZED,\n      })\n    }\n\n    return routeError({\n      config: req.payload.config,\n      err,\n      req,\n    })\n  }\n}\n"],"names":["buildFormState","buildFormStateFn","httpStatus","headersWithCors","routeError","req","headers","Headers","result","Response","json","status","OK","err","payload","logger","error","msg","message","BAD_REQUEST","UNAUTHORIZED","config"],"mappings":";;;AAGA,OAAOE,UAAA,MAAgB;AAEvB,SAASC,eAAe,QAAQ;AAChC,SAASC,UAAU,QAAQ;AAJ3B,SAASJ,cAAA,IAAkBC,gBAAgB,QAAQ;;;;;AAM5C,MAAMD,cAAA,GAAiB,MAAAA,CAAO,EAAEK,GAAAA,EAA8B;IACnE,MAAMC,OAAA,sLAAUH,kBAAAA,AAAA,EAAgB;QAC9BG,OAAA,EAAS,IAAIC,OAAA;QACbF;IACF;IAEA,IAAI;QACF,MAAMG,MAAA,GAAS,sLAAMP,iBAAA,AAAAA,EAAiB;YAAEI;QAAI;QAE5C,OAAOI,QAAA,CAASC,IAAI,CAACF,MAAA,EAAQ;YAC3BF,OAAA;YACAK,MAAA,mJAAQT,UAAA,CAAWU,EAAAA;QACrB;IACF,EAAE,OAAOC,GAAA,EAAK;QACZR,GAAA,CAAIS,OAAO,CAACC,MAAM,CAACC,KAAK,CAAC;YAAEH,GAAA;YAAKI,GAAA,EAAK,CAAA,sCAAA,CAAA;QAAyC;QAE9E,IAAIJ,GAAA,CAAIK,OAAO,KAAK,8CAA8C;YAChE,OAAOT,QAAA,CAASC,IAAI,CAClB;gBACEQ,OAAA,EAASL,GAAA,CAAIK,OAAAA;YACf,GACA;gBACEZ,OAAA;gBACAK,MAAA,mJAAQT,UAAA,CAAWiB,WAAAA;YACrB;QAEJ;QAEA,IAAIN,GAAA,CAAIK,OAAO,KAAK,gBAAgB;YAClC,OAAOT,QAAA,CAASC,IAAI,CAAC,MAAM;gBACzBJ,OAAA;gBACAK,MAAA,mJAAQT,UAAA,CAAWkB,YAAAA;YACrB;QACF;QAEA,0LAAOhB,aAAAA,AAAA,EAAW;YAChBiB,MAAA,EAAQhB,GAAA,CAAIS,OAAO,CAACO,MAAM;YAC1BR,GAAA;YACAR;QACF;IACF;AACF"}},
    {"offset": {"line": 1992, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1998, "column": 0}, "map": {"version":3,"file":"checkEndpoints.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/checkEndpoints.ts"],"sourcesContent":["import httpStatus from 'http-status'\n\nexport const endpointsAreDisabled = ({\n  endpoints,\n  request,\n}: {\n  endpoints: false | unknown[]\n  request: Partial<Request>\n}) => {\n  if (!endpoints) {\n    return Response.json(\n      {\n        message: `Cannot ${request.method.toUpperCase()} ${request.url}`,\n      },\n      {\n        status: httpStatus.NOT_IMPLEMENTED,\n      },\n    )\n  }\n}\n"],"names":["httpStatus","endpointsAreDisabled","endpoints","request","Response","json","message","method","toUpperCase","url","status","NOT_IMPLEMENTED"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;;AAEhB,MAAMC,oBAAA,GAAuBA,CAAC,EACnCC,SAAS,EACTC,OAAAA,EAID;IACC,IAAI,CAACD,SAAA,EAAW;QACd,OAAOE,QAAA,CAASC,IAAI,CAClB;YACEC,OAAA,EAAS,CAAA,OAAA,EAAUH,OAAA,CAAQI,MAAM,CAACC,WAAW,GAAA,CAAA,EAAML,OAAA,CAAQM,GAAG,EAAA;QAChE,GACA;YACEC,MAAA,mJAAQV,UAAA,CAAWW,eAAAA;QACrB;IAEJ;AACF"}},
    {"offset": {"line": 2012, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2018, "column": 0}, "map": {"version":3,"file":"count.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/count.ts"],"sourcesContent":["import type { Where } from 'payload'\n\nimport httpStatus from 'http-status'\nimport { countOperation } from 'payload'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nexport const count: CollectionRouteHandler = async ({ collection, req }) => {\n  const { where } = req.query as {\n    where?: Where\n  }\n\n  const result = await countOperation({\n    collection,\n    req,\n    where,\n  })\n\n  return Response.json(result, {\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","countOperation","count","collection","req","where","query","result","Response","json","status","OK"],"mappings":";;;AAEA,OAAOA,UAAA,MAAgB;AACvB,SAASC,cAAc,QAAQ;;;AAIxB,MAAMC,KAAA,GAAgC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACrE,MAAM,EAAEC,KAAAA,EAAO,GAAGD,GAAA,CAAIE,KAAK;IAI3B,MAAMC,MAAA,GAAS,kLAAMN,iBAAAA,AAAA,EAAe;QAClCE,UAAA;QACAC,GAAA;QACAC;IACF;IAEA,OAAOG,QAAA,CAASC,IAAI,CAACF,MAAA,EAAQ;QAC3BG,MAAA,mJAAQV,UAAA,CAAWW,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 2036, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2042, "column": 0}, "map": {"version":3,"file":"create.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/create.ts"],"sourcesContent":["import { getTranslation } from '@payloadcms/translations'\nimport httpStatus from 'http-status'\nimport { createOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const create: CollectionRouteHandler = async ({ collection, req }) => {\n  const { searchParams } = req\n  const autosave = searchParams.get('autosave') === 'true'\n  const draft = searchParams.get('draft') === 'true'\n  const depth = searchParams.get('depth')\n\n  const doc = await createOperation({\n    autosave,\n    collection,\n    data: req.data,\n    depth: isNumber(depth) ? depth : undefined,\n    draft,\n    req,\n  })\n\n  return Response.json(\n    {\n      doc,\n      message: req.t('general:successfullyCreated', {\n        label: getTranslation(collection.config.labels.singular, req.i18n),\n      }),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.CREATED,\n    },\n  )\n}\n"],"names":["getTranslation","httpStatus","createOperation","isNumber","headersWithCors","create","collection","req","searchParams","autosave","get","draft","depth","doc","data","undefined","Response","json","message","t","label","config","labels","singular","i18n","headers","Headers","status","CREATED"],"mappings":";;;AAAA,SAASA,cAAc,QAAQ;AAC/B,OAAOC,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AALhC,SAASF,eAAe,QAAQ;AAChC,SAASC,QAAQ,QAAQ;;;;;;;AAMlB,MAAME,MAAA,GAAiC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACtE,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,QAAA,GAAWD,YAAA,CAAaE,GAAG,CAAC,gBAAgB;IAClD,MAAMC,KAAA,GAAQH,YAAA,CAAaE,GAAG,CAAC,aAAa;IAC5C,MAAME,KAAA,GAAQJ,YAAA,CAAaE,GAAG,CAAC;IAE/B,MAAMG,GAAA,GAAM,mLAAMX,kBAAAA,AAAA,EAAgB;QAChCO,QAAA;QACAH,UAAA;QACAQ,IAAA,EAAMP,GAAA,CAAIO,IAAI;QACdF,KAAA,iKAAOT,WAAA,AAAAA,EAASS,KAAA,IAASA,KAAA,GAAQG,SAAA;QACjCJ,KAAA;QACAJ;IACF;IAEA,OAAOS,QAAA,CAASC,IAAI,CAClB;QACEJ,GAAA;QACAK,OAAA,EAASX,GAAA,CAAIY,CAAC,CAAC,+BAA+B;YAC5CC,KAAA,4LAAOpB,iBAAAA,AAAA,EAAeM,UAAA,CAAWe,MAAM,CAACC,MAAM,CAACC,QAAQ,EAAEhB,GAAA,CAAIiB,IAAI;QACnE;IACF,GACA;QACEC,OAAA,qLAASrB,kBAAAA,AAAA,EAAgB;YACvBqB,OAAA,EAAS,IAAIC,OAAA;YACbnB;QACF;QACAoB,MAAA,mJAAQ1B,UAAA,CAAW2B,OAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 2082, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2088, "column": 0}, "map": {"version":3,"file":"delete.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/delete.ts"],"sourcesContent":["import type { Where } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport httpStatus from 'http-status'\nimport { deleteOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const deleteDoc: CollectionRouteHandler = async ({ collection, req }) => {\n  const { depth, overrideLock, where } = req.query as {\n    depth?: string\n    overrideLock?: string\n    where?: Where\n  }\n\n  const result = await deleteOperation({\n    collection,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    overrideLock: Boolean(overrideLock === 'true'),\n    req,\n    where,\n  })\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  if (result.errors.length === 0) {\n    const message = req.t('general:deletedCountSuccessfully', {\n      count: result.docs.length,\n      label: getTranslation(\n        collection.config.labels[result.docs.length > 1 ? 'plural' : 'singular'],\n        req.i18n,\n      ),\n    })\n\n    return Response.json(\n      {\n        ...result,\n        message,\n      },\n      {\n        headers,\n        status: httpStatus.OK,\n      },\n    )\n  }\n\n  const total = result.docs.length + result.errors.length\n\n  const message = req.t('error:unableToDeleteCount', {\n    count: result.errors.length,\n    label: getTranslation(collection.config.labels[total > 1 ? 'plural' : 'singular'], req.i18n),\n    total,\n  })\n\n  return Response.json(\n    {\n      ...result,\n      message,\n    },\n    {\n      headers,\n      status: httpStatus.BAD_REQUEST,\n    },\n  )\n}\n"],"names":["getTranslation","httpStatus","deleteOperation","isNumber","headersWithCors","deleteDoc","collection","req","depth","overrideLock","where","query","result","Number","undefined","Boolean","headers","Headers","errors","length","message","t","count","docs","label","config","labels","i18n","Response","json","status","OK","total","BAD_REQUEST"],"mappings":";;;AAEA,SAASA,cAAc,QAAQ;AAC/B,OAAOC,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AALhC,SAASF,eAAe,QAAQ;AAChC,SAASC,QAAQ,QAAQ;;;;;;;AAMlB,MAAME,SAAA,GAAoC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACzE,MAAM,EAAEC,KAAK,EAAEC,YAAY,EAAEC,KAAAA,EAAO,GAAGH,GAAA,CAAII,KAAK;IAMhD,MAAMC,MAAA,GAAS,UAAMV,2LAAAA,AAAA,EAAgB;QACnCI,UAAA;QACAE,KAAA,iKAAOL,WAAAA,AAAA,EAASK,KAAA,IAASK,MAAA,CAAOL,KAAA,IAASM,SAAA;QACzCL,YAAA,EAAcM,OAAA,CAAQN,YAAA,KAAiB;QACvCF,GAAA;QACAG;IACF;IAEA,MAAMM,OAAA,IAAUZ,oMAAAA,AAAA,EAAgB;QAC9BY,OAAA,EAAS,IAAIC,OAAA;QACbV;IACF;IAEA,IAAIK,MAAA,CAAOM,MAAM,CAACC,MAAM,KAAK,GAAG;QAC9B,MAAMC,OAAA,GAAUb,GAAA,CAAIc,CAAC,CAAC,oCAAoC;YACxDC,KAAA,EAAOV,MAAA,CAAOW,IAAI,CAACJ,MAAM;YACzBK,KAAA,4LAAOxB,iBAAAA,AAAA,EACLM,UAAA,CAAWmB,MAAM,CAACC,MAAM,CAACd,MAAA,CAAOW,IAAI,CAACJ,MAAM,GAAG,IAAI,WAAW,WAAW,EACxEZ,GAAA,CAAIoB,IAAI;QAEZ;QAEA,OAAOC,QAAA,CAASC,IAAI,CAClB;YACE,GAAGjB,MAAM;YACTQ;QACF,GACA;YACEJ,OAAA;YACAc,MAAA,mJAAQ7B,UAAA,CAAW8B,EAAAA;QACrB;IAEJ;IAEA,MAAMC,KAAA,GAAQpB,MAAA,CAAOW,IAAI,CAACJ,MAAM,GAAGP,MAAA,CAAOM,MAAM,CAACC,MAAM;IAEvD,MAAMC,OAAA,GAAUb,GAAA,CAAIc,CAAC,CAAC,6BAA6B;QACjDC,KAAA,EAAOV,MAAA,CAAOM,MAAM,CAACC,MAAM;QAC3BK,KAAA,4LAAOxB,iBAAAA,AAAA,EAAeM,UAAA,CAAWmB,MAAM,CAACC,MAAM,CAACM,KAAA,GAAQ,IAAI,WAAW,WAAW,EAAEzB,GAAA,CAAIoB,IAAI;QAC3FK;IACF;IAEA,OAAOJ,QAAA,CAASC,IAAI,CAClB;QACE,GAAGjB,MAAM;QACTQ;IACF,GACA;QACEJ,OAAA;QACAc,MAAA,mJAAQ7B,UAAA,CAAWgC,WAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 2142, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2148, "column": 0}, "map": {"version":3,"file":"sanitizeCollectionID.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/utilities/sanitizeCollectionID.ts"],"sourcesContent":["import type { Payload } from 'payload'\n\ntype Args = {\n  collectionSlug: string\n  id: string\n  payload: Payload\n}\n\nexport const sanitizeCollectionID = ({ id, collectionSlug, payload }: Args): number | string => {\n  let sanitizedID: number | string = id\n  const collection = payload.collections[collectionSlug]\n\n  // If default db ID type is a number, we should sanitize\n  let shouldSanitize = Boolean(payload.db.defaultIDType === 'number')\n\n  // UNLESS the customIDType for this collection is text.... then we leave it\n  if (shouldSanitize && collection.customIDType === 'text') {\n    shouldSanitize = false\n  }\n\n  // If we still should sanitize, parse float\n  if (shouldSanitize) {\n    sanitizedID = parseFloat(sanitizedID)\n  }\n\n  return sanitizedID\n}\n"],"names":["sanitizeCollectionID","id","collectionSlug","payload","sanitizedID","collection","collections","shouldSanitize","Boolean","db","defaultIDType","customIDType","parseFloat"],"mappings":";;;AAQO,MAAMA,oBAAA,GAAuBA,CAAC,EAAEC,EAAE,EAAEC,cAAc,EAAEC,OAAAA,EAAe;IACxE,IAAIC,WAAA,GAA+BH,EAAA;IACnC,MAAMI,UAAA,GAAaF,OAAA,CAAQG,WAAW,CAACJ,cAAA,CAAe;IAEtD,wDAAA;IACA,IAAIK,cAAA,GAAiBC,OAAA,CAAQL,OAAA,CAAQM,EAAE,CAACC,aAAa,KAAK;IAE1D,2EAAA;IACA,IAAIH,cAAA,IAAkBF,UAAA,CAAWM,YAAY,KAAK,QAAQ;QACxDJ,cAAA,GAAiB;IACnB;IAEA,2CAAA;IACA,IAAIA,cAAA,EAAgB;QAClBH,WAAA,GAAcQ,UAAA,CAAWR,WAAA;IAC3B;IAEA,OAAOA,WAAA;AACT"}},
    {"offset": {"line": 2166, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2172, "column": 0}, "map": {"version":3,"file":"deleteByID.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/deleteByID.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { deleteByIDOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { sanitizeCollectionID } from '../utilities/sanitizeCollectionID.js'\n\nexport const deleteByID: CollectionRouteHandlerWithID = async ({\n  id: incomingID,\n  collection,\n  req,\n}) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n  const overrideLock = searchParams.get('overrideLock')\n\n  const id = sanitizeCollectionID({\n    id: incomingID,\n    collectionSlug: collection.config.slug,\n    payload: req.payload,\n  })\n\n  const doc = await deleteByIDOperation({\n    id,\n    collection,\n    depth: isNumber(depth) ? depth : undefined,\n    overrideLock: Boolean(overrideLock === 'true'),\n    req,\n  })\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  if (!doc) {\n    return Response.json(\n      {\n        message: req.t('general:notFound'),\n      },\n      {\n        headers,\n        status: httpStatus.NOT_FOUND,\n      },\n    )\n  }\n\n  return Response.json(\n    {\n      doc,\n      message: req.t('general:deletedSuccessfully'),\n    },\n    {\n      headers,\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","deleteByIDOperation","isNumber","headersWithCors","sanitizeCollectionID","deleteByID","id","incomingID","collection","req","searchParams","depth","get","overrideLock","collectionSlug","config","slug","payload","doc","undefined","Boolean","headers","Headers","Response","json","message","t","status","NOT_FOUND","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AAChC,SAASC,oBAAoB,QAAQ;AANrC,SAASH,mBAAmB,QAAQ;AACpC,SAASC,QAAQ,QAAQ;;;;;;AAOlB,MAAMG,UAAA,GAA2C,MAAAA,CAAO,EAC7DC,EAAA,EAAIC,UAAU,EACdC,UAAU,EACVC,GAAAA,EACD;IACC,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAC/B,MAAMC,YAAA,GAAeH,YAAA,CAAaE,GAAG,CAAC;IAEtC,MAAMN,EAAA,6MAAKF,uBAAAA,AAAA,EAAqB;QAC9BE,EAAA,EAAIC,UAAA;QACJO,cAAA,EAAgBN,UAAA,CAAWO,MAAM,CAACC,IAAI;QACtCC,OAAA,EAASR,GAAA,CAAIQ,OAAAA;IACf;IAEA,MAAMC,GAAA,GAAM,OAAMjB,sMAAAA,AAAA,EAAoB;QACpCK,EAAA;QACAE,UAAA;QACAG,KAAA,iKAAOT,WAAA,AAAAA,EAASS,KAAA,IAASA,KAAA,GAAQQ,SAAA;QACjCN,YAAA,EAAcO,OAAA,CAAQP,YAAA,KAAiB;QACvCJ;IACF;IAEA,MAAMY,OAAA,sLAAUlB,kBAAA,AAAAA,EAAgB;QAC9BkB,OAAA,EAAS,IAAIC,OAAA;QACbb;IACF;IAEA,IAAI,CAACS,GAAA,EAAK;QACR,OAAOK,QAAA,CAASC,IAAI,CAClB;YACEC,OAAA,EAAShB,GAAA,CAAIiB,CAAC,CAAC;QACjB,GACA;YACEL,OAAA;YACAM,MAAA,mJAAQ3B,UAAA,CAAW4B,SAAAA;QACrB;IAEJ;IAEA,OAAOL,QAAA,CAASC,IAAI,CAClB;QACEN,GAAA;QACAO,OAAA,EAAShB,GAAA,CAAIiB,CAAC,CAAC;IACjB,GACA;QACEL,OAAA;QACAM,MAAA,mJAAQ3B,UAAA,CAAW6B,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 2221, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2227, "column": 0}, "map": {"version":3,"file":"docAccess.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/docAccess.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { docAccessOperation } from 'payload'\n\nimport type { CollectionRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const docAccess: CollectionRouteHandlerWithID = async ({ id, collection, req }) => {\n  const result = await docAccessOperation({\n    id,\n    collection,\n    req,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","docAccessOperation","headersWithCors","docAccess","id","collection","req","result","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASE,eAAe,QAAQ;AAJhC,SAASD,kBAAkB,QAAQ;;;;AAM5B,MAAME,SAAA,GAA0C,MAAAA,CAAO,EAAEC,EAAE,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACnF,MAAMC,MAAA,GAAS,sLAAMN,qBAAAA,AAAA,EAAmB;QACtCG,EAAA;QACAC,UAAA;QACAC;IACF;IAEA,OAAOE,QAAA,CAASC,IAAI,CAACF,MAAA,EAAQ;QAC3BG,OAAA,qLAASR,kBAAAA,AAAA,EAAgB;YACvBQ,OAAA,EAAS,IAAIC,OAAA;YACbL;QACF;QACAM,MAAA,mJAAQZ,UAAA,CAAWa,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 2250, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2256, "column": 0}, "map": {"version":3,"file":"duplicate.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/duplicate.ts"],"sourcesContent":["import { getTranslation } from '@payloadcms/translations'\nimport httpStatus from 'http-status'\nimport { duplicateOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { sanitizeCollectionID } from '../utilities/sanitizeCollectionID.js'\n\nexport const duplicate: CollectionRouteHandlerWithID = async ({\n  id: incomingID,\n  collection,\n  req,\n}) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n  // draft defaults to true, unless explicitly set requested as false to prevent the newly duplicated document from being published\n  const draft = searchParams.get('draft') !== 'false'\n\n  const id = sanitizeCollectionID({\n    id: incomingID,\n    collectionSlug: collection.config.slug,\n    payload: req.payload,\n  })\n\n  const doc = await duplicateOperation({\n    id,\n    collection,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft,\n    req,\n  })\n\n  const message = req.t('general:successfullyDuplicated', {\n    label: getTranslation(collection.config.labels.singular, req.i18n),\n  })\n\n  return Response.json(\n    {\n      doc,\n      message,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["getTranslation","httpStatus","duplicateOperation","isNumber","headersWithCors","sanitizeCollectionID","duplicate","id","incomingID","collection","req","searchParams","depth","get","draft","collectionSlug","config","slug","payload","doc","Number","undefined","message","t","label","labels","singular","i18n","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,SAASA,cAAc,QAAQ;AAC/B,OAAOC,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AAChC,SAASC,oBAAoB,QAAQ;AANrC,SAASH,kBAAkB,QAAQ;AACnC,SAASC,QAAQ,QAAQ;;;;;;;;AAOlB,MAAMG,SAAA,GAA0C,MAAAA,CAAO,EAC5DC,EAAA,EAAIC,UAAU,EACdC,UAAU,EACVC,GAAAA,EACD;IACC,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAC/B,iIAAA;IACA,MAAMC,KAAA,GAAQH,YAAA,CAAaE,GAAG,CAAC,aAAa;IAE5C,MAAMN,EAAA,GAAKF,iOAAAA,AAAA,EAAqB;QAC9BE,EAAA,EAAIC,UAAA;QACJO,cAAA,EAAgBN,UAAA,CAAWO,MAAM,CAACC,IAAI;QACtCC,OAAA,EAASR,GAAA,CAAIQ,OAAAA;IACf;IAEA,MAAMC,GAAA,GAAM,sLAAMjB,qBAAAA,AAAA,EAAmB;QACnCK,EAAA;QACAE,UAAA;QACAG,KAAA,GAAOT,yKAAAA,AAAA,EAASS,KAAA,IAASQ,MAAA,CAAOR,KAAA,IAASS,SAAA;QACzCP,KAAA;QACAJ;IACF;IAEA,MAAMY,OAAA,GAAUZ,GAAA,CAAIa,CAAC,CAAC,kCAAkC;QACtDC,KAAA,GAAOxB,0MAAAA,AAAA,EAAeS,UAAA,CAAWO,MAAM,CAACS,MAAM,CAACC,QAAQ,EAAEhB,GAAA,CAAIiB,IAAI;IACnE;IAEA,OAAOC,QAAA,CAASC,IAAI,CAClB;QACEV,GAAA;QACAG;IACF,GACA;QACEQ,OAAA,qLAAS1B,kBAAAA,AAAA,EAAgB;YACvB0B,OAAA,EAAS,IAAIC,OAAA;YACbrB;QACF;QACAsB,MAAA,mJAAQ/B,UAAA,CAAWgC,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 2303, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2309, "column": 0}, "map": {"version":3,"file":"sanitizeJoinParams.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/utilities/sanitizeJoinParams.ts"],"sourcesContent":["import type { JoinQuery } from 'payload'\n\nimport { isNumber } from 'payload/shared'\n\n/**\n * Convert request JoinQuery object from strings to numbers\n * @param joins\n */\nexport const sanitizeJoinParams = (\n  joins:\n    | {\n        [schemaPath: string]: {\n          limit?: unknown\n          sort?: string\n          where?: unknown\n        }\n      }\n    | false = {},\n): JoinQuery => {\n  const joinQuery = {}\n\n  Object.keys(joins).forEach((schemaPath) => {\n    joinQuery[schemaPath] = {\n      limit: isNumber(joins[schemaPath]?.limit) ? Number(joins[schemaPath].limit) : undefined,\n      sort: joins[schemaPath]?.sort ? joins[schemaPath].sort : undefined,\n      where: joins[schemaPath]?.where ? joins[schemaPath].where : undefined,\n    }\n  })\n\n  return joinQuery\n}\n"],"names":["isNumber","sanitizeJoinParams","joins","joinQuery","Object","keys","forEach","schemaPath","limit","Number","undefined","sort","where"],"mappings":";;;AAEA,SAASA,QAAQ,QAAQ;;AAMlB,MAAMC,kBAAA,GAAqBA,CAChCC,KAAA,GAQY,CAAC,CAAC;IAEd,MAAMC,SAAA,GAAY,CAAC;IAEnBC,MAAA,CAAOC,IAAI,CAACH,KAAA,EAAOI,OAAO,EAAEC,UAAA;QAC1BJ,SAAS,CAACI,UAAA,CAAW,GAAG;YACtBC,KAAA,iKAAOR,WAAAA,AAAA,EAASE,KAAK,CAACK,UAAA,CAAW,EAAEC,KAAA,IAASC,MAAA,CAAOP,KAAK,CAACK,UAAA,CAAW,CAACC,KAAK,IAAIE,SAAA;YAC9EC,IAAA,EAAMT,KAAK,CAACK,UAAA,CAAW,EAAEI,IAAA,GAAOT,KAAK,CAACK,UAAA,CAAW,CAACI,IAAI,GAAGD,SAAA;YACzDE,KAAA,EAAOV,KAAK,CAACK,UAAA,CAAW,EAAEK,KAAA,GAAQV,KAAK,CAACK,UAAA,CAAW,CAACK,KAAK,GAAGF;QAC9D;IACF;IAEA,OAAOP,SAAA;AACT"}},
    {"offset": {"line": 2325, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2331, "column": 0}, "map": {"version":3,"file":"find.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/find.ts"],"sourcesContent":["import type { JoinQuery, Where } from 'payload'\n\nimport httpStatus from 'http-status'\nimport { findOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { sanitizeJoinParams } from '../utilities/sanitizeJoinParams.js'\n\nexport const find: CollectionRouteHandler = async ({ collection, req }) => {\n  const { depth, draft, joins, limit, page, sort, where } = req.query as {\n    depth?: string\n    draft?: string\n    joins?: JoinQuery\n    limit?: string\n    page?: string\n    sort?: string\n    where?: Where\n  }\n\n  const result = await findOperation({\n    collection,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: draft === 'true',\n    joins: sanitizeJoinParams(joins),\n    limit: isNumber(limit) ? Number(limit) : undefined,\n    page: isNumber(page) ? Number(page) : undefined,\n    req,\n    sort: typeof sort === 'string' ? sort.split(',') : undefined,\n    where,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","findOperation","isNumber","headersWithCors","sanitizeJoinParams","find","collection","req","depth","draft","joins","limit","page","sort","where","query","result","Number","undefined","split","Response","json","headers","Headers","status","OK"],"mappings":";;;AAEA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AAChC,SAASC,kBAAkB,QAAQ;AANnC,SAASH,aAAa,QAAQ;AAC9B,SAASC,QAAQ,QAAQ;;;;;;AAOlB,MAAMG,IAAA,GAA+B,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACpE,MAAM,EAAEC,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,KAAAA,EAAO,GAAGP,GAAA,CAAIQ,KAAK;IAUnE,MAAMC,MAAA,GAAS,OAAMf,0LAAAA,AAAA,EAAc;QACjCK,UAAA;QACAE,KAAA,iKAAON,WAAAA,AAAA,EAASM,KAAA,IAASS,MAAA,CAAOT,KAAA,IAASU,SAAA;QACzCT,KAAA,EAAOA,KAAA,KAAU;QACjBC,KAAA,0MAAON,qBAAA,AAAAA,EAAmBM,KAAA;QAC1BC,KAAA,iKAAOT,WAAAA,AAAA,EAASS,KAAA,IAASM,MAAA,CAAON,KAAA,IAASO,SAAA;QACzCN,IAAA,iKAAMV,WAAAA,AAAA,EAASU,IAAA,IAAQK,MAAA,CAAOL,IAAA,IAAQM,SAAA;QACtCX,GAAA;QACAM,IAAA,EAAM,OAAOA,IAAA,KAAS,WAAWA,IAAA,CAAKM,KAAK,CAAC,OAAOD,SAAA;QACnDJ;IACF;IAEA,OAAOM,QAAA,CAASC,IAAI,CAACL,MAAA,EAAQ;QAC3BM,OAAA,qLAASnB,kBAAAA,AAAA,EAAgB;YACvBmB,OAAA,EAAS,IAAIC,OAAA;YACbhB;QACF;QACAiB,MAAA,mJAAQxB,UAAA,CAAWyB,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 2365, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2371, "column": 0}, "map": {"version":3,"file":"findByID.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/findByID.ts"],"sourcesContent":["import type { JoinQuery } from 'payload'\n\nimport httpStatus from 'http-status'\nimport { findByIDOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { sanitizeCollectionID } from '../utilities/sanitizeCollectionID.js'\nimport { sanitizeJoinParams } from '../utilities/sanitizeJoinParams.js'\n\nexport const findByID: CollectionRouteHandlerWithID = async ({\n  id: incomingID,\n  collection,\n  req,\n}) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n\n  const id = sanitizeCollectionID({\n    id: incomingID,\n    collectionSlug: collection.config.slug,\n    payload: req.payload,\n  })\n\n  const result = await findByIDOperation({\n    id,\n    collection,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: searchParams.get('draft') === 'true',\n    joins: sanitizeJoinParams(req.query.joins as JoinQuery),\n    req,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","findByIDOperation","isNumber","headersWithCors","sanitizeCollectionID","sanitizeJoinParams","findByID","id","incomingID","collection","req","searchParams","depth","get","collectionSlug","config","slug","payload","result","Number","undefined","draft","joins","query","Response","json","headers","Headers","status","OK"],"mappings":";;;AAEA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AAChC,SAASC,oBAAoB,QAAQ;AACrC,SAASC,kBAAkB,QAAQ;AAPnC,SAASJ,iBAAiB,QAAQ;AAClC,SAASC,QAAQ,QAAQ;;;;;;;AAQlB,MAAMI,QAAA,GAAyC,MAAAA,CAAO,EAC3DC,EAAA,EAAIC,UAAU,EACdC,UAAU,EACVC,GAAAA,EACD;IACC,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAE/B,MAAMN,EAAA,6MAAKH,uBAAAA,AAAA,EAAqB;QAC9BG,EAAA,EAAIC,UAAA;QACJM,cAAA,EAAgBL,UAAA,CAAWM,MAAM,CAACC,IAAI;QACtCC,OAAA,EAASP,GAAA,CAAIO,OAAAA;IACf;IAEA,MAAMC,MAAA,GAAS,qLAAMjB,oBAAA,AAAAA,EAAkB;QACrCM,EAAA;QACAE,UAAA;QACAG,KAAA,iKAAOV,WAAAA,AAAA,EAASU,KAAA,IAASO,MAAA,CAAOP,KAAA,IAASQ,SAAA;QACzCC,KAAA,EAAOV,YAAA,CAAaE,GAAG,CAAC,aAAa;QACrCS,KAAA,0MAAOjB,qBAAAA,AAAA,EAAmBK,GAAA,CAAIa,KAAK,CAACD,KAAK;QACzCZ;IACF;IAEA,OAAOc,QAAA,CAASC,IAAI,CAACP,MAAA,EAAQ;QAC3BQ,OAAA,qLAASvB,kBAAA,AAAAA,EAAgB;YACvBuB,OAAA,EAAS,IAAIC,OAAA;YACbjB;QACF;QACAkB,MAAA,mJAAQ5B,UAAA,CAAW6B,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 2410, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2416, "column": 0}, "map": {"version":3,"file":"findVersionByID.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/findVersionByID.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { findVersionByIDOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { sanitizeCollectionID } from '../utilities/sanitizeCollectionID.js'\n\nexport const findVersionByID: CollectionRouteHandlerWithID = async ({\n  id: incomingID,\n  collection,\n  req,\n}) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n\n  const id = sanitizeCollectionID({\n    id: incomingID,\n    collectionSlug: collection.config.slug,\n    payload: req.payload,\n  })\n\n  const result = await findVersionByIDOperation({\n    id,\n    collection,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    req,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","findVersionByIDOperation","isNumber","headersWithCors","sanitizeCollectionID","findVersionByID","id","incomingID","collection","req","searchParams","depth","get","collectionSlug","config","slug","payload","result","Number","undefined","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AAChC,SAASC,oBAAoB,QAAQ;AANrC,SAASH,wBAAwB,QAAQ;AACzC,SAASC,QAAQ,QAAQ;;;;;;AAOlB,MAAMG,eAAA,GAAgD,MAAAA,CAAO,EAClEC,EAAA,EAAIC,UAAU,EACdC,UAAU,EACVC,GAAAA,EACD;IACC,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAE/B,MAAMN,EAAA,6MAAKF,uBAAAA,AAAA,EAAqB;QAC9BE,EAAA,EAAIC,UAAA;QACJM,cAAA,EAAgBL,UAAA,CAAWM,MAAM,CAACC,IAAI;QACtCC,OAAA,EAASP,GAAA,CAAIO,OAAAA;IACf;IAEA,MAAMC,MAAA,GAAS,OAAMhB,gNAAAA,AAAA,EAAyB;QAC5CK,EAAA;QACAE,UAAA;QACAG,KAAA,iKAAOT,WAAAA,AAAA,EAASS,KAAA,IAASO,MAAA,CAAOP,KAAA,IAASQ,SAAA;QACzCV;IACF;IAEA,OAAOW,QAAA,CAASC,IAAI,CAACJ,MAAA,EAAQ;QAC3BK,OAAA,qLAASnB,kBAAAA,AAAA,EAAgB;YACvBmB,OAAA,EAAS,IAAIC,OAAA;YACbd;QACF;QACAe,MAAA,mJAAQxB,UAAA,CAAWyB,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 2451, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2457, "column": 0}, "map": {"version":3,"file":"findVersions.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/findVersions.ts"],"sourcesContent":["import type { Where } from 'payload'\n\nimport httpStatus from 'http-status'\nimport { findVersionsOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const findVersions: CollectionRouteHandler = async ({ collection, req }) => {\n  const { depth, limit, page, sort, where } = req.query as {\n    depth?: string\n    limit?: string\n    page?: string\n    sort?: string\n    where?: Where\n  }\n\n  const result = await findVersionsOperation({\n    collection,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    limit: isNumber(limit) ? Number(limit) : undefined,\n    page: isNumber(page) ? Number(page) : undefined,\n    req,\n    sort: typeof sort === 'string' ? sort.split(',') : undefined,\n    where,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","findVersionsOperation","isNumber","headersWithCors","findVersions","collection","req","depth","limit","page","sort","where","query","result","Number","undefined","split","Response","json","headers","Headers","status","OK"],"mappings":";;;AAEA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AALhC,SAASF,qBAAqB,QAAQ;AACtC,SAASC,QAAQ,QAAQ;;;;;AAMlB,MAAME,YAAA,GAAuC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IAC5E,MAAM,EAAEC,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,KAAAA,EAAO,GAAGL,GAAA,CAAIM,KAAK;IAQrD,MAAMC,MAAA,GAAS,yLAAMZ,wBAAAA,AAAA,EAAsB;QACzCI,UAAA;QACAE,KAAA,iKAAOL,WAAAA,AAAA,EAASK,KAAA,IAASO,MAAA,CAAOP,KAAA,IAASQ,SAAA;QACzCP,KAAA,iKAAON,WAAAA,AAAA,EAASM,KAAA,IAASM,MAAA,CAAON,KAAA,IAASO,SAAA;QACzCN,IAAA,iKAAMP,WAAAA,AAAA,EAASO,IAAA,IAAQK,MAAA,CAAOL,IAAA,IAAQM,SAAA;QACtCT,GAAA;QACAI,IAAA,EAAM,OAAOA,IAAA,KAAS,WAAWA,IAAA,CAAKM,KAAK,CAAC,OAAOD,SAAA;QACnDJ;IACF;IAEA,OAAOM,QAAA,CAASC,IAAI,CAACL,MAAA,EAAQ;QAC3BM,OAAA,qLAAShB,kBAAA,AAAAA,EAAgB;YACvBgB,OAAA,EAAS,IAAIC,OAAA;YACbd;QACF;QACAe,MAAA,mJAAQrB,UAAA,CAAWsB,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 2487, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2493, "column": 0}, "map": {"version":3,"file":"preview.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/preview.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { extractJWT, findByIDOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { routeError } from '../routeError.js'\n\nexport const preview: CollectionRouteHandlerWithID = async ({ id, collection, req }) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n\n  const result = await findByIDOperation({\n    id,\n    collection,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: searchParams.get('draft') === 'true',\n    req,\n  })\n\n  let previewURL: string\n\n  const generatePreviewURL = req.payload.config.collections.find(\n    (config) => config.slug === collection.config.slug,\n  )?.admin?.preview\n\n  const token = extractJWT(req)\n\n  if (typeof generatePreviewURL === 'function') {\n    try {\n      previewURL = await generatePreviewURL(result, {\n        locale: req.locale,\n        req,\n        token,\n      })\n    } catch (err) {\n      return routeError({\n        collection,\n        config: req.payload.config,\n        err,\n        req,\n      })\n    }\n  }\n\n  return Response.json(previewURL, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","extractJWT","findByIDOperation","isNumber","headersWithCors","routeError","preview","id","collection","req","searchParams","depth","get","result","Number","undefined","draft","previewURL","generatePreviewURL","payload","config","collections","find","slug","admin","token","locale","err","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASI,eAAe,QAAQ;AAChC,SAASC,UAAU,QAAQ;;AAL3B,SAASF,QAAQ,QAAQ;AADzB,SAASF,UAAU,EAAEC,iBAAiB,QAAQ;;;;;;AAQvC,MAAMI,OAAA,GAAwC,MAAAA,CAAO,EAAEC,EAAE,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACjF,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAE/B,MAAMC,MAAA,GAAS,qLAAMX,oBAAAA,AAAA,EAAkB;QACrCK,EAAA;QACAC,UAAA;QACAG,KAAA,iKAAOR,WAAAA,AAAA,EAASQ,KAAA,IAASG,MAAA,CAAOH,KAAA,IAASI,SAAA;QACzCC,KAAA,EAAON,YAAA,CAAaE,GAAG,CAAC,aAAa;QACrCH;IACF;IAEA,IAAIQ,UAAA;IAEJ,MAAMC,kBAAA,GAAqBT,GAAA,CAAIU,OAAO,CAACC,MAAM,CAACC,WAAW,CAACC,IAAI,EAC3DF,MAAA,GAAWA,MAAA,CAAOG,IAAI,KAAKf,UAAA,CAAWY,MAAM,CAACG,IAAI,GACjDC,KAAA,EAAOlB,OAAA;IAEV,MAAMmB,KAAA,IAAQxB,wKAAAA,AAAA,EAAWQ,GAAA;IAEzB,IAAI,OAAOS,kBAAA,KAAuB,YAAY;QAC5C,IAAI;YACFD,UAAA,GAAa,MAAMC,kBAAA,CAAmBL,MAAA,EAAQ;gBAC5Ca,MAAA,EAAQjB,GAAA,CAAIiB,MAAM;gBAClBjB,GAAA;gBACAgB;YACF;QACF,EAAE,OAAOE,GAAA,EAAK;YACZ,0LAAOtB,aAAAA,AAAA,EAAW;gBAChBG,UAAA;gBACAY,MAAA,EAAQX,GAAA,CAAIU,OAAO,CAACC,MAAM;gBAC1BO,GAAA;gBACAlB;YACF;QACF;IACF;IAEA,OAAOmB,QAAA,CAASC,IAAI,CAACZ,UAAA,EAAY;QAC/Ba,OAAA,qLAAS1B,kBAAAA,AAAA,EAAgB;YACvB0B,OAAA,EAAS,IAAIC,OAAA;YACbtB;QACF;QACAuB,MAAA,mJAAQhC,UAAA,CAAWiC,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 2544, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2550, "column": 0}, "map": {"version":3,"file":"restoreVersion.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/restoreVersion.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { restoreVersionOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { sanitizeCollectionID } from '../utilities/sanitizeCollectionID.js'\n\nexport const restoreVersion: CollectionRouteHandlerWithID = async ({\n  id: incomingID,\n  collection,\n  req,\n}) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n  const draft = searchParams.get('draft')\n\n  const id = sanitizeCollectionID({\n    id: incomingID,\n    collectionSlug: collection.config.slug,\n    payload: req.payload,\n  })\n\n  const result = await restoreVersionOperation({\n    id,\n    collection,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: draft === 'true' ? true : undefined,\n    req,\n  })\n\n  return Response.json(\n    {\n      ...result,\n      message: req.t('version:restoredSuccessfully'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","restoreVersionOperation","isNumber","headersWithCors","sanitizeCollectionID","restoreVersion","id","incomingID","collection","req","searchParams","depth","get","draft","collectionSlug","config","slug","payload","result","Number","undefined","Response","json","message","t","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AAChC,SAASC,oBAAoB,QAAQ;AANrC,SAASH,uBAAuB,QAAQ;AACxC,SAASC,QAAQ,QAAQ;;;;;;AAOlB,MAAMG,cAAA,GAA+C,MAAAA,CAAO,EACjEC,EAAA,EAAIC,UAAU,EACdC,UAAU,EACVC,GAAAA,EACD;IACC,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAC/B,MAAMC,KAAA,GAAQH,YAAA,CAAaE,GAAG,CAAC;IAE/B,MAAMN,EAAA,IAAKF,gOAAA,AAAAA,EAAqB;QAC9BE,EAAA,EAAIC,UAAA;QACJO,cAAA,EAAgBN,UAAA,CAAWO,MAAM,CAACC,IAAI;QACtCC,OAAA,EAASR,GAAA,CAAIQ,OAAAA;IACf;IAEA,MAAMC,MAAA,GAAS,2LAAMjB,0BAAAA,AAAA,EAAwB;QAC3CK,EAAA;QACAE,UAAA;QACAG,KAAA,GAAOT,yKAAAA,AAAA,EAASS,KAAA,IAASQ,MAAA,CAAOR,KAAA,IAASS,SAAA;QACzCP,KAAA,EAAOA,KAAA,KAAU,SAAS,OAAOO,SAAA;QACjCX;IACF;IAEA,OAAOY,QAAA,CAASC,IAAI,CAClB;QACE,GAAGJ,MAAM;QACTK,OAAA,EAASd,GAAA,CAAIe,CAAC,CAAC;IACjB,GACA;QACEC,OAAA,qLAAStB,kBAAAA,AAAA,EAAgB;YACvBsB,OAAA,EAAS,IAAIC,OAAA;YACbjB;QACF;QACAkB,MAAA,mJAAQ3B,UAAA,CAAW4B,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 2590, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2596, "column": 0}, "map": {"version":3,"file":"update.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/update.ts"],"sourcesContent":["import type { Where } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport httpStatus from 'http-status'\nimport { updateOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const update: CollectionRouteHandler = async ({ collection, req }) => {\n  const { depth, draft, limit, overrideLock, where } = req.query as {\n    depth?: string\n    draft?: string\n    limit?: string\n    overrideLock?: string\n    where?: Where\n  }\n\n  const result = await updateOperation({\n    collection,\n    data: req.data,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: draft === 'true',\n    limit: isNumber(limit) ? Number(limit) : undefined,\n    overrideLock: Boolean(overrideLock === 'true'),\n    req,\n    where,\n  })\n\n  const headers = headersWithCors({\n    headers: new Headers(),\n    req,\n  })\n\n  if (result.errors.length === 0) {\n    const message = req.t('general:updatedCountSuccessfully', {\n      count: result.docs.length,\n      label: getTranslation(\n        collection.config.labels[result.docs.length > 1 ? 'plural' : 'singular'],\n        req.i18n,\n      ),\n    })\n\n    return Response.json(\n      {\n        ...result,\n        message,\n      },\n      {\n        headers,\n        status: httpStatus.OK,\n      },\n    )\n  }\n\n  const total = result.docs.length + result.errors.length\n  const message = req.t('error:unableToUpdateCount', {\n    count: result.errors.length,\n    label: getTranslation(collection.config.labels[total > 1 ? 'plural' : 'singular'], req.i18n),\n    total,\n  })\n\n  return Response.json(\n    {\n      ...result,\n      message,\n    },\n    {\n      headers,\n      status: httpStatus.BAD_REQUEST,\n    },\n  )\n}\n"],"names":["getTranslation","httpStatus","updateOperation","isNumber","headersWithCors","update","collection","req","depth","draft","limit","overrideLock","where","query","result","data","Number","undefined","Boolean","headers","Headers","errors","length","message","t","count","docs","label","config","labels","i18n","Response","json","status","OK","total","BAD_REQUEST"],"mappings":";;;AAEA,SAASA,cAAc,QAAQ;AAC/B,OAAOC,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AALhC,SAASF,eAAe,QAAQ;AAChC,SAASC,QAAQ,QAAQ;;;;;;;AAMlB,MAAME,MAAA,GAAiC,MAAAA,CAAO,EAAEC,UAAU,EAAEC,GAAAA,EAAK;IACtE,MAAM,EAAEC,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,YAAY,EAAEC,KAAAA,EAAO,GAAGL,GAAA,CAAIM,KAAK;IAQ9D,MAAMC,MAAA,GAAS,mLAAMZ,kBAAAA,AAAA,EAAgB;QACnCI,UAAA;QACAS,IAAA,EAAMR,GAAA,CAAIQ,IAAI;QACdP,KAAA,iKAAOL,WAAA,AAAAA,EAASK,KAAA,IAASQ,MAAA,CAAOR,KAAA,IAASS,SAAA;QACzCR,KAAA,EAAOA,KAAA,KAAU;QACjBC,KAAA,iKAAOP,WAAAA,AAAA,EAASO,KAAA,IAASM,MAAA,CAAON,KAAA,IAASO,SAAA;QACzCN,YAAA,EAAcO,OAAA,CAAQP,YAAA,KAAiB;QACvCJ,GAAA;QACAK;IACF;IAEA,MAAMO,OAAA,sLAAUf,kBAAAA,AAAA,EAAgB;QAC9Be,OAAA,EAAS,IAAIC,OAAA;QACbb;IACF;IAEA,IAAIO,MAAA,CAAOO,MAAM,CAACC,MAAM,KAAK,GAAG;QAC9B,MAAMC,OAAA,GAAUhB,GAAA,CAAIiB,CAAC,CAAC,oCAAoC;YACxDC,KAAA,EAAOX,MAAA,CAAOY,IAAI,CAACJ,MAAM;YACzBK,KAAA,4LAAO3B,iBAAA,AAAAA,EACLM,UAAA,CAAWsB,MAAM,CAACC,MAAM,CAACf,MAAA,CAAOY,IAAI,CAACJ,MAAM,GAAG,IAAI,WAAW,WAAW,EACxEf,GAAA,CAAIuB,IAAI;QAEZ;QAEA,OAAOC,QAAA,CAASC,IAAI,CAClB;YACE,GAAGlB,MAAM;YACTS;QACF,GACA;YACEJ,OAAA;YACAc,MAAA,kJAAQhC,WAAA,CAAWiC,EAAAA;QACrB;IAEJ;IAEA,MAAMC,KAAA,GAAQrB,MAAA,CAAOY,IAAI,CAACJ,MAAM,GAAGR,MAAA,CAAOO,MAAM,CAACC,MAAM;IACvD,MAAMC,OAAA,GAAUhB,GAAA,CAAIiB,CAAC,CAAC,6BAA6B;QACjDC,KAAA,EAAOX,MAAA,CAAOO,MAAM,CAACC,MAAM;QAC3BK,KAAA,4LAAO3B,iBAAAA,AAAA,EAAeM,UAAA,CAAWsB,MAAM,CAACC,MAAM,CAACM,KAAA,GAAQ,IAAI,WAAW,WAAW,EAAE5B,GAAA,CAAIuB,IAAI;QAC3FK;IACF;IAEA,OAAOJ,QAAA,CAASC,IAAI,CAClB;QACE,GAAGlB,MAAM;QACTS;IACF,GACA;QACEJ,OAAA;QACAc,MAAA,mJAAQhC,UAAA,CAAWmC,WAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 2653, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2659, "column": 0}, "map": {"version":3,"file":"updateByID.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/collections/updateByID.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { updateByIDOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { CollectionRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { sanitizeCollectionID } from '../utilities/sanitizeCollectionID.js'\n\nexport const updateByID: CollectionRouteHandlerWithID = async ({\n  id: incomingID,\n  collection,\n  req,\n}) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n  const autosave = searchParams.get('autosave') === 'true'\n  const draft = searchParams.get('draft') === 'true'\n  const overrideLock = searchParams.get('overrideLock')\n  const publishSpecificLocale = req.query.publishSpecificLocale as string | undefined\n\n  const id = sanitizeCollectionID({\n    id: incomingID,\n    collectionSlug: collection.config.slug,\n    payload: req.payload,\n  })\n\n  const doc = await updateByIDOperation({\n    id,\n    autosave,\n    collection,\n    data: req.data,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft,\n    overrideLock: Boolean(overrideLock === 'true'),\n    publishSpecificLocale,\n    req,\n  })\n\n  let message = req.t('general:updatedSuccessfully')\n\n  if (draft) {\n    message = req.t('version:draftSavedSuccessfully')\n  }\n  if (autosave) {\n    message = req.t('version:autosavedSuccessfully')\n  }\n\n  return Response.json(\n    {\n      doc,\n      message,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","updateByIDOperation","isNumber","headersWithCors","sanitizeCollectionID","updateByID","id","incomingID","collection","req","searchParams","depth","get","autosave","draft","overrideLock","publishSpecificLocale","query","collectionSlug","config","slug","payload","doc","data","Number","undefined","Boolean","message","t","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AAChC,SAASC,oBAAoB,QAAQ;AANrC,SAASH,mBAAmB,QAAQ;AACpC,SAASC,QAAQ,QAAQ;;;;;;AAOlB,MAAMG,UAAA,GAA2C,MAAAA,CAAO,EAC7DC,EAAA,EAAIC,UAAU,EACdC,UAAU,EACVC,GAAAA,EACD;IACC,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAC/B,MAAMC,QAAA,GAAWH,YAAA,CAAaE,GAAG,CAAC,gBAAgB;IAClD,MAAME,KAAA,GAAQJ,YAAA,CAAaE,GAAG,CAAC,aAAa;IAC5C,MAAMG,YAAA,GAAeL,YAAA,CAAaE,GAAG,CAAC;IACtC,MAAMI,qBAAA,GAAwBP,GAAA,CAAIQ,KAAK,CAACD,qBAAqB;IAE7D,MAAMV,EAAA,6MAAKF,uBAAAA,AAAA,EAAqB;QAC9BE,EAAA,EAAIC,UAAA;QACJW,cAAA,EAAgBV,UAAA,CAAWW,MAAM,CAACC,IAAI;QACtCC,OAAA,EAASZ,GAAA,CAAIY,OAAAA;IACf;IAEA,MAAMC,GAAA,GAAM,uLAAMrB,sBAAAA,AAAA,EAAoB;QACpCK,EAAA;QACAO,QAAA;QACAL,UAAA;QACAe,IAAA,EAAMd,GAAA,CAAIc,IAAI;QACdZ,KAAA,iKAAOT,WAAAA,AAAA,EAASS,KAAA,IAASa,MAAA,CAAOb,KAAA,IAASc,SAAA;QACzCX,KAAA;QACAC,YAAA,EAAcW,OAAA,CAAQX,YAAA,KAAiB;QACvCC,qBAAA;QACAP;IACF;IAEA,IAAIkB,OAAA,GAAUlB,GAAA,CAAImB,CAAC,CAAC;IAEpB,IAAId,KAAA,EAAO;QACTa,OAAA,GAAUlB,GAAA,CAAImB,CAAC,CAAC;IAClB;IACA,IAAIf,QAAA,EAAU;QACZc,OAAA,GAAUlB,GAAA,CAAImB,CAAC,CAAC;IAClB;IAEA,OAAOC,QAAA,CAASC,IAAI,CAClB;QACER,GAAA;QACAK;IACF,GACA;QACEI,OAAA,qLAAS5B,kBAAAA,AAAA,EAAgB;YACvB4B,OAAA,EAAS,IAAIC,OAAA;YACbvB;QACF;QACAwB,MAAA,mJAAQjC,UAAA,CAAWkC,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 2713, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2719, "column": 0}, "map": {"version":3,"file":"index.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/fetchAPI-stream-file/index.ts"],"sourcesContent":["import fs from 'fs'\n\nexport function iteratorToStream(iterator) {\n  return new ReadableStream({\n    async pull(controller) {\n      const { done, value } = await iterator.next()\n      if (done) {\n        controller.close()\n      } else {\n        controller.enqueue(value)\n      }\n    },\n  })\n}\n\nexport async function* nodeStreamToIterator(stream: fs.ReadStream) {\n  for await (const chunk of stream) {\n    yield new Uint8Array(chunk)\n  }\n}\n\nexport function streamFile(path: string): ReadableStream {\n  const nodeStream = fs.createReadStream(path)\n  const data: ReadableStream = iteratorToStream(nodeStreamToIterator(nodeStream))\n  return data\n}\n"],"names":["fs","iteratorToStream","iterator","ReadableStream","pull","controller","done","value","next","close","enqueue","nodeStreamToIterator","stream","chunk","Uint8Array","streamFile","path","nodeStream","createReadStream","data"],"mappings":";;;;;AAAA,OAAOA,EAAA,MAAQ;;AAER,SAASC,iBAAiBC,QAAQ;IACvC,OAAO,IAAIC,cAAA,CAAe;QACxB,MAAMC,MAAKC,UAAU;YACnB,MAAM,EAAEC,IAAI,EAAEC,KAAAA,EAAO,GAAG,MAAML,QAAA,CAASM,IAAI;YAC3C,IAAIF,IAAA,EAAM;gBACRD,UAAA,CAAWI,KAAK;YAClB,OAAO;gBACLJ,UAAA,CAAWK,OAAO,CAACH,KAAA;YACrB;QACF;IACF;AACF;AAEO,gBAAgBI,qBAAqBC,MAAqB;IAC/D,WAAW,MAAMC,KAAA,IAASD,MAAA,CAAQ;QAChC,MAAM,IAAIE,UAAA,CAAWD,KAAA;IACvB;AACF;AAEO,SAASE,WAAWC,IAAY;IACrC,MAAMC,UAAA,+FAAajB,UAAA,CAAGkB,gBAAgB,CAACF,IAAA;IACvC,MAAMG,IAAA,GAAuBlB,gBAAA,CAAiBU,oBAAA,CAAqBM,UAAA;IACnE,OAAOE,IAAA;AACT"}},
    {"offset": {"line": 2748, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2754, "column": 0}, "map": {"version":3,"file":"checkFileAccess.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/files/checkFileAccess.ts"],"sourcesContent":["import type { Collection, PayloadRequest, TypeWithID, Where } from 'payload'\n\nimport { executeAccess, Forbidden } from 'payload'\n\nimport { endpointsAreDisabled } from '../checkEndpoints.js'\n\nexport async function checkFileAccess({\n  collection,\n  filename,\n  req,\n}: {\n  collection: Collection\n  filename: string\n  req: PayloadRequest\n}): Promise<Response | TypeWithID> {\n  const { config } = collection\n  const disableEndpoints = endpointsAreDisabled({ endpoints: config.endpoints, request: req })\n  if (disableEndpoints) {\n    return disableEndpoints\n  }\n\n  if (filename.includes('../') || filename.includes('..\\\\')) {\n    throw new Forbidden(req.t)\n  }\n\n  const accessResult = await executeAccess({ isReadingStaticFile: true, req }, config.access.read)\n\n  if (typeof accessResult === 'object') {\n    const queryToBuild: Where = {\n      and: [\n        {\n          or: [\n            {\n              filename: {\n                equals: filename,\n              },\n            },\n          ],\n        },\n        accessResult,\n      ],\n    }\n\n    if (config.upload.imageSizes) {\n      config.upload.imageSizes.forEach(({ name }) => {\n        queryToBuild.and[0].or.push({\n          [`sizes.${name}.filename`]: {\n            equals: filename,\n          },\n        })\n      })\n    }\n\n    const doc = await req.payload.db.findOne({\n      collection: config.slug,\n      req,\n      where: queryToBuild,\n    })\n\n    if (!doc) {\n      throw new Forbidden(req.t)\n    }\n\n    return doc\n  }\n}\n"],"names":["executeAccess","Forbidden","endpointsAreDisabled","checkFileAccess","collection","filename","req","config","disableEndpoints","endpoints","request","includes","t","accessResult","isReadingStaticFile","access","read","queryToBuild","and","or","equals","upload","imageSizes","forEach","name","push","doc","payload","db","findOne","slug","where"],"mappings":";;;AAIA,SAASE,oBAAoB,QAAQ;AAFrC,SAASF,aAAa,EAAEC,SAAS,QAAQ;;;;AAIlC,eAAeE,gBAAgB,EACpCC,UAAU,EACVC,QAAQ,EACRC,GAAAA,EAKD;IACC,MAAM,EAAEC,MAAAA,EAAQ,GAAGH,UAAA;IACnB,MAAMI,gBAAA,0LAAmBN,uBAAAA,AAAA,EAAqB;QAAEO,SAAA,EAAWF,MAAA,CAAOE,SAAS;QAAEC,OAAA,EAASJ;IAAI;IAC1F,IAAIE,gBAAA,EAAkB;QACpB,OAAOA,gBAAA;IACT;IAEA,IAAIH,QAAA,CAASM,QAAQ,CAAC,UAAUN,QAAA,CAASM,QAAQ,CAAC,SAAS;QACzD,MAAM,IAAIV,qKAAA,CAAUK,GAAA,CAAIM,CAAC;IAC3B;IAEA,MAAMC,YAAA,GAAe,iNAAMb,gBAAAA,AAAA,EAAc;QAAEc,mBAAA,EAAqB;QAAMR;IAAI,GAAGC,MAAA,CAAOQ,MAAM,CAACC,IAAI;IAE/F,IAAI,OAAOH,YAAA,KAAiB,UAAU;QACpC,MAAMI,YAAA,GAAsB;YAC1BC,GAAA,EAAK;gBACH;oBACEC,EAAA,EAAI;wBACF;4BACEd,QAAA,EAAU;gCACRe,MAAA,EAAQf;4BACV;wBACF;qBAAA;gBAEJ;gBACAQ,YAAA;aAAA;QAEJ;QAEA,IAAIN,MAAA,CAAOc,MAAM,CAACC,UAAU,EAAE;YAC5Bf,MAAA,CAAOc,MAAM,CAACC,UAAU,CAACC,OAAO,CAAC,CAAC,EAAEC,IAAAA,EAAM;gBACxCP,YAAA,CAAaC,GAAG,CAAC,EAAE,CAACC,EAAE,CAACM,IAAI,CAAC;oBAC1B,CAAC,CAAA,MAAA,EAASD,IAAA,CAAA,SAAA,CAAe,CAAA,EAAG;wBAC1BJ,MAAA,EAAQf;oBACV;gBACF;YACF;QACF;QAEA,MAAMqB,GAAA,GAAM,MAAMpB,GAAA,CAAIqB,OAAO,CAACC,EAAE,CAACC,OAAO,CAAC;YACvCzB,UAAA,EAAYG,MAAA,CAAOuB,IAAI;YACvBxB,GAAA;YACAyB,KAAA,EAAOd;QACT;QAEA,IAAI,CAACS,GAAA,EAAK;YACR,MAAM,6JAAIzB,YAAA,CAAUK,GAAA,CAAIM,CAAC;QAC3B;QAEA,OAAOc,GAAA;IACT;AACF"}},
    {"offset": {"line": 2813, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2819, "column": 0}, "map": {"version":3,"file":"getFileTypeFallback.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/files/getFileTypeFallback.ts"],"sourcesContent":["type ReturnType = {\n  ext: string\n  mime: string\n}\n\nconst extensionMap: {\n  [ext: string]: string\n} = {\n  css: 'text/css',\n  csv: 'text/csv',\n  htm: 'text/html',\n  html: 'text/html',\n  js: 'application/javascript',\n  json: 'application/json',\n  md: 'text/markdown',\n  svg: 'image/svg+xml',\n  xml: 'application/xml',\n  yml: 'application/x-yaml',\n}\n\nexport const getFileTypeFallback = (path: string): ReturnType => {\n  const ext = path.split('.').pop() || 'txt'\n\n  return {\n    ext,\n    mime: extensionMap[ext] || 'text/plain',\n  }\n}\n"],"names":["extensionMap","css","csv","htm","html","js","json","md","svg","xml","yml","getFileTypeFallback","path","ext","split","pop","mime"],"mappings":";;;AAKA,MAAMA,YAAA,GAEF;IACFC,GAAA,EAAK;IACLC,GAAA,EAAK;IACLC,GAAA,EAAK;IACLC,IAAA,EAAM;IACNC,EAAA,EAAI;IACJC,IAAA,EAAM;IACNC,EAAA,EAAI;IACJC,GAAA,EAAK;IACLC,GAAA,EAAK;IACLC,GAAA,EAAK;AACP;AAEO,MAAMC,mBAAA,IAAuBC,IAAA;IAClC,MAAMC,GAAA,GAAMD,IAAA,CAAKE,KAAK,CAAC,KAAKC,GAAG,MAAM;IAErC,OAAO;QACLF,GAAA;QACAG,IAAA,EAAMhB,YAAY,CAACa,GAAA,CAAI,IAAI;IAC7B;AACF"}},
    {"offset": {"line": 2841, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2847, "column": 0}, "map": {"version":3,"file":"getFile.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/files/getFile.ts"],"sourcesContent":["import type { Collection, PayloadRequest } from 'payload'\n\nimport { fileTypeFromFile } from 'file-type'\nimport fsPromises from 'fs/promises'\nimport httpStatus from 'http-status'\nimport path from 'path'\nimport { APIError } from 'payload'\n\nimport { streamFile } from '../../../fetchAPI-stream-file/index.js'\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { routeError } from '../routeError.js'\nimport { checkFileAccess } from './checkFileAccess.js'\nimport { getFileTypeFallback } from './getFileTypeFallback.js'\n\n// /:collectionSlug/file/:filename\ntype Args = {\n  collection: Collection\n  filename: string\n  req: PayloadRequest\n}\nexport const getFile = async ({ collection, filename, req }: Args): Promise<Response> => {\n  try {\n    if (!collection.config.upload) {\n      throw new APIError(\n        `This collection is not an upload collection: ${collection.config.slug}`,\n        httpStatus.BAD_REQUEST,\n      )\n    }\n\n    const accessResult = await checkFileAccess({\n      collection,\n      filename,\n      req,\n    })\n\n    if (accessResult instanceof Response) {\n      return accessResult\n    }\n\n    if (collection.config.upload.handlers?.length) {\n      let customResponse = null\n      for (const handler of collection.config.upload.handlers) {\n        customResponse = await handler(req, {\n          doc: accessResult,\n          params: {\n            collection: collection.config.slug,\n            filename,\n          },\n        })\n      }\n\n      if (customResponse instanceof Response) {\n        return customResponse\n      }\n    }\n\n    const fileDir = collection.config.upload?.staticDir || collection.config.slug\n    const filePath = path.resolve(`${fileDir}/${filename}`)\n    const stats = await fsPromises.stat(filePath)\n    const data = streamFile(filePath)\n    const fileTypeResult = (await fileTypeFromFile(filePath)) || getFileTypeFallback(filePath)\n\n    let headers = new Headers()\n    headers.set('Content-Type', fileTypeResult.mime)\n    headers.set('Content-Length', stats.size + '')\n    headers = collection.config.upload?.modifyResponseHeaders\n      ? collection.config.upload.modifyResponseHeaders({ headers })\n      : headers\n\n    return new Response(data, {\n      headers: headersWithCors({\n        headers,\n        req,\n      }),\n      status: httpStatus.OK,\n    })\n  } catch (err) {\n    return routeError({\n      collection,\n      config: req.payload.config,\n      err,\n      req,\n    })\n  }\n}\n"],"names":["fileTypeFromFile","fsPromises","httpStatus","path","APIError","streamFile","headersWithCors","routeError","checkFileAccess","getFileTypeFallback","getFile","collection","filename","req","config","upload","slug","BAD_REQUEST","accessResult","Response","handlers","length","customResponse","handler","doc","params","fileDir","staticDir","filePath","resolve","stats","stat","data","fileTypeResult","headers","Headers","set","mime","size","modifyResponseHeaders","status","OK","err","payload"],"mappings":";;;AAGA,OAAOC,UAAA,MAAgB;AACvB,OAAOC,UAAA,MAAgB;AACvB,OAAOC,IAAA,MAAU;AAGjB,SAASE,UAAU,QAAQ;AAC3B,SAASC,eAAe,QAAQ;AAChC,SAASC,UAAU,QAAQ;AAC3B,SAASC,eAAe,QAAQ;AAChC,SAASC,mBAAmB,QAAQ;AANpC,SAASL,QAAQ,QAAQ;AAJzB,SAASJ,gBAAgB,QAAQ;;;;;;;;;;;AAkB1B,MAAMU,OAAA,GAAU,MAAAA,CAAO,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,GAAAA,EAAW;IAC/D,IAAI;QACF,IAAI,CAACF,UAAA,CAAWG,MAAM,CAACC,MAAM,EAAE;YAC7B,MAAM,4JAAIX,WAAA,CACR,CAAA,6CAAA,EAAgDO,UAAA,CAAWG,MAAM,CAACE,IAAI,EAAE,mJACxEd,UAAA,CAAWe,WAAW;QAE1B;QAEA,MAAMC,YAAA,GAAe,uMAAMV,kBAAAA,AAAA,EAAgB;YACzCG,UAAA;YACAC,QAAA;YACAC;QACF;QAEA,IAAIK,YAAA,YAAwBC,QAAA,EAAU;YACpC,OAAOD,YAAA;QACT;QAEA,IAAIP,UAAA,CAAWG,MAAM,CAACC,MAAM,CAACK,QAAQ,EAAEC,MAAA,EAAQ;YAC7C,IAAIC,cAAA,GAAiB;YACrB,KAAK,MAAMC,OAAA,IAAWZ,UAAA,CAAWG,MAAM,CAACC,MAAM,CAACK,QAAQ,CAAE;gBACvDE,cAAA,GAAiB,MAAMC,OAAA,CAAQV,GAAA,EAAK;oBAClCW,GAAA,EAAKN,YAAA;oBACLO,MAAA,EAAQ;wBACNd,UAAA,EAAYA,UAAA,CAAWG,MAAM,CAACE,IAAI;wBAClCJ;oBACF;gBACF;YACF;YAEA,IAAIU,cAAA,YAA0BH,QAAA,EAAU;gBACtC,OAAOG,cAAA;YACT;QACF;QAEA,MAAMI,OAAA,GAAUf,UAAA,CAAWG,MAAM,CAACC,MAAM,EAAEY,SAAA,IAAahB,UAAA,CAAWG,MAAM,CAACE,IAAI;QAC7E,MAAMY,QAAA,iGAAWzB,UAAA,CAAK0B,OAAO,CAAC,GAAGH,OAAA,CAAA,CAAA,EAAWd,QAAA,EAAU;QACtD,MAAMkB,KAAA,GAAQ,6GAAM7B,WAAA,CAAW8B,IAAI,CAACH,QAAA;QACpC,MAAMI,IAAA,6LAAO3B,aAAAA,AAAA,EAAWuB,QAAA;QACxB,MAAMK,cAAA,GAAiB,MAAOjC,+KAAAA,AAAA,EAAiB4B,QAAA,0MAAcnB,sBAAA,AAAAA,EAAoBmB,QAAA;QAEjF,IAAIM,OAAA,GAAU,IAAIC,OAAA;QAClBD,OAAA,CAAQE,GAAG,CAAC,gBAAgBH,cAAA,CAAeI,IAAI;QAC/CH,OAAA,CAAQE,GAAG,CAAC,kBAAkBN,KAAA,CAAMQ,IAAI,GAAG;QAC3CJ,OAAA,GAAUvB,UAAA,CAAWG,MAAM,CAACC,MAAM,EAAEwB,qBAAA,GAChC5B,UAAA,CAAWG,MAAM,CAACC,MAAM,CAACwB,qBAAqB,CAAC;YAAEL;QAAQ,KACzDA,OAAA;QAEJ,OAAO,IAAIf,QAAA,CAASa,IAAA,EAAM;YACxBE,OAAA,qLAAS5B,kBAAAA,AAAA,EAAgB;gBACvB4B,OAAA;gBACArB;YACF;YACA2B,MAAA,kJAAQtC,WAAA,CAAWuC,EAAAA;QACrB;IACF,EAAE,OAAOC,GAAA,EAAK;QACZ,0LAAOnC,aAAAA,AAAA,EAAW;YAChBI,UAAA;YACAG,MAAA,EAAQD,GAAA,CAAI8B,OAAO,CAAC7B,MAAM;YAC1B4B,GAAA;YACA7B;QACF;IACF;AACF"}},
    {"offset": {"line": 2925, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2931, "column": 0}, "map": {"version":3,"file":"docAccess.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/globals/docAccess.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { docAccessOperationGlobal } from 'payload'\n\nimport type { GlobalRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const docAccess: GlobalRouteHandler = async ({ globalConfig, req }) => {\n  const result = await docAccessOperationGlobal({\n    globalConfig,\n    req,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","docAccessOperationGlobal","headersWithCors","docAccess","globalConfig","req","result","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAKvB,SAASE,eAAe,QAAQ;AAJhC,SAASD,wBAAwB,QAAQ;;;;AAMlC,MAAME,SAAA,GAAgC,MAAAA,CAAO,EAAEC,YAAY,EAAEC,GAAAA,EAAK;IACvE,MAAMC,MAAA,GAAS,oPAAML,2BAAAA,AAAA,EAAyB;QAC5CG,YAAA;QACAC;IACF;IAEA,OAAOE,QAAA,CAASC,IAAI,CAACF,MAAA,EAAQ;QAC3BG,OAAA,qLAASP,kBAAAA,AAAA,EAAgB;YACvBO,OAAA,EAAS,IAAIC,OAAA;YACbL;QACF;QACAM,MAAA,mJAAQX,UAAA,CAAWY,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 2953, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2959, "column": 0}, "map": {"version":3,"file":"findOne.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/globals/findOne.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { findOneOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { GlobalRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const findOne: GlobalRouteHandler = async ({ globalConfig, req }) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n\n  const result = await findOneOperation({\n    slug: globalConfig.slug,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: searchParams.get('draft') === 'true',\n    globalConfig,\n    req,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","findOneOperation","isNumber","headersWithCors","findOne","globalConfig","req","searchParams","depth","get","result","slug","Number","undefined","draft","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AALhC,SAASF,gBAAgB,QAAQ;AACjC,SAASC,QAAQ,QAAQ;;;;;AAMlB,MAAME,OAAA,GAA8B,MAAAA,CAAO,EAAEC,YAAY,EAAEC,GAAAA,EAAK;IACrE,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAE/B,MAAMC,MAAA,GAAS,gLAAMT,mBAAAA,AAAA,EAAiB;QACpCU,IAAA,EAAMN,YAAA,CAAaM,IAAI;QACvBH,KAAA,iKAAON,WAAAA,AAAA,EAASM,KAAA,IAASI,MAAA,CAAOJ,KAAA,IAASK,SAAA;QACzCC,KAAA,EAAOP,YAAA,CAAaE,GAAG,CAAC,aAAa;QACrCJ,YAAA;QACAC;IACF;IAEA,OAAOS,QAAA,CAASC,IAAI,CAACN,MAAA,EAAQ;QAC3BO,OAAA,qLAASd,kBAAAA,AAAA,EAAgB;YACvBc,OAAA,EAAS,IAAIC,OAAA;YACbZ;QACF;QACAa,MAAA,mJAAQnB,UAAA,CAAWoB,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 2988, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2994, "column": 0}, "map": {"version":3,"file":"findVersionByID.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/globals/findVersionByID.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { findVersionByIDOperationGlobal } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { GlobalRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const findVersionByID: GlobalRouteHandlerWithID = async ({ id, globalConfig, req }) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n\n  const result = await findVersionByIDOperationGlobal({\n    id,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    globalConfig,\n    req,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","findVersionByIDOperationGlobal","isNumber","headersWithCors","findVersionByID","id","globalConfig","req","searchParams","depth","get","result","Number","undefined","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AALhC,SAASF,8BAA8B,QAAQ;AAC/C,SAASC,QAAQ,QAAQ;;;;;AAMlB,MAAME,eAAA,GAA4C,MAAAA,CAAO,EAAEC,EAAE,EAAEC,YAAY,EAAEC,GAAAA,EAAK;IACvF,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAE/B,MAAMC,MAAA,GAAS,sQAAMV,iCAAAA,AAAA,EAA+B;QAClDI,EAAA;QACAI,KAAA,GAAOP,yKAAAA,AAAA,EAASO,KAAA,IAASG,MAAA,CAAOH,KAAA,IAASI,SAAA;QACzCP,YAAA;QACAC;IACF;IAEA,OAAOO,QAAA,CAASC,IAAI,CAACJ,MAAA,EAAQ;QAC3BK,OAAA,qLAASb,kBAAAA,AAAA,EAAgB;YACvBa,OAAA,EAAS,IAAIC,OAAA;YACbV;QACF;QACAW,MAAA,mJAAQlB,UAAA,CAAWmB,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 3022, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3028, "column": 0}, "map": {"version":3,"file":"findVersions.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/globals/findVersions.ts"],"sourcesContent":["import type { Where } from 'payload'\n\nimport httpStatus from 'http-status'\nimport { findVersionsOperationGlobal } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { GlobalRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const findVersions: GlobalRouteHandler = async ({ globalConfig, req }) => {\n  const { depth, limit, page, sort, where } = req.query as {\n    depth?: string\n    limit?: string\n    page?: string\n    sort?: string\n    where?: Where\n  }\n\n  const result = await findVersionsOperationGlobal({\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    globalConfig,\n    limit: isNumber(limit) ? Number(limit) : undefined,\n    page: isNumber(page) ? Number(page) : undefined,\n    req,\n    sort: typeof sort === 'string' ? sort.split(',') : undefined,\n    where,\n  })\n\n  return Response.json(result, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","findVersionsOperationGlobal","isNumber","headersWithCors","findVersions","globalConfig","req","depth","limit","page","sort","where","query","result","Number","undefined","split","Response","json","headers","Headers","status","OK"],"mappings":";;;AAEA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AALhC,SAASF,2BAA2B,QAAQ;AAC5C,SAASC,QAAQ,QAAQ;;;;;AAMlB,MAAME,YAAA,GAAmC,MAAAA,CAAO,EAAEC,YAAY,EAAEC,GAAAA,EAAK;IAC1E,MAAM,EAAEC,KAAK,EAAEC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,KAAAA,EAAO,GAAGL,GAAA,CAAIM,KAAK;IAQrD,MAAMC,MAAA,GAAS,6PAAMZ,8BAAAA,AAAA,EAA4B;QAC/CM,KAAA,iKAAOL,WAAAA,AAAA,EAASK,KAAA,IAASO,MAAA,CAAOP,KAAA,IAASQ,SAAA;QACzCV,YAAA;QACAG,KAAA,iKAAON,WAAAA,AAAA,EAASM,KAAA,IAASM,MAAA,CAAON,KAAA,IAASO,SAAA;QACzCN,IAAA,iKAAMP,WAAAA,AAAA,EAASO,IAAA,IAAQK,MAAA,CAAOL,IAAA,IAAQM,SAAA;QACtCT,GAAA;QACAI,IAAA,EAAM,OAAOA,IAAA,KAAS,WAAWA,IAAA,CAAKM,KAAK,CAAC,OAAOD,SAAA;QACnDJ;IACF;IAEA,OAAOM,QAAA,CAASC,IAAI,CAACL,MAAA,EAAQ;QAC3BM,OAAA,qLAAShB,kBAAA,AAAAA,EAAgB;YACvBgB,OAAA,EAAS,IAAIC,OAAA;YACbd;QACF;QACAe,MAAA,mJAAQrB,UAAA,CAAWsB,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 3058, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3064, "column": 0}, "map": {"version":3,"file":"preview.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/globals/preview.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { extractJWT, findOneOperation } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { GlobalRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\nimport { routeError } from '../routeError.js'\n\nexport const preview: GlobalRouteHandler = async ({ globalConfig, req }) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n\n  const result = await findOneOperation({\n    slug: globalConfig.slug,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: searchParams.get('draft') === 'true',\n    globalConfig,\n    req,\n  })\n\n  let previewURL: string\n\n  const generatePreviewURL = req.payload.config.globals.find(\n    (config) => config.slug === globalConfig.slug,\n  )?.admin?.preview\n\n  const token = extractJWT(req)\n\n  if (typeof generatePreviewURL === 'function') {\n    try {\n      previewURL = await generatePreviewURL(result, {\n        locale: req.locale,\n        req,\n        token,\n      })\n    } catch (err) {\n      return routeError({\n        config: req.payload.config,\n        err,\n        req,\n      })\n    }\n  }\n\n  return Response.json(previewURL, {\n    headers: headersWithCors({\n      headers: new Headers(),\n      req,\n    }),\n    status: httpStatus.OK,\n  })\n}\n"],"names":["httpStatus","extractJWT","findOneOperation","isNumber","headersWithCors","routeError","preview","globalConfig","req","searchParams","depth","get","result","slug","Number","undefined","draft","previewURL","generatePreviewURL","payload","config","globals","find","admin","token","locale","err","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASI,eAAe,QAAQ;AAChC,SAASC,UAAU,QAAQ;;AAL3B,SAASF,QAAQ,QAAQ;AADzB,SAASF,UAAU,EAAEC,gBAAgB,QAAQ;;;;;;AAQtC,MAAMI,OAAA,GAA8B,MAAAA,CAAO,EAAEC,YAAY,EAAEC,GAAAA,EAAK;IACrE,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAE/B,MAAMC,MAAA,GAAS,gLAAMV,mBAAAA,AAAA,EAAiB;QACpCW,IAAA,EAAMN,YAAA,CAAaM,IAAI;QACvBH,KAAA,iKAAOP,WAAAA,AAAA,EAASO,KAAA,IAASI,MAAA,CAAOJ,KAAA,IAASK,SAAA;QACzCC,KAAA,EAAOP,YAAA,CAAaE,GAAG,CAAC,aAAa;QACrCJ,YAAA;QACAC;IACF;IAEA,IAAIS,UAAA;IAEJ,MAAMC,kBAAA,GAAqBV,GAAA,CAAIW,OAAO,CAACC,MAAM,CAACC,OAAO,CAACC,IAAI,EACvDF,MAAA,GAAWA,MAAA,CAAOP,IAAI,KAAKN,YAAA,CAAaM,IAAI,GAC5CU,KAAA,EAAOjB,OAAA;IAEV,MAAMkB,KAAA,IAAQvB,wKAAAA,AAAA,EAAWO,GAAA;IAEzB,IAAI,OAAOU,kBAAA,KAAuB,YAAY;QAC5C,IAAI;YACFD,UAAA,GAAa,MAAMC,kBAAA,CAAmBN,MAAA,EAAQ;gBAC5Ca,MAAA,EAAQjB,GAAA,CAAIiB,MAAM;gBAClBjB,GAAA;gBACAgB;YACF;QACF,EAAE,OAAOE,GAAA,EAAK;YACZ,0LAAOrB,aAAAA,AAAA,EAAW;gBAChBe,MAAA,EAAQZ,GAAA,CAAIW,OAAO,CAACC,MAAM;gBAC1BM,GAAA;gBACAlB;YACF;QACF;IACF;IAEA,OAAOmB,QAAA,CAASC,IAAI,CAACX,UAAA,EAAY;QAC/BY,OAAA,EAASzB,qMAAAA,AAAA,EAAgB;YACvByB,OAAA,EAAS,IAAIC,OAAA;YACbtB;QACF;QACAuB,MAAA,mJAAQ/B,UAAA,CAAWgC,EAAAA;IACrB;AACF"}},
    {"offset": {"line": 3114, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3120, "column": 0}, "map": {"version":3,"file":"restoreVersion.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/globals/restoreVersion.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { restoreVersionOperationGlobal } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { GlobalRouteHandlerWithID } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const restoreVersion: GlobalRouteHandlerWithID = async ({ id, globalConfig, req }) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n  const draft = searchParams.get('draft')\n\n  const doc = await restoreVersionOperationGlobal({\n    id,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft: draft === 'true' ? true : undefined,\n    globalConfig,\n    req,\n  })\n\n  return Response.json(\n    {\n      doc,\n      message: req.t('version:restoredSuccessfully'),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","restoreVersionOperationGlobal","isNumber","headersWithCors","restoreVersion","id","globalConfig","req","searchParams","depth","get","draft","doc","Number","undefined","Response","json","message","t","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AALhC,SAASF,6BAA6B,QAAQ;AAC9C,SAASC,QAAQ,QAAQ;;;;;AAMlB,MAAME,cAAA,GAA2C,MAAAA,CAAO,EAAEC,EAAE,EAAEC,YAAY,EAAEC,GAAAA,EAAK;IACtF,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAC/B,MAAMC,KAAA,GAAQH,YAAA,CAAaE,GAAG,CAAC;IAE/B,MAAME,GAAA,GAAM,mQAAMX,gCAAAA,AAAA,EAA8B;QAC9CI,EAAA;QACAI,KAAA,iKAAOP,WAAA,AAAAA,EAASO,KAAA,IAASI,MAAA,CAAOJ,KAAA,IAASK,SAAA;QACzCH,KAAA,EAAOA,KAAA,KAAU,SAAS,OAAOG,SAAA;QACjCR,YAAA;QACAC;IACF;IAEA,OAAOQ,QAAA,CAASC,IAAI,CAClB;QACEJ,GAAA;QACAK,OAAA,EAASV,GAAA,CAAIW,CAAC,CAAC;IACjB,GACA;QACEC,OAAA,qLAAShB,kBAAAA,AAAA,EAAgB;YACvBgB,OAAA,EAAS,IAAIC,OAAA;YACbb;QACF;QACAc,MAAA,mJAAQrB,UAAA,CAAWsB,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 3153, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3159, "column": 0}, "map": {"version":3,"file":"update.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/globals/update.ts"],"sourcesContent":["import httpStatus from 'http-status'\nimport { updateOperationGlobal } from 'payload'\nimport { isNumber } from 'payload/shared'\n\nimport type { GlobalRouteHandler } from '../types.js'\n\nimport { headersWithCors } from '../../../utilities/headersWithCors.js'\n\nexport const update: GlobalRouteHandler = async ({ globalConfig, req }) => {\n  const { searchParams } = req\n  const depth = searchParams.get('depth')\n  const draft = searchParams.get('draft') === 'true'\n  const autosave = searchParams.get('autosave') === 'true'\n  const publishSpecificLocale = req.query.publishSpecificLocale as string | undefined\n\n  const result = await updateOperationGlobal({\n    slug: globalConfig.slug,\n    autosave,\n    data: req.data,\n    depth: isNumber(depth) ? Number(depth) : undefined,\n    draft,\n    globalConfig,\n    publishSpecificLocale,\n    req,\n  })\n\n  let message = req.t('general:updatedSuccessfully')\n\n  if (draft) {\n    message = req.t('version:draftSavedSuccessfully')\n  }\n  if (autosave) {\n    message = req.t('version:autosavedSuccessfully')\n  }\n\n  return Response.json(\n    {\n      message,\n      result,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["httpStatus","updateOperationGlobal","isNumber","headersWithCors","update","globalConfig","req","searchParams","depth","get","draft","autosave","publishSpecificLocale","query","result","slug","data","Number","undefined","message","t","Response","json","headers","Headers","status","OK"],"mappings":";;;AAAA,OAAOA,UAAA,MAAgB;AAMvB,SAASG,eAAe,QAAQ;AALhC,SAASF,qBAAqB,QAAQ;AACtC,SAASC,QAAQ,QAAQ;;;;;AAMlB,MAAME,MAAA,GAA6B,MAAAA,CAAO,EAAEC,YAAY,EAAEC,GAAAA,EAAK;IACpE,MAAM,EAAEC,YAAAA,EAAc,GAAGD,GAAA;IACzB,MAAME,KAAA,GAAQD,YAAA,CAAaE,GAAG,CAAC;IAC/B,MAAMC,KAAA,GAAQH,YAAA,CAAaE,GAAG,CAAC,aAAa;IAC5C,MAAME,QAAA,GAAWJ,YAAA,CAAaE,GAAG,CAAC,gBAAgB;IAClD,MAAMG,qBAAA,GAAwBN,GAAA,CAAIO,KAAK,CAACD,qBAAqB;IAE7D,MAAME,MAAA,GAAS,2OAAMb,wBAAA,AAAAA,EAAsB;QACzCc,IAAA,EAAMV,YAAA,CAAaU,IAAI;QACvBJ,QAAA;QACAK,IAAA,EAAMV,GAAA,CAAIU,IAAI;QACdR,KAAA,iKAAON,WAAAA,AAAA,EAASM,KAAA,IAASS,MAAA,CAAOT,KAAA,IAASU,SAAA;QACzCR,KAAA;QACAL,YAAA;QACAO,qBAAA;QACAN;IACF;IAEA,IAAIa,OAAA,GAAUb,GAAA,CAAIc,CAAC,CAAC;IAEpB,IAAIV,KAAA,EAAO;QACTS,OAAA,GAAUb,GAAA,CAAIc,CAAC,CAAC;IAClB;IACA,IAAIT,QAAA,EAAU;QACZQ,OAAA,GAAUb,GAAA,CAAIc,CAAC,CAAC;IAClB;IAEA,OAAOC,QAAA,CAASC,IAAI,CAClB;QACEH,OAAA;QACAL;IACF,GACA;QACES,OAAA,qLAASpB,kBAAAA,AAAA,EAAgB;YACvBoB,OAAA,EAAS,IAAIC,OAAA;YACblB;QACF;QACAmB,MAAA,mJAAQzB,UAAA,CAAW0B,EAAAA;IACrB;AAEJ"}},
    {"offset": {"line": 3204, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3210, "column": 0}, "map": {"version":3,"file":"image.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/og/image.tsx"],"sourcesContent":["import type { MappedComponent } from 'payload'\n\nimport { RenderComponent } from '@payloadcms/ui/shared'\nimport React from 'react'\n\nexport const OGImage: React.FC<{\n  description?: string\n  fontFamily?: string\n  Icon: MappedComponent\n  leader?: string\n  title?: string\n}> = ({ description, fontFamily = 'Arial, sans-serif', Icon, leader, title }) => {\n  return (\n    <div\n      style={{\n        backgroundColor: '#000',\n        color: '#fff',\n        display: 'flex',\n        flexDirection: 'column',\n        fontFamily,\n        height: '100%',\n        justifyContent: 'space-between',\n        padding: '100px',\n        width: '100%',\n      }}\n    >\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          flexGrow: 1,\n          fontSize: 50,\n          height: '100%',\n        }}\n      >\n        {leader && (\n          <div\n            style={{\n              fontSize: 30,\n              marginBottom: 10,\n            }}\n          >\n            {leader}\n          </div>\n        )}\n        <p\n          style={{\n            display: '-webkit-box',\n            fontSize: 90,\n            lineHeight: 1,\n            marginBottom: 0,\n            marginTop: 0,\n            textOverflow: 'ellipsis',\n            WebkitBoxOrient: 'vertical',\n            WebkitLineClamp: 2,\n          }}\n        >\n          {title}\n        </p>\n        {description && (\n          <p\n            style={{\n              display: '-webkit-box',\n              flexGrow: 1,\n              fontSize: 30,\n              lineHeight: 1,\n              marginBottom: 0,\n              marginTop: 40,\n              textOverflow: 'ellipsis',\n              WebkitBoxOrient: 'vertical',\n              WebkitLineClamp: 2,\n            }}\n          >\n            {description}\n          </p>\n        )}\n      </div>\n      <div\n        style={{\n          alignItems: 'flex-end',\n          display: 'flex',\n          flexShrink: 0,\n          height: '38px',\n          justifyContent: 'center',\n          width: '38px',\n        }}\n      >\n        <RenderComponent\n          clientProps={{\n            fill: 'white',\n          }}\n          mappedComponent={Icon}\n        />\n      </div>\n    </div>\n  )\n}\n"],"names":["RenderComponent","React","OGImage","description","fontFamily","Icon","leader","title","_jsxs","style","backgroundColor","color","display","flexDirection","height","justifyContent","padding","width","flexGrow","fontSize","_jsx","marginBottom","lineHeight","marginTop","textOverflow","WebkitBoxOrient","WebkitLineClamp","alignItems","flexShrink","clientProps","fill","mappedComponent"],"mappings":";;;;AAGA,OAAOC,KAAA,MAAW;AADlB,SAASD,eAAe,QAAQ;;;;AAGzB,MAAME,OAAA,GAMRA,CAAC,EAAEC,WAAW,EAAEC,UAAA,GAAa,mBAAmB,EAAEC,IAAI,EAAEC,MAAM,EAAEC,KAAAA,EAAO;IAC1E,OAAA,WAAA,GACEC,qOAAAA,AAAA,EAAC,OAAA;QACCC,KAAA,EAAO;YACLC,eAAA,EAAiB;YACjBC,KAAA,EAAO;YACPC,OAAA,EAAS;YACTC,aAAA,EAAe;YACfT,UAAA;YACAU,MAAA,EAAQ;YACRC,cAAA,EAAgB;YAChBC,OAAA,EAAS;YACTC,KAAA,EAAO;QACT;;wPAEAT,OAAAA,AAAA,EAAC,OAAA;gBACCC,KAAA,EAAO;oBACLG,OAAA,EAAS;oBACTC,aAAA,EAAe;oBACfK,QAAA,EAAU;oBACVC,QAAA,EAAU;oBACVL,MAAA,EAAQ;gBACV;;oBAECR,MAAA,IAAA,WAAA,iOACCc,MAAAA,AAAA,EAAC,OAAA;wBACCX,KAAA,EAAO;4BACLU,QAAA,EAAU;4BACVE,YAAA,EAAc;wBAChB;kCAECf;;gQAGLc,MAAAA,AAAA,EAAC,KAAA;wBACCX,KAAA,EAAO;4BACLG,OAAA,EAAS;4BACTO,QAAA,EAAU;4BACVG,UAAA,EAAY;4BACZD,YAAA,EAAc;4BACdE,SAAA,EAAW;4BACXC,YAAA,EAAc;4BACdC,eAAA,EAAiB;4BACjBC,eAAA,EAAiB;wBACnB;kCAECnB;;oBAEFJ,WAAA,IAAA,WAAA,iOACCiB,MAAAA,AAAA,EAAC,KAAA;wBACCX,KAAA,EAAO;4BACLG,OAAA,EAAS;4BACTM,QAAA,EAAU;4BACVC,QAAA,EAAU;4BACVG,UAAA,EAAY;4BACZD,YAAA,EAAc;4BACdE,SAAA,EAAW;4BACXC,YAAA,EAAc;4BACdC,eAAA,EAAiB;4BACjBC,eAAA,EAAiB;wBACnB;kCAECvB;;;;2BAIPiB,mOAAAA,AAAA,EAAC,OAAA;gBACCX,KAAA,EAAO;oBACLkB,UAAA,EAAY;oBACZf,OAAA,EAAS;oBACTgB,UAAA,EAAY;oBACZd,MAAA,EAAQ;oBACRC,cAAA,EAAgB;oBAChBE,KAAA,EAAO;gBACT;0BAEA,WAAA,iOAAAG,MAAAA,AAAA,6KAACpB,kBAAA,EAAA;oBACC6B,WAAA,EAAa;wBACXC,IAAA,EAAM;oBACR;oBACAC,eAAA,EAAiB1B;;;;;AAK3B"}},
    {"offset": {"line": 3297, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3303, "column": 0}, "map": {"version":3,"file":"index.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/og/index.tsx"],"sourcesContent":["import type { PayloadRequest } from 'payload'\n\nimport { getCreateMappedComponent, PayloadIcon } from '@payloadcms/ui/shared'\nimport fs from 'fs/promises'\nimport { ImageResponse } from 'next/og.js'\nimport { NextResponse } from 'next/server.js'\nimport path from 'path'\nimport React from 'react'\nimport { fileURLToPath } from 'url'\n\nimport { OGImage } from './image.js'\n\nconst filename = fileURLToPath(import.meta.url)\nconst dirname = path.dirname(filename)\n\nexport const runtime = 'nodejs'\n\nexport const contentType = 'image/png'\n\nexport const generateOGImage = async ({ req }: { req: PayloadRequest }) => {\n  const config = req.payload.config\n\n  if (config.admin.meta.defaultOGImageType === 'off') {\n    return NextResponse.json({ error: `Open Graph images are disabled` }, { status: 400 })\n  }\n\n  try {\n    const { searchParams } = new URL(req.url)\n\n    const hasTitle = searchParams.has('title')\n    const title = hasTitle ? searchParams.get('title')?.slice(0, 100) : ''\n    const hasLeader = searchParams.has('leader')\n    const leader = hasLeader ? searchParams.get('leader')?.slice(0, 100).replace('-', ' ') : ''\n    const description = searchParams.has('description') ? searchParams.get('description') : ''\n\n    const createMappedComponent = getCreateMappedComponent({\n      importMap: req.payload.importMap,\n      serverProps: {},\n    })\n\n    const mappedIcon = createMappedComponent(\n      config.admin?.components?.graphics?.Icon,\n      undefined,\n      PayloadIcon,\n      'config.admin.components.graphics.Icon',\n    )\n\n    let fontData\n\n    try {\n      // TODO: replace with `.woff2` file when supported\n      // See https://github.com/vercel/next.js/issues/63935\n      // Or better yet, use a CDN like Google Fonts if ever supported\n      fontData = fs.readFile(path.join(dirname, 'roboto-regular.woff'))\n    } catch (e) {\n      console.error(`Error reading font file or not readable: ${e.message}`) // eslint-disable-line no-console\n    }\n\n    const fontFamily = 'Roboto, sans-serif'\n\n    return new ImageResponse(\n      (\n        <OGImage\n          description={description}\n          fontFamily={fontFamily}\n          Icon={mappedIcon}\n          leader={leader}\n          title={title}\n        />\n      ),\n      {\n        ...(fontData\n          ? {\n              fonts: [\n                {\n                  name: 'Roboto',\n                  data: await fontData,\n                  style: 'normal',\n                  weight: 400,\n                },\n              ],\n            }\n          : {}),\n        height: 630,\n        width: 1200,\n      },\n    )\n  } catch (e: any) {\n    console.error(`${e.message}`) // eslint-disable-line no-console\n    return NextResponse.json({ error: `Internal Server Error: ${e.message}` }, { status: 500 })\n  }\n}\n"],"names":["getCreateMappedComponent","PayloadIcon","fs","ImageResponse","NextResponse","path","React","fileURLToPath","OGImage","filename","import","meta","url","dirname","runtime","contentType","generateOGImage","req","config","payload","admin","defaultOGImageType","json","error","status","searchParams","URL","hasTitle","has","title","get","slice","hasLeader","leader","replace","description","createMappedComponent","importMap","serverProps","mappedIcon","components","graphics","Icon","undefined","fontData","readFile","join","e","console","message","fontFamily","_jsx","fonts","name","data","style","weight","height","width"],"mappings":"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"}},
    {"offset": {"line": 3397, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3403, "column": 0}, "map": {"version":3,"file":"index.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/routes/rest/index.ts"],"sourcesContent":["import type { Collection, Endpoint, GlobalConfig, PayloadRequest, SanitizedConfig } from 'payload'\n\nimport httpStatus from 'http-status'\nimport { match } from 'path-to-regexp'\n\nimport type {\n  CollectionRouteHandler,\n  CollectionRouteHandlerWithID,\n  GlobalRouteHandler,\n  GlobalRouteHandlerWithID,\n} from './types.js'\n\nimport { addDataAndFileToRequest } from '../../utilities/addDataAndFileToRequest.js'\nimport { addLocalesToRequestFromData } from '../../utilities/addLocalesToRequest.js'\nimport { createPayloadRequest } from '../../utilities/createPayloadRequest.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { mergeHeaders } from '../../utilities/mergeHeaders.js'\nimport { access } from './auth/access.js'\nimport { forgotPassword } from './auth/forgotPassword.js'\nimport { init } from './auth/init.js'\nimport { login } from './auth/login.js'\nimport { logout } from './auth/logout.js'\nimport { me } from './auth/me.js'\nimport { refresh } from './auth/refresh.js'\nimport { registerFirstUser } from './auth/registerFirstUser.js'\nimport { resetPassword } from './auth/resetPassword.js'\nimport { unlock } from './auth/unlock.js'\nimport { verifyEmail } from './auth/verifyEmail.js'\nimport { buildFormState } from './buildFormState.js'\nimport { endpointsAreDisabled } from './checkEndpoints.js'\nimport { count } from './collections/count.js'\nimport { create } from './collections/create.js'\nimport { deleteDoc } from './collections/delete.js'\nimport { deleteByID } from './collections/deleteByID.js'\nimport { docAccess } from './collections/docAccess.js'\nimport { duplicate } from './collections/duplicate.js'\nimport { find } from './collections/find.js'\nimport { findByID } from './collections/findByID.js'\nimport { findVersionByID } from './collections/findVersionByID.js'\nimport { findVersions } from './collections/findVersions.js'\nimport { preview as previewCollection } from './collections/preview.js'\nimport { restoreVersion } from './collections/restoreVersion.js'\nimport { update } from './collections/update.js'\nimport { updateByID } from './collections/updateByID.js'\nimport { getFile } from './files/getFile.js'\nimport { docAccess as docAccessGlobal } from './globals/docAccess.js'\nimport { findOne } from './globals/findOne.js'\nimport { findVersionByID as findVersionByIdGlobal } from './globals/findVersionByID.js'\nimport { findVersions as findVersionsGlobal } from './globals/findVersions.js'\nimport { preview as previewGlobal } from './globals/preview.js'\nimport { restoreVersion as restoreVersionGlobal } from './globals/restoreVersion.js'\nimport { update as updateGlobal } from './globals/update.js'\nimport { generateOGImage } from './og/index.js'\nimport { routeError } from './routeError.js'\n\nconst endpoints = {\n  collection: {\n    DELETE: {\n      delete: deleteDoc,\n      deleteByID,\n    },\n    GET: {\n      count,\n      'doc-access-by-id': docAccess,\n      'doc-versions-by-id': findVersionByID,\n      find,\n      findByID,\n      getFile,\n      init,\n      me,\n      preview: previewCollection,\n      versions: findVersions,\n    },\n    PATCH: {\n      update,\n      updateByID,\n    },\n    POST: {\n      access: docAccess,\n      create,\n      'doc-access-by-id': docAccess,\n      'doc-verify-by-id': verifyEmail,\n      'doc-versions-by-id': restoreVersion,\n      duplicate,\n      'first-register': registerFirstUser,\n      'forgot-password': forgotPassword,\n      login,\n      logout,\n      'refresh-token': refresh,\n      'reset-password': resetPassword,\n      unlock,\n    },\n  },\n  global: {\n    GET: {\n      'doc-access': docAccessGlobal,\n      'doc-versions': findVersionsGlobal,\n      'doc-versions-by-id': findVersionByIdGlobal,\n      findOne,\n      preview: previewGlobal,\n    },\n    POST: {\n      'doc-access': docAccessGlobal,\n      'doc-versions-by-id': restoreVersionGlobal,\n      update: updateGlobal,\n    },\n  },\n  root: {\n    GET: {\n      access,\n      og: generateOGImage,\n    },\n    POST: {\n      'form-state': buildFormState,\n    },\n  },\n}\n\nconst handleCustomEndpoints = async ({\n  endpoints,\n  entitySlug,\n  req,\n}: {\n  endpoints: Endpoint[] | GlobalConfig['endpoints']\n  entitySlug?: string\n  req: PayloadRequest\n}): Promise<Response> => {\n  if (endpoints && endpoints.length > 0) {\n    let handlerParams = {}\n    const { pathname } = req\n\n    /*\n     * This makes sure the next.js basePath property is supported. If basePath is used, payload config.routes.api should include it. This makes all outgoing frontend request\n     * target the correct API endpoint starting with basePath, which is good!\n     *\n     * The incoming request (here) will not include the basePath though, as it's automatically stripped by Next.js. Since we are adding the basePath to the pathPrefix below though\n     * (from req.payload.config.routes.api) we need to add it to pathname, which does not contain the basePath. Otherwise, no endpoint will be matched if basePath is set.\n     */\n    let adjustedPathname = pathname\n\n    if (process.env.NEXT_BASE_PATH) {\n      adjustedPathname = process.env.NEXT_BASE_PATH + pathname\n    }\n\n    const pathPrefix = req.payload.config.routes.api + (entitySlug ? `/${entitySlug}` : '')\n\n    const customEndpoint = endpoints.find((endpoint) => {\n      if (endpoint.method === req.method.toLowerCase()) {\n        const pathMatchFn = match(`${pathPrefix}${endpoint.path}`, {\n          decode: decodeURIComponent,\n        })\n\n        const tempParams = pathMatchFn(adjustedPathname)\n        if (tempParams) {\n          handlerParams = tempParams.params\n          return true\n        }\n      }\n    })\n\n    if (customEndpoint) {\n      req.routeParams = {\n        ...req.routeParams,\n        ...handlerParams,\n      }\n      const res = await customEndpoint.handler(req)\n\n      if (res instanceof Response) {\n        if (req.responseHeaders) {\n          const mergedResponse = new Response(res.body, {\n            headers: mergeHeaders(req.responseHeaders, res.headers),\n            status: res.status,\n            statusText: res.statusText,\n          })\n\n          return mergedResponse\n        }\n\n        return res\n      }\n    }\n  }\n\n  return null\n}\n\nconst RouteNotFoundResponse = ({ slug, req }: { req: PayloadRequest; slug: string[] }) =>\n  Response.json(\n    {\n      message: `Route Not Found: \"${slug.join('/')}\"`,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.NOT_FOUND,\n    },\n  )\n\nexport const OPTIONS =\n  (config: Promise<SanitizedConfig> | SanitizedConfig) => async (request: Request) => {\n    let req: PayloadRequest\n\n    try {\n      req = await createPayloadRequest({\n        config,\n        request,\n      })\n\n      return Response.json(\n        {},\n        {\n          headers: headersWithCors({\n            headers: new Headers(),\n            req,\n          }),\n          status: 200,\n        },\n      )\n    } catch (error) {\n      return routeError({\n        config,\n        err: error,\n        req: req || request,\n      })\n    }\n  }\n\nexport const GET =\n  (config: Promise<SanitizedConfig> | SanitizedConfig) =>\n  async (request: Request, { params: paramsPromise }: { params: Promise<{ slug: string[] }> }) => {\n    const { slug } = await paramsPromise\n    const [slug1, slug2, slug3, slug4] = slug\n    let req: PayloadRequest\n    let res: Response\n    let collection: Collection\n\n    try {\n      req = await createPayloadRequest({\n        config,\n        request,\n      })\n\n      const disableEndpoints = endpointsAreDisabled({\n        endpoints: req.payload.config.endpoints,\n        request,\n      })\n\n      if (disableEndpoints) {\n        return disableEndpoints\n      }\n\n      collection = req.payload.collections?.[slug1]\n\n      if (collection) {\n        req.routeParams.collection = slug1\n        const disableEndpoints = endpointsAreDisabled({\n          endpoints: collection.config.endpoints,\n          request,\n        })\n        if (disableEndpoints) {\n          return disableEndpoints\n        }\n\n        const customEndpointResponse = await handleCustomEndpoints({\n          endpoints: collection.config.endpoints,\n          entitySlug: slug1,\n          req,\n        })\n\n        if (customEndpointResponse) {\n          return customEndpointResponse\n        } else {\n          await addDataAndFileToRequest(req)\n          addLocalesToRequestFromData(req)\n\n          switch (slug.length) {\n            case 1:\n              // /:collection\n              res = await endpoints.collection.GET.find({ collection, req })\n              break\n            case 2:\n              if (slug2 in endpoints.collection.GET) {\n                // /:collection/init\n                // /:collection/me\n                // /:collection/versions\n                // /:collection/count\n                res = await (endpoints.collection.GET[slug2] as CollectionRouteHandler)({\n                  collection,\n                  req,\n                })\n              } else {\n                // /:collection/:id\n                res = await endpoints.collection.GET.findByID({\n                  id: slug2,\n                  collection,\n                  req,\n                })\n              }\n              break\n            case 3:\n              if (slug2 === 'file') {\n                // /:collection/file/:filename\n                res = await endpoints.collection.GET.getFile({\n                  collection,\n                  filename: slug3,\n                  req,\n                })\n              } else if (slug3 in endpoints.collection.GET) {\n                // /:collection/:id/preview\n                res = await (endpoints.collection.GET[slug3] as CollectionRouteHandlerWithID)({\n                  id: slug2,\n                  collection,\n                  req,\n                })\n              } else if (`doc-${slug2}-by-id` in endpoints.collection.GET) {\n                // /:collection/access/:id\n                // /:collection/versions/:id\n                res = await (\n                  endpoints.collection.GET[`doc-${slug2}-by-id`] as CollectionRouteHandlerWithID\n                )({ id: slug3, collection, req })\n              }\n              break\n          }\n        }\n      } else if (slug1 === 'globals') {\n        const globalConfig = req.payload.config.globals.find((global) => global.slug === slug2)\n        req.routeParams.global = globalConfig.slug\n\n        const disableEndpoints = endpointsAreDisabled({\n          endpoints: globalConfig.endpoints,\n          request,\n        })\n        if (disableEndpoints) {\n          return disableEndpoints\n        }\n\n        const customEndpointResponse = await handleCustomEndpoints({\n          endpoints: globalConfig.endpoints,\n          entitySlug: `${slug1}/${slug2}`,\n          req,\n        })\n\n        if (customEndpointResponse) {\n          return customEndpointResponse\n        } else {\n          await addDataAndFileToRequest(req)\n          addLocalesToRequestFromData(req)\n\n          switch (slug.length) {\n            case 2:\n              // /globals/:slug\n              res = await endpoints.global.GET.findOne({ globalConfig, req })\n              break\n            case 3:\n              if (slug3 in endpoints.global.GET) {\n                // /globals/:slug/preview\n                res = await (endpoints.global.GET[slug3] as GlobalRouteHandler)({\n                  globalConfig,\n                  req,\n                })\n              } else if (`doc-${slug3}` in endpoints.global.GET) {\n                // /globals/:slug/access\n                // /globals/:slug/versions\n                // /globals/:slug/preview\n                res = await (endpoints.global.GET?.[`doc-${slug3}`] as GlobalRouteHandler)({\n                  globalConfig,\n                  req,\n                })\n              }\n              break\n            case 4:\n              if (`doc-${slug3}-by-id` in endpoints.global.GET) {\n                // /globals/:slug/versions/:id\n                res = await (\n                  endpoints.global.GET?.[`doc-${slug3}-by-id`] as GlobalRouteHandlerWithID\n                )({\n                  id: slug4,\n                  globalConfig,\n                  req,\n                })\n              }\n              break\n          }\n        }\n      } else if (slug.length === 1 && slug1 in endpoints.root.GET) {\n        await addDataAndFileToRequest(req)\n        addLocalesToRequestFromData(req)\n        res = await endpoints.root.GET[slug1]({ req })\n      }\n\n      if (res instanceof Response) {\n        if (req.responseHeaders) {\n          const mergedResponse = new Response(res.body, {\n            headers: mergeHeaders(req.responseHeaders, res.headers),\n            status: res.status,\n            statusText: res.statusText,\n          })\n\n          return mergedResponse\n        }\n\n        return res\n      }\n\n      // root routes\n      const customEndpointResponse = await handleCustomEndpoints({\n        endpoints: req.payload.config.endpoints,\n        req,\n      })\n\n      if (customEndpointResponse) {\n        return customEndpointResponse\n      }\n\n      return RouteNotFoundResponse({\n        slug,\n        req,\n      })\n    } catch (error) {\n      return routeError({\n        collection,\n        config,\n        err: error,\n        req: req || request,\n      })\n    }\n  }\n\nexport const POST =\n  (config: Promise<SanitizedConfig> | SanitizedConfig) =>\n  async (request: Request, { params: paramsPromise }: { params: Promise<{ slug: string[] }> }) => {\n    const { slug } = await paramsPromise\n    const [slug1, slug2, slug3, slug4] = slug\n    let req: PayloadRequest\n    let res: Response\n    let collection: Collection\n\n    const overrideHttpMethod = request.headers.get('X-HTTP-Method-Override')\n    if (overrideHttpMethod === 'GET') {\n      return await GET(config)(request, { params: paramsPromise })\n    }\n\n    try {\n      req = await createPayloadRequest({\n        config,\n        request,\n      })\n\n      collection = req.payload.collections?.[slug1]\n\n      const disableEndpoints = endpointsAreDisabled({\n        endpoints: req.payload.config.endpoints,\n        request,\n      })\n\n      if (disableEndpoints) {\n        return disableEndpoints\n      }\n\n      if (collection) {\n        req.routeParams.collection = slug1\n        const disableEndpoints = endpointsAreDisabled({\n          endpoints: collection.config.endpoints,\n          request,\n        })\n        if (disableEndpoints) {\n          return disableEndpoints\n        }\n\n        const customEndpointResponse = await handleCustomEndpoints({\n          endpoints: collection.config.endpoints,\n          entitySlug: slug1,\n          req,\n        })\n\n        if (customEndpointResponse) {\n          return customEndpointResponse\n        } else {\n          await addDataAndFileToRequest(req)\n          addLocalesToRequestFromData(req)\n\n          switch (slug.length) {\n            case 1:\n              // /:collection\n              res = await endpoints.collection.POST.create({ collection, req })\n              break\n            case 2:\n              if (slug2 in endpoints.collection.POST) {\n                // /:collection/login\n                // /:collection/logout\n                // /:collection/unlock\n                // /:collection/access\n                // /:collection/first-register\n                // /:collection/forgot-password\n                // /:collection/reset-password\n                // /:collection/refresh-token\n\n                res = await (endpoints.collection.POST?.[slug2] as CollectionRouteHandler)({\n                  collection,\n                  req,\n                })\n              }\n              break\n            case 3:\n              if (`doc-${slug2}-by-id` in endpoints.collection.POST) {\n                // /:collection/access/:id\n                // /:collection/versions/:id\n                // /:collection/verify/:token (\"doc-verify-by-id\" uses id as token internally)\n                res = await (\n                  endpoints.collection.POST[`doc-${slug2}-by-id`] as CollectionRouteHandlerWithID\n                )({ id: slug3, collection, req })\n              } else if (slug3 === 'duplicate' && collection.config.disableDuplicate !== true) {\n                // /:collection/:id/duplicate\n                res = await endpoints.collection.POST.duplicate({\n                  id: slug2,\n                  collection,\n                  req,\n                })\n              }\n              break\n          }\n        }\n      } else if (slug1 === 'globals' && slug2) {\n        const globalConfig = req.payload.config.globals.find((global) => global.slug === slug2)\n        req.routeParams.global = globalConfig.slug\n\n        const disableEndpoints = endpointsAreDisabled({\n          endpoints: globalConfig.endpoints,\n          request,\n        })\n        if (disableEndpoints) {\n          return disableEndpoints\n        }\n\n        const customEndpointResponse = await handleCustomEndpoints({\n          endpoints: globalConfig.endpoints,\n          entitySlug: `${slug1}/${slug2}`,\n          req,\n        })\n\n        if (customEndpointResponse) {\n          return customEndpointResponse\n        } else {\n          await addDataAndFileToRequest(req)\n          addLocalesToRequestFromData(req)\n          switch (slug.length) {\n            case 2:\n              // /globals/:slug\n              res = await endpoints.global.POST.update({ globalConfig, req })\n              break\n            case 3:\n              if (`doc-${slug3}` in endpoints.global.POST) {\n                // /globals/:slug/access\n                res = await (endpoints.global.POST?.[`doc-${slug3}`] as GlobalRouteHandler)({\n                  globalConfig,\n                  req,\n                })\n              }\n              break\n            case 4:\n              if (`doc-${slug3}-by-id` in endpoints.global.POST) {\n                // /globals/:slug/versions/:id\n                res = await (\n                  endpoints.global.POST?.[`doc-${slug3}-by-id`] as GlobalRouteHandlerWithID\n                )({\n                  id: slug4,\n                  globalConfig,\n                  req,\n                })\n              }\n              break\n            default:\n              res = new Response('Route Not Found', { status: 404 })\n          }\n        }\n      } else if (slug.length === 1 && slug1 in endpoints.root.POST) {\n        await addDataAndFileToRequest(req)\n        addLocalesToRequestFromData(req)\n        res = await endpoints.root.POST[slug1]({ req })\n      }\n\n      if (res instanceof Response) {\n        if (req.responseHeaders) {\n          const mergedResponse = new Response(res.body, {\n            headers: mergeHeaders(req.responseHeaders, res.headers),\n            status: res.status,\n            statusText: res.statusText,\n          })\n\n          return mergedResponse\n        }\n\n        return res\n      }\n\n      // root routes\n      const customEndpointResponse = await handleCustomEndpoints({\n        endpoints: req.payload.config.endpoints,\n        req,\n      })\n\n      if (customEndpointResponse) {\n        return customEndpointResponse\n      }\n\n      return RouteNotFoundResponse({\n        slug,\n        req,\n      })\n    } catch (error) {\n      return routeError({\n        collection,\n        config,\n        err: error,\n        req: req || request,\n      })\n    }\n  }\n\nexport const DELETE =\n  (config: Promise<SanitizedConfig> | SanitizedConfig) =>\n  async (request: Request, { params: paramsPromise }: { params: Promise<{ slug: string[] }> }) => {\n    const { slug } = await paramsPromise\n    const [slug1, slug2] = slug\n    let req: PayloadRequest\n    let res: Response\n    let collection: Collection\n\n    try {\n      req = await createPayloadRequest({\n        config,\n        request,\n      })\n      collection = req.payload.collections?.[slug1]\n\n      const disableEndpoints = endpointsAreDisabled({\n        endpoints: req.payload.config.endpoints,\n        request,\n      })\n      if (disableEndpoints) {\n        return disableEndpoints\n      }\n\n      if (collection) {\n        req.routeParams.collection = slug1\n\n        const disableEndpoints = endpointsAreDisabled({\n          endpoints: collection.config.endpoints,\n          request,\n        })\n        if (disableEndpoints) {\n          return disableEndpoints\n        }\n\n        const customEndpointResponse = await handleCustomEndpoints({\n          endpoints: collection.config.endpoints,\n          entitySlug: slug1,\n          req,\n        })\n        if (customEndpointResponse) {\n          return customEndpointResponse\n        } else {\n          await addDataAndFileToRequest(req)\n          addLocalesToRequestFromData(req)\n\n          switch (slug.length) {\n            case 1:\n              // /:collection\n              res = await endpoints.collection.DELETE.delete({ collection, req })\n              break\n            case 2:\n              // /:collection/:id\n              res = await endpoints.collection.DELETE.deleteByID({\n                id: slug2,\n                collection,\n                req,\n              })\n              break\n          }\n        }\n      }\n\n      if (res instanceof Response) {\n        if (req.responseHeaders) {\n          const mergedResponse = new Response(res.body, {\n            headers: mergeHeaders(req.responseHeaders, res.headers),\n            status: res.status,\n            statusText: res.statusText,\n          })\n\n          return mergedResponse\n        }\n\n        return res\n      }\n\n      // root routes\n      const customEndpointResponse = await handleCustomEndpoints({\n        endpoints: req.payload.config.endpoints,\n        req,\n      })\n\n      if (customEndpointResponse) {\n        return customEndpointResponse\n      }\n\n      return RouteNotFoundResponse({\n        slug,\n        req,\n      })\n    } catch (error) {\n      return routeError({\n        collection,\n        config,\n        err: error,\n        req: req || request,\n      })\n    }\n  }\n\nexport const PATCH =\n  (config: Promise<SanitizedConfig> | SanitizedConfig) =>\n  async (request: Request, { params: paramsPromise }: { params: Promise<{ slug: string[] }> }) => {\n    const { slug } = await paramsPromise\n    const [slug1, slug2] = slug\n    let req: PayloadRequest\n    let res: Response\n    let collection: Collection\n\n    try {\n      req = await createPayloadRequest({\n        config,\n        request,\n      })\n      collection = req.payload.collections?.[slug1]\n\n      const disableEndpoints = endpointsAreDisabled({\n        endpoints: req.payload.config.endpoints,\n        request,\n      })\n      if (disableEndpoints) {\n        return disableEndpoints\n      }\n\n      if (collection) {\n        req.routeParams.collection = slug1\n\n        const disableEndpoints = endpointsAreDisabled({\n          endpoints: collection.config.endpoints,\n          request,\n        })\n        if (disableEndpoints) {\n          return disableEndpoints\n        }\n\n        const customEndpointResponse = await handleCustomEndpoints({\n          endpoints: collection.config.endpoints,\n          entitySlug: slug1,\n          req,\n        })\n\n        if (customEndpointResponse) {\n          return customEndpointResponse\n        } else {\n          await addDataAndFileToRequest(req)\n          addLocalesToRequestFromData(req)\n\n          switch (slug.length) {\n            case 1:\n              // /:collection\n              res = await endpoints.collection.PATCH.update({ collection, req })\n              break\n            case 2:\n              // /:collection/:id\n              res = await endpoints.collection.PATCH.updateByID({\n                id: slug2,\n                collection,\n                req,\n              })\n              break\n          }\n        }\n      }\n\n      if (res instanceof Response) {\n        if (req.responseHeaders) {\n          const mergedResponse = new Response(res.body, {\n            headers: mergeHeaders(req.responseHeaders, res.headers),\n            status: res.status,\n            statusText: res.statusText,\n          })\n\n          return mergedResponse\n        }\n\n        return res\n      }\n\n      // root routes\n      const customEndpointResponse = await handleCustomEndpoints({\n        endpoints: req.payload.config.endpoints,\n        req,\n      })\n\n      if (customEndpointResponse) {\n        return customEndpointResponse\n      }\n\n      return RouteNotFoundResponse({\n        slug,\n        req,\n      })\n    } catch (error) {\n      return routeError({\n        collection,\n        config,\n        err: error,\n        req: req || request,\n      })\n    }\n  }\n"],"names":["httpStatus","match","addDataAndFileToRequest","addLocalesToRequestFromData","createPayloadRequest","headersWithCors","mergeHeaders","access","forgotPassword","init","login","logout","me","refresh","registerFirstUser","resetPassword","unlock","verifyEmail","buildFormState","endpointsAreDisabled","count","create","deleteDoc","deleteByID","docAccess","duplicate","find","findByID","findVersionByID","findVersions","preview","previewCollection","restoreVersion","update","updateByID","getFile","docAccessGlobal","findOne","findVersionByIdGlobal","findVersionsGlobal","previewGlobal","restoreVersionGlobal","updateGlobal","generateOGImage","routeError","endpoints","collection","DELETE","delete","GET","versions","PATCH","POST","global","root","og","handleCustomEndpoints","entitySlug","req","length","handlerParams","pathname","adjustedPathname","process","env","NEXT_BASE_PATH","pathPrefix","payload","config","routes","api","customEndpoint","endpoint","method","toLowerCase","pathMatchFn","path","decode","decodeURIComponent","tempParams","params","routeParams","res","handler","Response","responseHeaders","mergedResponse","body","headers","status","statusText","RouteNotFoundResponse","slug","json","message","join","Headers","NOT_FOUND","OPTIONS","request","error","err","paramsPromise","slug1","slug2","slug3","slug4","disableEndpoints","collections","customEndpointResponse","id","filename","globalConfig","globals","overrideHttpMethod","get","disableDuplicate"],"mappings":"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"}},
    {"offset": {"line": 4186, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4192, "column": 0}, "map": {"version":3,"file":"routes.js","sources":["turbopack://[project]/node_modules/@payloadcms/next/src/exports/routes.ts"],"sourcesContent":["export { GRAPHQL_PLAYGROUND_GET, GRAPHQL_POST } from '../routes/graphql/index.js'\n\nexport {\n  DELETE as REST_DELETE,\n  GET as REST_GET,\n  OPTIONS as REST_OPTIONS,\n  PATCH as REST_PATCH,\n  POST as REST_POST,\n} from '../routes/rest/index.js'\n"],"names":["GRAPHQL_PLAYGROUND_GET","GRAPHQL_POST","DELETE","REST_DELETE","GET","REST_GET","OPTIONS","REST_OPTIONS","PATCH","REST_PATCH","POST","REST_POST"],"mappings":""}},
    {"offset": {"line": 4196, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}